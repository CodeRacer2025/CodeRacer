(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function _R(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var up={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function vR(){if(wv)return Vl;wv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:n,type:r,key:c,ref:o!==void 0?o:null,props:l}}return Vl.Fragment=e,Vl.jsx=t,Vl.jsxs=t,Vl}var Rv;function TR(){return Rv||(Rv=1,up.exports=vR()),up.exports}var he=TR(),cp={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function ER(){if(Iv)return Ne;Iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,z={};function q(O,re,fe){this.props=O,this.context=re,this.refs=z,this.updater=fe||b}q.prototype.isReactComponent={},q.prototype.setState=function(O,re){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,re,"setState")},q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function $(){}$.prototype=q.prototype;function J(O,re,fe){this.props=O,this.context=re,this.refs=z,this.updater=fe||b}var W=J.prototype=new $;W.constructor=J,M(W,q.prototype),W.isPureReactComponent=!0;var le=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function P(O,re,fe,se,_e,Me){return fe=Me.ref,{$$typeof:n,type:O,key:re,ref:fe!==void 0?fe:null,props:Me}}function I(O,re){return P(O.type,re,void 0,void 0,void 0,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function V(O){var re={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return re[fe]})}var U=/\/+/g;function L(O,re){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):re.toString(36)}function x(){}function We(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(x,x):(O.status="pending",O.then(function(re){O.status==="pending"&&(O.status="fulfilled",O.value=re)},function(re){O.status==="pending"&&(O.status="rejected",O.reason=re)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Ye(O,re,fe,se,_e){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var Ce=!1;if(O===null)Ce=!0;else switch(Me){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(O.$$typeof){case n:case e:Ce=!0;break;case T:return Ce=O._init,Ye(Ce(O._payload),re,fe,se,_e)}}if(Ce)return _e=_e(O),Ce=se===""?"."+L(O,0):se,le(_e)?(fe="",Ce!=null&&(fe=Ce.replace(U,"$&/")+"/"),Ye(_e,re,fe,"",function(Be){return Be})):_e!=null&&(D(_e)&&(_e=I(_e,fe+(_e.key==null||O&&O.key===_e.key?"":(""+_e.key).replace(U,"$&/")+"/")+Ce)),re.push(_e)),1;Ce=0;var ae=se===""?".":se+":";if(le(O))for(var ve=0;ve<O.length;ve++)se=O[ve],Me=ae+L(se,ve),Ce+=Ye(se,re,fe,Me,_e);else if(ve=R(O),typeof ve=="function")for(O=ve.call(O),ve=0;!(se=O.next()).done;)se=se.value,Me=ae+L(se,ve++),Ce+=Ye(se,re,fe,Me,_e);else if(Me==="object"){if(typeof O.then=="function")return Ye(We(O),re,fe,se,_e);throw re=String(O),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function j(O,re,fe){if(O==null)return O;var se=[],_e=0;return Ye(O,se,"","",function(Me){return re.call(fe,Me,_e++)}),se}function ue(O){if(O._status===-1){var re=O._result;re=re(),re.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=re)}if(O._status===1)return O._result.default;throw O._result}var ye=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function qe(){}return Ne.Children={map:j,forEach:function(O,re,fe){j(O,function(){re.apply(this,arguments)},fe)},count:function(O){var re=0;return j(O,function(){re++}),re},toArray:function(O){return j(O,function(re){return re})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ne.Component=q,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=J,Ne.StrictMode=r,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ce.H.useMemoCache(O)}},Ne.cache=function(O){return function(){return O.apply(null,arguments)}},Ne.cloneElement=function(O,re,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=M({},O.props),_e=O.key,Me=void 0;if(re!=null)for(Ce in re.ref!==void 0&&(Me=void 0),re.key!==void 0&&(_e=""+re.key),re)!ge.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(se[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)se.children=fe;else if(1<Ce){for(var ae=Array(Ce),ve=0;ve<Ce;ve++)ae[ve]=arguments[ve+2];se.children=ae}return P(O.type,_e,void 0,void 0,Me,se)},Ne.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ne.createElement=function(O,re,fe){var se,_e={},Me=null;if(re!=null)for(se in re.key!==void 0&&(Me=""+re.key),re)ge.call(re,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(_e[se]=re[se]);var Ce=arguments.length-2;if(Ce===1)_e.children=fe;else if(1<Ce){for(var ae=Array(Ce),ve=0;ve<Ce;ve++)ae[ve]=arguments[ve+2];_e.children=ae}if(O&&O.defaultProps)for(se in Ce=O.defaultProps,Ce)_e[se]===void 0&&(_e[se]=Ce[se]);return P(O,Me,void 0,void 0,null,_e)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:h,render:O}},Ne.isValidElement=D,Ne.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:ue}},Ne.memo=function(O,re){return{$$typeof:g,type:O,compare:re===void 0?null:re}},Ne.startTransition=function(O){var re=ce.T,fe={};ce.T=fe;try{var se=O(),_e=ce.S;_e!==null&&_e(fe,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(qe,ye)}catch(Me){ye(Me)}finally{ce.T=re}},Ne.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ne.use=function(O){return ce.H.use(O)},Ne.useActionState=function(O,re,fe){return ce.H.useActionState(O,re,fe)},Ne.useCallback=function(O,re){return ce.H.useCallback(O,re)},Ne.useContext=function(O){return ce.H.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O,re){return ce.H.useDeferredValue(O,re)},Ne.useEffect=function(O,re,fe){var se=ce.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(O,re)},Ne.useId=function(){return ce.H.useId()},Ne.useImperativeHandle=function(O,re,fe){return ce.H.useImperativeHandle(O,re,fe)},Ne.useInsertionEffect=function(O,re){return ce.H.useInsertionEffect(O,re)},Ne.useLayoutEffect=function(O,re){return ce.H.useLayoutEffect(O,re)},Ne.useMemo=function(O,re){return ce.H.useMemo(O,re)},Ne.useOptimistic=function(O,re){return ce.H.useOptimistic(O,re)},Ne.useReducer=function(O,re,fe){return ce.H.useReducer(O,re,fe)},Ne.useRef=function(O){return ce.H.useRef(O)},Ne.useState=function(O){return ce.H.useState(O)},Ne.useSyncExternalStore=function(O,re,fe){return ce.H.useSyncExternalStore(O,re,fe)},Ne.useTransition=function(){return ce.H.useTransition()},Ne.version="19.1.0",Ne}var bv;function lm(){return bv||(bv=1,cp.exports=ER()),cp.exports}var K=lm();const T0=_R(K);var fp={exports:{}},Ol={},hp={exports:{}},dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function AR(){return Dv||(Dv=1,function(n){function e(j,ue){var ye=j.length;j.push(ue);e:for(;0<ye;){var qe=ye-1>>>1,O=j[qe];if(0<o(O,ue))j[qe]=ue,j[ye]=O,ye=qe;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var ue=j[0],ye=j.pop();if(ye!==ue){j[0]=ye;e:for(var qe=0,O=j.length,re=O>>>1;qe<re;){var fe=2*(qe+1)-1,se=j[fe],_e=fe+1,Me=j[_e];if(0>o(se,ye))_e<O&&0>o(Me,se)?(j[qe]=Me,j[_e]=ye,qe=_e):(j[qe]=se,j[fe]=ye,qe=fe);else if(_e<O&&0>o(Me,ye))j[qe]=Me,j[_e]=ye,qe=_e;else break e}}return ue}function o(j,ue){var ye=j.sortIndex-ue.sortIndex;return ye!==0?ye:j.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],g=[],T=1,S=null,R=3,b=!1,M=!1,z=!1,q=!1,$=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function le(j){for(var ue=t(g);ue!==null;){if(ue.callback===null)r(g);else if(ue.startTime<=j)r(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function ce(j){if(z=!1,le(j),!M)if(t(p)!==null)M=!0,ge||(ge=!0,L());else{var ue=t(g);ue!==null&&Ye(ce,ue.startTime-j)}}var ge=!1,P=-1,I=5,D=-1;function V(){return q?!0:!(n.unstable_now()-D<I)}function U(){if(q=!1,ge){var j=n.unstable_now();D=j;var ue=!0;try{e:{M=!1,z&&(z=!1,J(P),P=-1),b=!0;var ye=R;try{t:{for(le(j),S=t(p);S!==null&&!(S.expirationTime>j&&V());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,R=S.priorityLevel;var O=qe(S.expirationTime<=j);if(j=n.unstable_now(),typeof O=="function"){S.callback=O,le(j),ue=!0;break t}S===t(p)&&r(p),le(j)}else r(p);S=t(p)}if(S!==null)ue=!0;else{var re=t(g);re!==null&&Ye(ce,re.startTime-j),ue=!1}}break e}finally{S=null,R=ye,b=!1}ue=void 0}}finally{ue?L():ge=!1}}}var L;if(typeof W=="function")L=function(){W(U)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,We=x.port2;x.port1.onmessage=U,L=function(){We.postMessage(null)}}else L=function(){$(U,0)};function Ye(j,ue){P=$(function(){j(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_next=function(j){switch(R){case 1:case 2:case 3:var ue=3;break;default:ue=R}var ye=R;R=ue;try{return j()}finally{R=ye}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(j,ue){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ye=R;R=j;try{return ue()}finally{R=ye}},n.unstable_scheduleCallback=function(j,ue,ye){var qe=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?qe+ye:qe):ye=qe,j){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ye+O,j={id:T++,callback:ue,priorityLevel:j,startTime:ye,expirationTime:O,sortIndex:-1},ye>qe?(j.sortIndex=ye,e(g,j),t(p)===null&&j===t(g)&&(z?(J(P),P=-1):z=!0,Ye(ce,ye-qe))):(j.sortIndex=O,e(p,j),M||b||(M=!0,ge||(ge=!0,L()))),j},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(j){var ue=R;return function(){var ye=R;R=ue;try{return j.apply(this,arguments)}finally{R=ye}}}}(dp)),dp}var Mv;function SR(){return Mv||(Mv=1,hp.exports=AR()),hp.exports}var pp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function CR(){if(Nv)return en;Nv=1;var n=lm();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(p,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,T)},en.flushSync=function(p){var g=c.T,T=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=T,r.d.f()}},en.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},en.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},en.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var T=g.as,S=h(T,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:R,fetchPriority:b}):T==="script"&&r.d.X(p,{crossOrigin:S,integrity:R,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},en.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=h(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},en.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,S=h(T,g.crossOrigin);r.d.L(p,T,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},en.preloadModule=function(p,g){if(typeof p=="string")if(g){var T=h(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},en.requestFormReset=function(p){r.d.r(p)},en.unstable_batchedUpdates=function(p,g){return p(g)},en.useFormState=function(p,g,T){return c.H.useFormState(p,g,T)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.1.0",en}var xv;function wR(){if(xv)return pp.exports;xv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=CR(),pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function RR(){if(Pv)return Ol;Pv=1;var n=SR(),e=lm(),t=wR();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(r(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,u=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return h(d),i;if(m===u)return h(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==u.return)a=d,u=m;else{for(var A=!1,C=d.child;C;){if(C===a){A=!0,a=d,u=m;break}if(C===u){A=!0,u=d,a=m;break}C=C.sibling}if(!A){for(C=m.child;C;){if(C===a){A=!0,a=m,u=d;break}if(C===u){A=!0,u=m,a=d;break}C=C.sibling}if(!A)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),W=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function We(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case q:return"Profiler";case z:return"StrictMode";case ce:return"Suspense";case ge:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case W:return(i.displayName||"Context")+".Provider";case J:return(i._context.displayName||"Context")+".Consumer";case le:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return s=i.displayName||null,s!==null?s:We(i.type)||"Memo";case I:s=i._payload,i=i._init;try{return We(i(s))}catch{}}return null}var Ye=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},qe=[],O=-1;function re(i){return{current:i}}function fe(i){0>O||(i.current=qe[O],qe[O]=null,O--)}function se(i,s){O++,qe[O]=i.current,i.current=s}var _e=re(null),Me=re(null),Ce=re(null),ae=re(null);function ve(i,s){switch(se(Ce,s),se(Me,i),se(_e,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Z_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Z_(s),i=ev(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}fe(_e),se(_e,i)}function Be(){fe(_e),fe(Me),fe(Ce)}function Qe(i){i.memoizedState!==null&&se(ae,i);var s=_e.current,a=ev(s,i.type);s!==a&&(se(Me,i),se(_e,a))}function Xe(i){Me.current===i&&(fe(_e),fe(Me)),ae.current===i&&(fe(ae),Dl._currentValue=ye)}var kt=Object.prototype.hasOwnProperty,hn=n.unstable_scheduleCallback,Wt=n.unstable_cancelCallback,dr=n.unstable_shouldYield,us=n.unstable_requestPaint,an=n.unstable_now,ao=n.unstable_getCurrentPriorityLevel,Mi=n.unstable_ImmediatePriority,lo=n.unstable_UserBlockingPriority,cs=n.unstable_NormalPriority,ch=n.unstable_LowPriority,uo=n.unstable_IdlePriority,ba=n.log,_u=n.unstable_setDisableYieldValue,mt=null,et=null;function Tn(i){if(typeof ba=="function"&&_u(i),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(mt,i)}catch{}}var Jt=Math.clz32?Math.clz32:fs,vu=Math.log,fh=Math.LN2;function fs(i){return i>>>=0,i===0?32:31-(vu(i)/fh|0)|0}var hs=256,ds=4194304;function Yn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function co(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?d=Yn(u):(A&=C,A!==0?d=Yn(A):a||(a=C&~i,a!==0&&(d=Yn(a))))):(C=u&~m,C!==0?d=Yn(C):A!==0?d=Yn(A):a||(a=u&~i,a!==0&&(d=Yn(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function ps(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Da(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ma(){var i=hs;return hs<<=1,(hs&4194048)===0&&(hs=256),i}function Na(){var i=ds;return ds<<=1,(ds&62914560)===0&&(ds=4194304),i}function Ni(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function xi(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xa(i,s,a,u,d,m){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,N=i.expirationTimes,G=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-Jt(a),te=1<<Z;C[Z]=0,N[Z]=-1;var Y=G[Z];if(Y!==null)for(G[Z]=null,Z=0;Z<Y.length;Z++){var Q=Y[Z];Q!==null&&(Q.lane&=-536870913)}a&=~te}u!==0&&ii(i,u,0),m!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=m&~(A&~s))}function ii(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Jt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&4194090}function Pa(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-Jt(a),d=1<<u;d&s|i[u]&s&&(i[u]|=s),a&=~d}}function pr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function fo(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function mr(){var i=ue.p;return i!==0?i:(i=window.event,i===void 0?32:vv(i.type))}function Tu(i,s){var a=ue.p;try{return ue.p=i,s()}finally{ue.p=a}}var ct=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ct,St="__reactProps$"+ct,Mn="__reactContainer$"+ct,Va="__reactEvents$"+ct,hh="__reactListeners$"+ct,gr="__reactHandles$"+ct,Eu="__reactResources$"+ct,ms="__reactMarker$"+ct;function yr(i){delete i[Dt],delete i[St],delete i[Va],delete i[hh],delete i[gr]}function Pi(i){var s=i[Dt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Mn]||a[Dt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=rv(i);i!==null;){if(a=i[Dt])return a;i=rv(i)}return s}i=a,a=i.parentNode}return null}function ri(i){if(i=i[Dt]||i[Mn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function si(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function ln(i){var s=i[Eu];return s||(s=i[Eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function vt(i){i[ms]=!0}var Oa=new Set,ho={};function $n(i,s){Vi(i,s),Vi(i+"Capture",s)}function Vi(i,s){for(ho[i]=s,i=0;i<s.length;i++)Oa.add(s[i])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},gs={};function Cu(i){return kt.call(gs,i)?!0:kt.call(Su,i)?!1:Au.test(i)?gs[i]=!0:(Su[i]=!0,!1)}function _r(i,s,a){if(Cu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function oi(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ht(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}var ys,wu;function Oi(i){if(ys===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ys=s&&s[1]||"",wu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ys+i+wu}var po=!1;function mo(i,s){if(!i||po)return"";po=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var Y=Q}Reflect.construct(i,[],te)}else{try{te.call()}catch(Q){Y=Q}i.call(te.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),A=m[0],C=m[1];if(A&&C){var N=A.split(`
`),G=C.split(`
`);for(d=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(u===N.length||d===G.length)for(u=N.length-1,d=G.length-1;1<=u&&0<=d&&N[u]!==G[d];)d--;for(;1<=u&&0<=d;u--,d--)if(N[u]!==G[d]){if(u!==1||d!==1)do if(u--,d--,0>d||N[u]!==G[d]){var Z=`
`+N[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=d);break}}}finally{po=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Oi(a):""}function ka(i){switch(i.tag){case 26:case 27:case 5:return Oi(i.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return mo(i.type,!1);case 11:return mo(i.type.render,!1);case 1:return mo(i.type,!0);case 31:return Oi("Activity");default:return""}}function go(i){try{var s="";do s+=ka(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ua(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dh(i){var s=Ua(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return d.call(this)},set:function(A){u=""+A,m.call(this,A)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function yo(i){i._valueTracker||(i._valueTracker=dh(i))}function La(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=Ua(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function _s(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ph=/[\n"\\]/g;function Ct(i){return i.replace(ph,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function En(i,s,a,u,d,m,A,C){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+un(s)):i.value!==""+un(s)&&(i.value=""+un(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?vr(i,A,un(s)):a!=null?vr(i,A,un(a)):u!=null&&i.removeAttribute("value"),d==null&&m!=null&&(i.defaultChecked=!!m),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+un(C):i.removeAttribute("name")}function vs(i,s,a,u,d,m,A,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+un(a):"",s=s!=null?""+un(s):a,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A)}function vr(i,s,a){s==="number"&&_s(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ki(i,s,a,u){if(i=i.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<i.length;a++)d=s.hasOwnProperty("$"+i[a].value),i[a].selected!==d&&(i[a].selected=d),d&&u&&(i[a].defaultSelected=!0)}else{for(a=""+un(a),s=null,d=0;d<i.length;d++){if(i[d].value===a){i[d].selected=!0,u&&(i[d].defaultSelected=!0);return}s!==null||i[d].disabled||(s=i[d])}s!==null&&(s.selected=!0)}}function it(i,s,a){if(s!=null&&(s=""+un(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+un(a):""}function Ts(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(r(92));if(Ye(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=un(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u)}function Nn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Es=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||Es.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function qa(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&Ru(i,d,u)}else for(var m in s)s.hasOwnProperty(m)&&Ru(i,m,s[m])}function Ba(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(i){return gh.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ui=null;function xn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Li=null,qi=null;function Fa(i){var s=ri(i);if(s&&(i=s.stateNode)){var a=i[St]||null;e:switch(i=s.stateNode,s.type){case"input":if(En(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var d=u[St]||null;if(!d)throw Error(r(90));En(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&La(u)}break e;case"textarea":it(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ki(i,!!a.multiple,s,!1)}}}var ai=!1;function Iu(i,s,a){if(ai)return i(s,a);ai=!0;try{var u=i(s);return u}finally{if(ai=!1,(Li!==null||qi!==null)&&(Tc(),Li&&(s=Li,i=qi,qi=Li=null,Fa(s),i)))for(s=0;s<i.length;s++)Fa(i[s])}}function As(i,s){var a=i.stateNode;if(a===null)return null;var u=a[St]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Qn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Pn=!1}var li=null,Tr=null,Bi=null;function za(){if(Bi)return Bi;var i,s=Tr,a=s.length,u,d="value"in li?li.value:li.textContent,m=d.length;for(i=0;i<a&&s[i]===d[i];i++);var A=a-i;for(u=1;u<=A&&s[a-u]===d[m-u];u++);return Bi=d.slice(i,1<u?1-u:void 0)}function ui(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ci(){return!0}function Ha(){return!1}function Ut(i){function s(a,u,d,m,A){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ci:Ha,this.isPropagationStopped=Ha,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),s}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=Ut(Je),Cs=T({},Je,{view:0,detail:0}),bu=Ut(Cs),To,Eo,fi,ws=T({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fi&&(fi&&i.type==="mousemove"?(To=i.screenX-fi.screenX,Eo=i.screenY-fi.screenY):Eo=To=0,fi=i),To)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),Vn=Ut(ws),Du=T({},ws,{dataTransfer:0}),yh=Ut(Du),Rs=T({},Cs,{relatedTarget:0}),Ao=Ut(Rs),Ga=T({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),So=Ut(Ga),Mu=T({},Je,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Co=Ut(Mu),_h=T({},Je,{data:0}),Ka=Ut(_h),Is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ya(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=xu[i])?!!s[i]:!1}function bs(){return Ya}var Pu=T({},Cs,{key:function(i){if(i.key){var s=Is[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ui(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(i){return i.type==="keypress"?ui(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ui(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wo=Ut(Pu),Vu=T({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Ut(Vu),Fi=T({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Ou=Ut(Fi),ku=T({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uu=Ut(ku),Lu=T({},ws,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ro=Ut(Lu),cn=T({},Je,{newState:0,oldState:0}),qu=Ut(cn),Bu=[9,13,27,32],hi=Qn&&"CompositionEvent"in window,f=null;Qn&&"documentMode"in document&&(f=document.documentMode);var v=Qn&&"TextEvent"in window&&!f,E=Qn&&(!hi||f&&8<f&&11>=f),w=" ",F=!1;function X(i,s){switch(i){case"keyup":return Bu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Mt(i,s){switch(i){case"compositionend":return oe(s);case"keypress":return s.which!==32?null:(F=!0,w);case"textInput":return i=s.data,i===w&&F?null:i;default:return null}}function ze(i,s){if(Fe)return i==="compositionend"||!hi&&X(i,s)?(i=za(),Bi=Tr=li=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Lt[i.type]:s==="textarea"}function zi(i,s,a,u){Li?qi?qi.push(u):qi=[u]:Li=u,s=Rc(s,"onChange"),0<s.length&&(a=new vo("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Gt=null,di=null;function Qa(i){Q_(i,0)}function Fu(i){var s=si(i);if(La(s))return i}function mg(i,s){if(i==="change")return s}var gg=!1;if(Qn){var vh;if(Qn){var Th="oninput"in document;if(!Th){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Th=typeof yg.oninput=="function"}vh=Th}else vh=!1;gg=vh&&(!document.documentMode||9<document.documentMode)}function _g(){Gt&&(Gt.detachEvent("onpropertychange",vg),di=Gt=null)}function vg(i){if(i.propertyName==="value"&&Fu(di)){var s=[];zi(s,di,i,xn(i)),Iu(Qa,s)}}function QC(i,s,a){i==="focusin"?(_g(),Gt=s,di=a,Gt.attachEvent("onpropertychange",vg)):i==="focusout"&&_g()}function XC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Fu(di)}function jC(i,s){if(i==="click")return Fu(s)}function WC(i,s){if(i==="input"||i==="change")return Fu(s)}function JC(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var An=typeof Object.is=="function"?Object.is:JC;function Xa(i,s){if(An(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!kt.call(s,d)||!An(i[d],s[d]))return!1}return!0}function Tg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Eg(i,s){var a=Tg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function Ag(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Ag(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Sg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=_s(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=_s(i.document)}return s}function Eh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var ZC=Qn&&"documentMode"in document&&11>=document.documentMode,Io=null,Ah=null,ja=null,Sh=!1;function Cg(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sh||Io==null||Io!==_s(u)||(u=Io,"selectionStart"in u&&Eh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ja&&Xa(ja,u)||(ja=u,u=Rc(Ah,"onSelect"),0<u.length&&(s=new vo("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=Io)))}function Ds(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var bo={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},Ch={},wg={};Qn&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Ms(i){if(Ch[i])return Ch[i];if(!bo[i])return i;var s=bo[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in wg)return Ch[i]=s[a];return i}var Rg=Ms("animationend"),Ig=Ms("animationiteration"),bg=Ms("animationstart"),ew=Ms("transitionrun"),tw=Ms("transitionstart"),nw=Ms("transitioncancel"),Dg=Ms("transitionend"),Mg=new Map,wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wh.push("scrollEnd");function Xn(i,s){Mg.set(i,s),$n(s,[i])}var Ng=new WeakMap;function On(i,s){if(typeof i=="object"&&i!==null){var a=Ng.get(i);return a!==void 0?a:(s={value:i,source:s,stack:go(s)},Ng.set(i,s),s)}return{value:i,source:s,stack:go(s)}}var kn=[],Do=0,Rh=0;function zu(){for(var i=Do,s=Rh=Do=0;s<i;){var a=kn[s];kn[s++]=null;var u=kn[s];kn[s++]=null;var d=kn[s];kn[s++]=null;var m=kn[s];if(kn[s++]=null,u!==null&&d!==null){var A=u.pending;A===null?d.next=d:(d.next=A.next,A.next=d),u.pending=d}m!==0&&xg(a,d,m)}}function Hu(i,s,a,u){kn[Do++]=i,kn[Do++]=s,kn[Do++]=a,kn[Do++]=u,Rh|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ih(i,s,a,u){return Hu(i,s,a,u),Gu(i)}function Mo(i,s){return Hu(i,null,null,s),Gu(i)}function xg(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var d=!1,m=i.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(d=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,d&&s!==null&&(d=31-Jt(a),i=m.hiddenUpdates,u=i[d],u===null?i[d]=[s]:u.push(s),s.lane=a|536870912),m):null}function Gu(i){if(50<El)throw El=0,Pd=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var No={};function iw(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(i,s,a,u){return new iw(i,s,a,u)}function bh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Hi(i,s){var a=i.alternate;return a===null?(a=Sn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Pg(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Ku(i,s,a,u,d,m){var A=0;if(u=i,typeof i=="function")bh(i)&&(A=1);else if(typeof i=="string")A=sR(i,a,_e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=Sn(31,a,s,d),i.elementType=D,i.lanes=m,i;case M:return Ns(a.children,d,m,s);case z:A=8,d|=24;break;case q:return i=Sn(12,a,s,d|2),i.elementType=q,i.lanes=m,i;case ce:return i=Sn(13,a,s,d),i.elementType=ce,i.lanes=m,i;case ge:return i=Sn(19,a,s,d),i.elementType=ge,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:case W:A=10;break e;case J:A=9;break e;case le:A=11;break e;case P:A=14;break e;case I:A=16,u=null;break e}A=29,a=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Sn(A,a,s,d),s.elementType=i,s.type=u,s.lanes=m,s}function Ns(i,s,a,u){return i=Sn(7,i,u,s),i.lanes=a,i}function Dh(i,s,a){return i=Sn(6,i,null,s),i.lanes=a,i}function Mh(i,s,a){return s=Sn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var xo=[],Po=0,Yu=null,$u=0,Un=[],Ln=0,xs=null,Gi=1,Ki="";function Ps(i,s){xo[Po++]=$u,xo[Po++]=Yu,Yu=i,$u=s}function Vg(i,s,a){Un[Ln++]=Gi,Un[Ln++]=Ki,Un[Ln++]=xs,xs=i;var u=Gi;i=Ki;var d=32-Jt(u)-1;u&=~(1<<d),a+=1;var m=32-Jt(s)+d;if(30<m){var A=d-d%5;m=(u&(1<<A)-1).toString(32),u>>=A,d-=A,Gi=1<<32-Jt(s)+d|a<<d|u,Ki=m+i}else Gi=1<<m|a<<d|u,Ki=i}function Nh(i){i.return!==null&&(Ps(i,1),Vg(i,1,0))}function xh(i){for(;i===Yu;)Yu=xo[--Po],xo[Po]=null,$u=xo[--Po],xo[Po]=null;for(;i===xs;)xs=Un[--Ln],Un[Ln]=null,Ki=Un[--Ln],Un[Ln]=null,Gi=Un[--Ln],Un[Ln]=null}var fn=null,gt=null,je=!1,Vs=null,pi=!1,Ph=Error(r(519));function Os(i){var s=Error(r(418,""));throw Za(On(s,i)),Ph}function Og(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[Dt]=i,s[St]=u,a){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(a=0;a<Sl.length;a++)ke(Sl[a],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),vs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),yo(s);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Ts(s,u.value,u.defaultValue,u.children),yo(s)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||J_(s.textContent,a)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=Ic),s=!0):s=!1,s||Os(i)}function kg(i){for(fn=i.return;fn;)switch(fn.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:fn=fn.return}}function Wa(i){if(i!==fn)return!1;if(!je)return kg(i),je=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Xd(i.type,i.memoizedProps)),a=!a),a&&gt&&Os(i),kg(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){gt=Wn(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}gt=null}}else s===27?(s=gt,kr(i.type)?(i=Zd,Zd=null,gt=i):gt=s):gt=fn?Wn(i.stateNode.nextSibling):null;return!0}function Ja(){gt=fn=null,je=!1}function Ug(){var i=Vs;return i!==null&&(mn===null?mn=i:mn.push.apply(mn,i),Vs=null),i}function Za(i){Vs===null?Vs=[i]:Vs.push(i)}var Vh=re(null),ks=null,Yi=null;function Er(i,s,a){se(Vh,s._currentValue),s._currentValue=a}function $i(i){i._currentValue=Vh.current,fe(Vh)}function Oh(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function kh(i,s,a,u){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var m=d.dependencies;if(m!==null){var A=d.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=d;for(var N=0;N<s.length;N++)if(C.context===s[N]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),Oh(m.return,a,i),u||(A=null);break e}m=C.next}}else if(d.tag===18){if(A=d.return,A===null)throw Error(r(341));A.lanes|=a,m=A.alternate,m!==null&&(m.lanes|=a),Oh(A,a,i),A=null}else A=d.child;if(A!==null)A.return=d;else for(A=d;A!==null;){if(A===i){A=null;break}if(d=A.sibling,d!==null){d.return=A.return,A=d;break}A=A.return}d=A}}function el(i,s,a,u){i=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var A=d.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var C=d.type;An(d.pendingProps.value,A.value)||(i!==null?i.push(C):i=[C])}}else if(d===ae.current){if(A=d.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(Dl):i=[Dl])}d=d.return}i!==null&&kh(s,i,a,u),s.flags|=262144}function Qu(i){for(i=i.firstContext;i!==null;){if(!An(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Us(i){ks=i,Yi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zt(i){return Lg(ks,i)}function Xu(i,s){return ks===null&&Us(i),Lg(i,s)}function Lg(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yi===null){if(i===null)throw Error(r(308));Yi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Yi=Yi.next=s;return a}var rw=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},sw=n.unstable_scheduleCallback,ow=n.unstable_NormalPriority,xt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uh(){return{controller:new rw,data:new Map,refCount:0}}function tl(i){i.refCount--,i.refCount===0&&sw(ow,function(){i.controller.abort()})}var nl=null,Lh=0,Vo=0,Oo=null;function aw(i,s){if(nl===null){var a=nl=[];Lh=0,Vo=Bd(),Oo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Lh++,s.then(qg,qg),s}function qg(){if(--Lh===0&&nl!==null){Oo!==null&&(Oo.status="fulfilled");var i=nl;nl=null,Vo=0,Oo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function lw(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var Bg=j.S;j.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&aw(i,s),Bg!==null&&Bg(i,s)};var Ls=re(null);function qh(){var i=Ls.current;return i!==null?i:lt.pooledCache}function ju(i,s){s===null?se(Ls,Ls.current):se(Ls,s.pool)}function Fg(){var i=qh();return i===null?null:{parent:xt._currentValue,pool:i}}var il=Error(r(460)),zg=Error(r(474)),Wu=Error(r(542)),Bh={then:function(){}};function Hg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ju(){}function Gg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Ju,Ju),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yg(i),i;default:if(typeof s.status=="string")s.then(Ju,Ju);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yg(i),i}throw rl=s,il}}var rl=null;function Kg(){if(rl===null)throw Error(r(459));var i=rl;return rl=null,i}function Yg(i){if(i===il||i===Wu)throw Error(r(483))}var Ar=!1;function Fh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Sr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Cr(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(tt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Gu(i),xg(i,null,a),s}return Hu(i,u,s,a),Gu(i)}function sl(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,Pa(i,a)}}function Hh(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=A:m=m.next=A,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Gh=!1;function ol(){if(Gh){var i=Oo;if(i!==null)throw i}}function al(i,s,a,u){Gh=!1;var d=i.updateQueue;Ar=!1;var m=d.firstBaseUpdate,A=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,G=N.next;N.next=null,A===null?m=G:A.next=G,A=N;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==A&&(C===null?Z.firstBaseUpdate=G:C.next=G,Z.lastBaseUpdate=N))}if(m!==null){var te=d.baseState;A=0,Z=G=N=null,C=m;do{var Y=C.lane&-536870913,Q=Y!==C.lane;if(Q?(He&Y)===Y:(u&Y)===Y){Y!==0&&Y===Vo&&(Gh=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var we=i,Ae=C;Y=s;var ot=a;switch(Ae.tag){case 1:if(we=Ae.payload,typeof we=="function"){te=we.call(ot,te,Y);break e}te=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ae.payload,Y=typeof we=="function"?we.call(ot,te,Y):we,Y==null)break e;te=T({},te,Y);break e;case 2:Ar=!0}}Y=C.callback,Y!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(G=Z=Q,N=te):Z=Z.next=Q,A|=Y;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);Z===null&&(N=te),d.baseState=N,d.firstBaseUpdate=G,d.lastBaseUpdate=Z,m===null&&(d.shared.lanes=0),xr|=A,i.lanes=A,i.memoizedState=te}}function $g(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Qg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)$g(a[i],s)}var ko=re(null),Zu=re(0);function Xg(i,s){i=er,se(Zu,i),se(ko,s),er=i|s.baseLanes}function Kh(){se(Zu,er),se(ko,ko.current)}function Yh(){er=Zu.current,fe(ko),fe(Zu)}var wr=0,xe=null,rt=null,wt=null,ec=!1,Uo=!1,qs=!1,tc=0,ll=0,Lo=null,uw=0;function Tt(){throw Error(r(321))}function $h(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!An(i[a],s[a]))return!1;return!0}function Qh(i,s,a,u,d,m){return wr=m,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=i===null||i.memoizedState===null?xy:Py,qs=!1,m=a(u,d),qs=!1,Uo&&(m=Wg(s,a,u,d)),jg(i),m}function jg(i){j.H=ac;var s=rt!==null&&rt.next!==null;if(wr=0,wt=rt=xe=null,ec=!1,ll=0,Lo=null,s)throw Error(r(300));i===null||qt||(i=i.dependencies,i!==null&&Qu(i)&&(qt=!0))}function Wg(i,s,a,u){xe=i;var d=0;do{if(Uo&&(Lo=null),ll=0,Uo=!1,25<=d)throw Error(r(301));if(d+=1,wt=rt=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=gw,m=s(a,u)}while(Uo);return m}function cw(){var i=j.H,s=i.useState()[0];return s=typeof s.then=="function"?ul(s):s,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(xe.flags|=1024),s}function Xh(){var i=tc!==0;return tc=0,i}function jh(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function Wh(i){if(ec){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ec=!1}wr=0,wt=rt=xe=null,Uo=!1,ll=tc=0,Lo=null}function dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?xe.memoizedState=wt=i:wt=wt.next=i,wt}function Rt(){if(rt===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var s=wt===null?xe.memoizedState:wt.next;if(s!==null)wt=s,rt=i;else{if(i===null)throw xe.alternate===null?Error(r(467)):Error(r(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},wt===null?xe.memoizedState=wt=i:wt=wt.next=i}return wt}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(i){var s=ll;return ll+=1,Lo===null&&(Lo=[]),i=Gg(Lo,i,s),s=xe,(wt===null?s.memoizedState:wt.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?xy:Py),i}function nc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ul(i);if(i.$$typeof===W)return Zt(i)}throw Error(r(438,String(i)))}function Zh(i){var s=null,a=xe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jh(),xe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=V;return s.index++,a}function Qi(i,s){return typeof s=="function"?s(i):s}function ic(i){var s=Rt();return ed(s,rt,i)}function ed(i,s,a){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=i.baseQueue,m=u.pending;if(m!==null){if(d!==null){var A=d.next;d.next=m.next,m.next=A}s.baseQueue=d=m,u.pending=null}if(m=i.baseState,d===null)i.memoizedState=m;else{s=d.next;var C=A=null,N=null,G=s,Z=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(He&te)===te:(wr&te)===te){var Y=G.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===Vo&&(Z=!0);else if((wr&Y)===Y){G=G.next,Y===Vo&&(Z=!0);continue}else te={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(C=N=te,A=m):N=N.next=te,xe.lanes|=Y,xr|=Y;te=G.action,qs&&a(m,te),m=G.hasEagerState?G.eagerState:a(m,te)}else Y={lane:te,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(C=N=Y,A=m):N=N.next=Y,xe.lanes|=te,xr|=te;G=G.next}while(G!==null&&G!==s);if(N===null?A=m:N.next=C,!An(m,i.memoizedState)&&(qt=!0,Z&&(a=Oo,a!==null)))throw a;i.memoizedState=m,i.baseState=A,i.baseQueue=N,u.lastRenderedState=m}return d===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function td(i){var s=Rt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var A=d=d.next;do m=i(m,A.action),A=A.next;while(A!==d);An(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function Jg(i,s,a){var u=xe,d=Rt(),m=je;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var A=!An((rt||d).memoizedState,a);A&&(d.memoizedState=a,qt=!0),d=d.queue;var C=ty.bind(null,u,d,i);if(cl(2048,8,C,[i]),d.getSnapshot!==s||A||wt!==null&&wt.memoizedState.tag&1){if(u.flags|=2048,qo(9,rc(),ey.bind(null,u,d,a,s),null),lt===null)throw Error(r(349));m||(wr&124)!==0||Zg(u,s,a)}return a}function Zg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=xe.updateQueue,s===null?(s=Jh(),xe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function ey(i,s,a,u){s.value=a,s.getSnapshot=u,ny(s)&&iy(i)}function ty(i,s,a){return a(function(){ny(s)&&iy(i)})}function ny(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!An(i,a)}catch{return!0}}function iy(i){var s=Mo(i,2);s!==null&&bn(s,i,2)}function nd(i){var s=dn();if(typeof i=="function"){var a=i;if(i=a(),qs){Tn(!0);try{a()}finally{Tn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:i},s}function ry(i,s,a,u){return i.baseState=a,ed(i,rt,typeof u=="function"?u:Qi)}function fw(i,s,a,u,d){if(oc(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};j.T!==null?a(!0):m.isTransition=!1,u(m),a=s.pending,a===null?(m.next=s.pending=m,sy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function sy(i,s){var a=s.action,u=s.payload,d=i.state;if(s.isTransition){var m=j.T,A={};j.T=A;try{var C=a(d,u),N=j.S;N!==null&&N(A,C),oy(i,s,C)}catch(G){id(i,s,G)}finally{j.T=m}}else try{m=a(d,u),oy(i,s,m)}catch(G){id(i,s,G)}}function oy(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ay(i,s,u)},function(u){return id(i,s,u)}):ay(i,s,a)}function ay(i,s,a){s.status="fulfilled",s.value=a,ly(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,sy(i,a)))}function id(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,ly(s),s=s.next;while(s!==u)}i.action=null}function ly(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function uy(i,s){return s}function cy(i,s){if(je){var a=lt.formState;if(a!==null){e:{var u=xe;if(je){if(gt){t:{for(var d=gt,m=pi;d.nodeType!==8;){if(!m){d=null;break t}if(d=Wn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){gt=Wn(d.nextSibling),u=d.data==="F!";break e}}Os(u)}u=!1}u&&(s=a[0])}}return a=dn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:s},a.queue=u,a=Dy.bind(null,xe,u),u.dispatch=a,u=nd(!1),m=ld.bind(null,xe,!1,u.queue),u=dn(),d={state:s,dispatch:null,action:i,pending:null},u.queue=d,a=fw.bind(null,xe,d,m,a),d.dispatch=a,u.memoizedState=i,[s,a,!1]}function fy(i){var s=Rt();return hy(s,rt,i)}function hy(i,s,a){if(s=ed(i,s,uy)[0],i=ic(Qi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ul(s)}catch(A){throw A===il?Wu:A}else u=s;s=Rt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(xe.flags|=2048,qo(9,rc(),hw.bind(null,d,a),null)),[u,m,i]}function hw(i,s){i.action=s}function dy(i){var s=Rt(),a=rt;if(a!==null)return hy(s,a,i);Rt(),s=s.memoizedState,a=Rt();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function qo(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Jh(),xe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function rc(){return{destroy:void 0,resource:void 0}}function py(){return Rt().memoizedState}function sc(i,s,a,u){var d=dn();u=u===void 0?null:u,xe.flags|=i,d.memoizedState=qo(1|s,rc(),a,u)}function cl(i,s,a,u){var d=Rt();u=u===void 0?null:u;var m=d.memoizedState.inst;rt!==null&&u!==null&&$h(u,rt.memoizedState.deps)?d.memoizedState=qo(s,m,a,u):(xe.flags|=i,d.memoizedState=qo(1|s,m,a,u))}function my(i,s){sc(8390656,8,i,s)}function gy(i,s){cl(2048,8,i,s)}function yy(i,s){return cl(4,2,i,s)}function _y(i,s){return cl(4,4,i,s)}function vy(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Ty(i,s,a){a=a!=null?a.concat([i]):null,cl(4,4,vy.bind(null,s,i),a)}function rd(){}function Ey(i,s){var a=Rt();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&$h(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Ay(i,s){var a=Rt();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&$h(s,u[1]))return u[0];if(u=i(),qs){Tn(!0);try{i()}finally{Tn(!1)}}return a.memoizedState=[u,s],u}function sd(i,s,a){return a===void 0||(wr&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=w_(),xe.lanes|=i,xr|=i,a)}function Sy(i,s,a,u){return An(a,s)?a:ko.current!==null?(i=sd(i,a,u),An(i,s)||(qt=!0),i):(wr&42)===0?(qt=!0,i.memoizedState=a):(i=w_(),xe.lanes|=i,xr|=i,s)}function Cy(i,s,a,u,d){var m=ue.p;ue.p=m!==0&&8>m?m:8;var A=j.T,C={};j.T=C,ld(i,!1,s,a);try{var N=d(),G=j.S;if(G!==null&&G(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Z=lw(N,u);fl(i,s,Z,In(i))}else fl(i,s,u,In(i))}catch(te){fl(i,s,{then:function(){},status:"rejected",reason:te},In())}finally{ue.p=m,j.T=A}}function dw(){}function od(i,s,a,u){if(i.tag!==5)throw Error(r(476));var d=wy(i).queue;Cy(i,d,s,ye,a===null?dw:function(){return Ry(i),a(u)})}function wy(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Ry(i){var s=wy(i).next.queue;fl(i,s,{},In())}function ad(){return Zt(Dl)}function Iy(){return Rt().memoizedState}function by(){return Rt().memoizedState}function pw(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=In();i=Sr(a);var u=Cr(s,i,a);u!==null&&(bn(u,s,a),sl(u,s,a)),s={cache:Uh()},i.payload=s;return}s=s.return}}function mw(i,s,a){var u=In();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oc(i)?My(s,a):(a=Ih(i,s,a,u),a!==null&&(bn(a,i,u),Ny(a,s,u)))}function Dy(i,s,a){var u=In();fl(i,s,a,u)}function fl(i,s,a,u){var d={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(i))My(s,d);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var A=s.lastRenderedState,C=m(A,a);if(d.hasEagerState=!0,d.eagerState=C,An(C,A))return Hu(i,s,d,0),lt===null&&zu(),!1}catch{}finally{}if(a=Ih(i,s,d,u),a!==null)return bn(a,i,u),Ny(a,s,u),!0}return!1}function ld(i,s,a,u){if(u={lane:2,revertLane:Bd(),action:u,hasEagerState:!1,eagerState:null,next:null},oc(i)){if(s)throw Error(r(479))}else s=Ih(i,a,u,2),s!==null&&bn(s,i,2)}function oc(i){var s=i.alternate;return i===xe||s!==null&&s===xe}function My(i,s){Uo=ec=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Ny(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,Pa(i,a)}}var ac={readContext:Zt,use:nc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},xy={readContext:Zt,use:nc,useCallback:function(i,s){return dn().memoizedState=[i,s===void 0?null:s],i},useContext:Zt,useEffect:my,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,sc(4194308,4,vy.bind(null,s,i),a)},useLayoutEffect:function(i,s){return sc(4194308,4,i,s)},useInsertionEffect:function(i,s){sc(4,2,i,s)},useMemo:function(i,s){var a=dn();s=s===void 0?null:s;var u=i();if(qs){Tn(!0);try{i()}finally{Tn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=dn();if(a!==void 0){var d=a(s);if(qs){Tn(!0);try{a(s)}finally{Tn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},u.queue=i,i=i.dispatch=mw.bind(null,xe,i),[u.memoizedState,i]},useRef:function(i){var s=dn();return i={current:i},s.memoizedState=i},useState:function(i){i=nd(i);var s=i.queue,a=Dy.bind(null,xe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:rd,useDeferredValue:function(i,s){var a=dn();return sd(a,i,s)},useTransition:function(){var i=nd(!1);return i=Cy.bind(null,xe,i.queue,!0,!1),dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=xe,d=dn();if(je){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),lt===null)throw Error(r(349));(He&124)!==0||Zg(u,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,my(ty.bind(null,u,m,i),[i]),u.flags|=2048,qo(9,rc(),ey.bind(null,u,m,a,s),null),a},useId:function(){var i=dn(),s=lt.identifierPrefix;if(je){var a=Ki,u=Gi;a=(u&~(1<<32-Jt(u)-1)).toString(32)+a,s=""+s+"R"+a,a=tc++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=uw++,s=""+s+"r"+a.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:ad,useFormState:cy,useActionState:cy,useOptimistic:function(i){var s=dn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ld.bind(null,xe,!0,a),a.dispatch=s,[i,s]},useMemoCache:Zh,useCacheRefresh:function(){return dn().memoizedState=pw.bind(null,xe)}},Py={readContext:Zt,use:nc,useCallback:Ey,useContext:Zt,useEffect:gy,useImperativeHandle:Ty,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Ay,useReducer:ic,useRef:py,useState:function(){return ic(Qi)},useDebugValue:rd,useDeferredValue:function(i,s){var a=Rt();return Sy(a,rt.memoizedState,i,s)},useTransition:function(){var i=ic(Qi)[0],s=Rt().memoizedState;return[typeof i=="boolean"?i:ul(i),s]},useSyncExternalStore:Jg,useId:Iy,useHostTransitionStatus:ad,useFormState:fy,useActionState:fy,useOptimistic:function(i,s){var a=Rt();return ry(a,rt,i,s)},useMemoCache:Zh,useCacheRefresh:by},gw={readContext:Zt,use:nc,useCallback:Ey,useContext:Zt,useEffect:gy,useImperativeHandle:Ty,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:Ay,useReducer:td,useRef:py,useState:function(){return td(Qi)},useDebugValue:rd,useDeferredValue:function(i,s){var a=Rt();return rt===null?sd(a,i,s):Sy(a,rt.memoizedState,i,s)},useTransition:function(){var i=td(Qi)[0],s=Rt().memoizedState;return[typeof i=="boolean"?i:ul(i),s]},useSyncExternalStore:Jg,useId:Iy,useHostTransitionStatus:ad,useFormState:dy,useActionState:dy,useOptimistic:function(i,s){var a=Rt();return rt!==null?ry(a,rt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Zh,useCacheRefresh:by},Bo=null,hl=0;function lc(i){var s=hl;return hl+=1,Bo===null&&(Bo=[]),Gg(Bo,i,s)}function dl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function uc(i,s){throw s.$$typeof===S?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Vy(i){var s=i._init;return s(i._payload)}function Oy(i){function s(B,k){if(i){var H=B.deletions;H===null?(B.deletions=[k],B.flags|=16):H.push(k)}}function a(B,k){if(!i)return null;for(;k!==null;)s(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function d(B,k){return B=Hi(B,k),B.index=0,B.sibling=null,B}function m(B,k,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<k?(B.flags|=67108866,k):H):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function A(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function C(B,k,H,ee){return k===null||k.tag!==6?(k=Dh(H,B.mode,ee),k.return=B,k):(k=d(k,H),k.return=B,k)}function N(B,k,H,ee){var me=H.type;return me===M?Z(B,k,H.props.children,ee,H.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&Vy(me)===k.type)?(k=d(k,H.props),dl(k,H),k.return=B,k):(k=Ku(H.type,H.key,H.props,null,B.mode,ee),dl(k,H),k.return=B,k)}function G(B,k,H,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Mh(H,B.mode,ee),k.return=B,k):(k=d(k,H.children||[]),k.return=B,k)}function Z(B,k,H,ee,me){return k===null||k.tag!==7?(k=Ns(H,B.mode,ee,me),k.return=B,k):(k=d(k,H),k.return=B,k)}function te(B,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Dh(""+k,B.mode,H),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return H=Ku(k.type,k.key,k.props,null,B.mode,H),dl(H,k),H.return=B,H;case b:return k=Mh(k,B.mode,H),k.return=B,k;case I:var ee=k._init;return k=ee(k._payload),te(B,k,H)}if(Ye(k)||L(k))return k=Ns(k,B.mode,H,null),k.return=B,k;if(typeof k.then=="function")return te(B,lc(k),H);if(k.$$typeof===W)return te(B,Xu(B,k),H);uc(B,k)}return null}function Y(B,k,H,ee){var me=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return me!==null?null:C(B,k,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===me?N(B,k,H,ee):null;case b:return H.key===me?G(B,k,H,ee):null;case I:return me=H._init,H=me(H._payload),Y(B,k,H,ee)}if(Ye(H)||L(H))return me!==null?null:Z(B,k,H,ee,null);if(typeof H.then=="function")return Y(B,k,lc(H),ee);if(H.$$typeof===W)return Y(B,k,Xu(B,H),ee);uc(B,H)}return null}function Q(B,k,H,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,C(k,B,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return B=B.get(ee.key===null?H:ee.key)||null,N(k,B,ee,me);case b:return B=B.get(ee.key===null?H:ee.key)||null,G(k,B,ee,me);case I:var Ve=ee._init;return ee=Ve(ee._payload),Q(B,k,H,ee,me)}if(Ye(ee)||L(ee))return B=B.get(H)||null,Z(k,B,ee,me,null);if(typeof ee.then=="function")return Q(B,k,H,lc(ee),me);if(ee.$$typeof===W)return Q(B,k,H,Xu(k,ee),me);uc(k,ee)}return null}function we(B,k,H,ee){for(var me=null,Ve=null,Te=k,Se=k=0,Ft=null;Te!==null&&Se<H.length;Se++){Te.index>Se?(Ft=Te,Te=null):Ft=Te.sibling;var $e=Y(B,Te,H[Se],ee);if($e===null){Te===null&&(Te=Ft);break}i&&Te&&$e.alternate===null&&s(B,Te),k=m($e,k,Se),Ve===null?me=$e:Ve.sibling=$e,Ve=$e,Te=Ft}if(Se===H.length)return a(B,Te),je&&Ps(B,Se),me;if(Te===null){for(;Se<H.length;Se++)Te=te(B,H[Se],ee),Te!==null&&(k=m(Te,k,Se),Ve===null?me=Te:Ve.sibling=Te,Ve=Te);return je&&Ps(B,Se),me}for(Te=u(Te);Se<H.length;Se++)Ft=Q(Te,B,Se,H[Se],ee),Ft!==null&&(i&&Ft.alternate!==null&&Te.delete(Ft.key===null?Se:Ft.key),k=m(Ft,k,Se),Ve===null?me=Ft:Ve.sibling=Ft,Ve=Ft);return i&&Te.forEach(function(Fr){return s(B,Fr)}),je&&Ps(B,Se),me}function Ae(B,k,H,ee){if(H==null)throw Error(r(151));for(var me=null,Ve=null,Te=k,Se=k=0,Ft=null,$e=H.next();Te!==null&&!$e.done;Se++,$e=H.next()){Te.index>Se?(Ft=Te,Te=null):Ft=Te.sibling;var Fr=Y(B,Te,$e.value,ee);if(Fr===null){Te===null&&(Te=Ft);break}i&&Te&&Fr.alternate===null&&s(B,Te),k=m(Fr,k,Se),Ve===null?me=Fr:Ve.sibling=Fr,Ve=Fr,Te=Ft}if($e.done)return a(B,Te),je&&Ps(B,Se),me;if(Te===null){for(;!$e.done;Se++,$e=H.next())$e=te(B,$e.value,ee),$e!==null&&(k=m($e,k,Se),Ve===null?me=$e:Ve.sibling=$e,Ve=$e);return je&&Ps(B,Se),me}for(Te=u(Te);!$e.done;Se++,$e=H.next())$e=Q(Te,B,Se,$e.value,ee),$e!==null&&(i&&$e.alternate!==null&&Te.delete($e.key===null?Se:$e.key),k=m($e,k,Se),Ve===null?me=$e:Ve.sibling=$e,Ve=$e);return i&&Te.forEach(function(yR){return s(B,yR)}),je&&Ps(B,Se),me}function ot(B,k,H,ee){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var me=H.key;k!==null;){if(k.key===me){if(me=H.type,me===M){if(k.tag===7){a(B,k.sibling),ee=d(k,H.props.children),ee.return=B,B=ee;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&Vy(me)===k.type){a(B,k.sibling),ee=d(k,H.props),dl(ee,H),ee.return=B,B=ee;break e}a(B,k);break}else s(B,k);k=k.sibling}H.type===M?(ee=Ns(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=Ku(H.type,H.key,H.props,null,B.mode,ee),dl(ee,H),ee.return=B,B=ee)}return A(B);case b:e:{for(me=H.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(B,k.sibling),ee=d(k,H.children||[]),ee.return=B,B=ee;break e}else{a(B,k);break}else s(B,k);k=k.sibling}ee=Mh(H,B.mode,ee),ee.return=B,B=ee}return A(B);case I:return me=H._init,H=me(H._payload),ot(B,k,H,ee)}if(Ye(H))return we(B,k,H,ee);if(L(H)){if(me=L(H),typeof me!="function")throw Error(r(150));return H=me.call(H),Ae(B,k,H,ee)}if(typeof H.then=="function")return ot(B,k,lc(H),ee);if(H.$$typeof===W)return ot(B,k,Xu(B,H),ee);uc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(B,k.sibling),ee=d(k,H),ee.return=B,B=ee):(a(B,k),ee=Dh(H,B.mode,ee),ee.return=B,B=ee),A(B)):a(B,k)}return function(B,k,H,ee){try{hl=0;var me=ot(B,k,H,ee);return Bo=null,me}catch(Te){if(Te===il||Te===Wu)throw Te;var Ve=Sn(29,Te,null,B.mode);return Ve.lanes=ee,Ve.return=B,Ve}finally{}}}var Fo=Oy(!0),ky=Oy(!1),qn=re(null),mi=null;function Rr(i){var s=i.alternate;se(Pt,Pt.current&1),se(qn,i),mi===null&&(s===null||ko.current!==null||s.memoizedState!==null)&&(mi=i)}function Uy(i){if(i.tag===22){if(se(Pt,Pt.current),se(qn,i),mi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(mi=i)}}else Ir()}function Ir(){se(Pt,Pt.current),se(qn,qn.current)}function Xi(i){fe(qn),mi===i&&(mi=null),fe(Pt)}var Pt=re(0);function cc(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ud(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:T({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var cd={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=In(),d=Sr(u);d.payload=s,a!=null&&(d.callback=a),s=Cr(i,d,u),s!==null&&(bn(s,i,u),sl(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=In(),d=Sr(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Cr(i,d,u),s!==null&&(bn(s,i,u),sl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=In(),u=Sr(a);u.tag=2,s!=null&&(u.callback=s),s=Cr(i,u,a),s!==null&&(bn(s,i,a),sl(s,i,a))}};function Ly(i,s,a,u,d,m,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,A):s.prototype&&s.prototype.isPureReactComponent?!Xa(a,u)||!Xa(d,m):!0}function qy(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&cd.enqueueReplaceState(s,s.state,null)}function Bs(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=T({},a));for(var d in i)a[d]===void 0&&(a[d]=i[d])}return a}var fc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function By(i){fc(i)}function Fy(i){console.error(i)}function zy(i){fc(i)}function hc(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Hy(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function fd(i,s,a){return a=Sr(a),a.tag=3,a.payload={element:null},a.callback=function(){hc(i,s)},a}function Gy(i){return i=Sr(i),i.tag=3,i}function Ky(i,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;i.payload=function(){return d(m)},i.callback=function(){Hy(s,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Hy(s,a,u),typeof d!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function yw(i,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&el(s,a,d,!0),a=qn.current,a!==null){switch(a.tag){case 13:return mi===null?Od():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===Bh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Ud(i,u,d)),!1;case 22:return a.flags|=65536,u===Bh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Ud(i,u,d)),!1}throw Error(r(435,a.tag))}return Ud(i,u,d),Od(),!1}if(je)return s=qn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Ph&&(i=Error(r(422),{cause:u}),Za(On(i,a)))):(u!==Ph&&(s=Error(r(423),{cause:u}),Za(On(s,a))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,u=On(u,a),d=fd(i.stateNode,u,d),Hh(i,d),yt!==4&&(yt=2)),!1;var m=Error(r(520),{cause:u});if(m=On(m,a),Tl===null?Tl=[m]:Tl.push(m),yt!==4&&(yt=2),s===null)return!0;u=On(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=d&-d,a.lanes|=i,i=fd(a.stateNode,u,i),Hh(a,i),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Pr===null||!Pr.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Gy(d),Ky(d,i,a,u),Hh(a,d),!1}a=a.return}while(a!==null);return!1}var Yy=Error(r(461)),qt=!1;function Kt(i,s,a,u){s.child=i===null?ky(s,null,a,u):Fo(s,i.child,a,u)}function $y(i,s,a,u,d){a=a.render;var m=s.ref;if("ref"in u){var A={};for(var C in u)C!=="ref"&&(A[C]=u[C])}else A=u;return Us(s),u=Qh(i,s,a,A,m,d),C=Xh(),i!==null&&!qt?(jh(i,s,d),ji(i,s,d)):(je&&C&&Nh(s),s.flags|=1,Kt(i,s,u,d),s.child)}function Qy(i,s,a,u,d){if(i===null){var m=a.type;return typeof m=="function"&&!bh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Xy(i,s,m,u,d)):(i=Ku(a.type,null,u,s,s.mode,d),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!vd(i,d)){var A=m.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(A,u)&&i.ref===s.ref)return ji(i,s,d)}return s.flags|=1,i=Hi(m,u),i.ref=s.ref,i.return=s,s.child=i}function Xy(i,s,a,u,d){if(i!==null){var m=i.memoizedProps;if(Xa(m,u)&&i.ref===s.ref)if(qt=!1,s.pendingProps=u=m,vd(i,d))(i.flags&131072)!==0&&(qt=!0);else return s.lanes=i.lanes,ji(i,s,d)}return hd(i,s,a,u,d)}function jy(i,s,a){var u=s.pendingProps,d=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|a:a,i!==null){for(d=s.child=i.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return Wy(i,s,u,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&ju(s,m!==null?m.cachePool:null),m!==null?Xg(s,m):Kh(),Uy(s);else return s.lanes=s.childLanes=536870912,Wy(i,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(ju(s,m.cachePool),Xg(s,m),Ir(),s.memoizedState=null):(i!==null&&ju(s,null),Kh(),Ir());return Kt(i,s,d,a),s.child}function Wy(i,s,a,u){var d=qh();return d=d===null?null:{parent:xt._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},i!==null&&ju(s,null),Kh(),Uy(s),i!==null&&el(i,s,u,!0),null}function dc(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function hd(i,s,a,u,d){return Us(s),a=Qh(i,s,a,u,void 0,d),u=Xh(),i!==null&&!qt?(jh(i,s,d),ji(i,s,d)):(je&&u&&Nh(s),s.flags|=1,Kt(i,s,a,d),s.child)}function Jy(i,s,a,u,d,m){return Us(s),s.updateQueue=null,a=Wg(s,u,a,d),jg(i),u=Xh(),i!==null&&!qt?(jh(i,s,m),ji(i,s,m)):(je&&u&&Nh(s),s.flags|=1,Kt(i,s,a,m),s.child)}function Zy(i,s,a,u,d){if(Us(s),s.stateNode===null){var m=No,A=a.contextType;typeof A=="object"&&A!==null&&(m=Zt(A)),m=new a(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cd,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Fh(s),A=a.contextType,m.context=typeof A=="object"&&A!==null?Zt(A):No,m.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(ud(s,a,A,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&cd.enqueueReplaceState(m,m.state,null),al(s,u,m,d),ol(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var C=s.memoizedProps,N=Bs(a,C);m.props=N;var G=m.context,Z=a.contextType;A=No,typeof Z=="object"&&Z!==null&&(A=Zt(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||G!==A)&&qy(s,m,u,A),Ar=!1;var Y=s.memoizedState;m.state=Y,al(s,u,m,d),ol(),G=s.memoizedState,C||Y!==G||Ar?(typeof te=="function"&&(ud(s,a,te,u),G=s.memoizedState),(N=Ar||Ly(s,a,N,u,Y,G,A))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=A,u=N):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,zh(i,s),A=s.memoizedProps,Z=Bs(a,A),m.props=Z,te=s.pendingProps,Y=m.context,G=a.contextType,N=No,typeof G=="object"&&G!==null&&(N=Zt(G)),C=a.getDerivedStateFromProps,(G=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==te||Y!==N)&&qy(s,m,u,N),Ar=!1,Y=s.memoizedState,m.state=Y,al(s,u,m,d),ol();var Q=s.memoizedState;A!==te||Y!==Q||Ar||i!==null&&i.dependencies!==null&&Qu(i.dependencies)?(typeof C=="function"&&(ud(s,a,C,u),Q=s.memoizedState),(Z=Ar||Ly(s,a,Z,u,Y,Q,N)||i!==null&&i.dependencies!==null&&Qu(i.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,N)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),m.props=u,m.state=Q,m.context=N,u=Z):(typeof m.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,dc(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=Fo(s,i.child,null,d),s.child=Fo(s,null,a,d)):Kt(i,s,a,d),s.memoizedState=m.state,i=s.child):i=ji(i,s,d),i}function e_(i,s,a,u){return Ja(),s.flags|=256,Kt(i,s,a,u),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(i){return{baseLanes:i,cachePool:Fg()}}function md(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=Bn),i}function t_(i,s,a){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,A;if((A=m)||(A=i!==null&&i.memoizedState===null?!1:(Pt.current&2)!==0),A&&(d=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(je){if(d?Rr(s):Ir(),je){var C=gt,N;if(N=C){e:{for(N=C,C=pi;N.nodeType!==8;){if(!C){C=null;break e}if(N=Wn(N.nextSibling),N===null){C=null;break e}}C=N}C!==null?(s.memoizedState={dehydrated:C,treeContext:xs!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},N=Sn(18,null,null,0),N.stateNode=C,N.return=s,s.child=N,fn=s,gt=null,N=!0):N=!1}N||Os(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Jd(C)?s.lanes=32:s.lanes=536870912,null;Xi(s)}return C=u.children,u=u.fallback,d?(Ir(),d=s.mode,C=pc({mode:"hidden",children:C},d),u=Ns(u,d,a,null),C.return=s,u.return=s,C.sibling=u,s.child=C,d=s.child,d.memoizedState=pd(a),d.childLanes=md(i,A,a),s.memoizedState=dd,u):(Rr(s),gd(s,C))}if(N=i.memoizedState,N!==null&&(C=N.dehydrated,C!==null)){if(m)s.flags&256?(Rr(s),s.flags&=-257,s=yd(i,s,a)):s.memoizedState!==null?(Ir(),s.child=i.child,s.flags|=128,s=null):(Ir(),d=u.fallback,C=s.mode,u=pc({mode:"visible",children:u.children},C),d=Ns(d,C,a,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,Fo(s,i.child,null,a),u=s.child,u.memoizedState=pd(a),u.childLanes=md(i,A,a),s.memoizedState=dd,s=d);else if(Rr(s),Jd(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var G=A.dgst;A=G,u=Error(r(419)),u.stack="",u.digest=A,Za({value:u,source:null,stack:null}),s=yd(i,s,a)}else if(qt||el(i,s,a,!1),A=(a&i.childLanes)!==0,qt||A){if(A=lt,A!==null&&(u=a&-a,u=(u&42)!==0?1:pr(u),u=(u&(A.suspendedLanes|a))!==0?0:u,u!==0&&u!==N.retryLane))throw N.retryLane=u,Mo(i,u),bn(A,i,u),Yy;C.data==="$?"||Od(),s=yd(i,s,a)}else C.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=N.treeContext,gt=Wn(C.nextSibling),fn=s,je=!0,Vs=null,pi=!1,i!==null&&(Un[Ln++]=Gi,Un[Ln++]=Ki,Un[Ln++]=xs,Gi=i.id,Ki=i.overflow,xs=s),s=gd(s,u.children),s.flags|=4096);return s}return d?(Ir(),d=u.fallback,C=s.mode,N=i.child,G=N.sibling,u=Hi(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,G!==null?d=Hi(G,d):(d=Ns(d,C,a,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,C=i.child.memoizedState,C===null?C=pd(a):(N=C.cachePool,N!==null?(G=xt._currentValue,N=N.parent!==G?{parent:G,pool:G}:N):N=Fg(),C={baseLanes:C.baseLanes|a,cachePool:N}),d.memoizedState=C,d.childLanes=md(i,A,a),s.memoizedState=dd,u):(Rr(s),a=i.child,i=a.sibling,a=Hi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function gd(i,s){return s=pc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function pc(i,s){return i=Sn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function yd(i,s,a){return Fo(s,i.child,null,a),i=gd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function n_(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Oh(i.return,s,a)}function _d(i,s,a,u,d){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=d)}function i_(i,s,a){var u=s.pendingProps,d=u.revealOrder,m=u.tail;if(Kt(i,s,u.children,a),u=Pt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&n_(i,a,s);else if(i.tag===19)n_(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(se(Pt,u),d){case"forwards":for(a=s.child,d=null;a!==null;)i=a.alternate,i!==null&&cc(i)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),_d(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(i=d.alternate,i!==null&&cc(i)===null){s.child=d;break}i=d.sibling,d.sibling=a,a=d,d=i}_d(s,!0,a,null,m);break;case"together":_d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ji(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),xr|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(el(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=Hi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Hi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function vd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Qu(i)))}function _w(i,s,a){switch(s.tag){case 3:ve(s,s.stateNode.containerInfo),Er(s,xt,i.memoizedState.cache),Ja();break;case 27:case 5:Qe(s);break;case 4:ve(s,s.stateNode.containerInfo);break;case 10:Er(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Rr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?t_(i,s,a):(Rr(s),i=ji(i,s,a),i!==null?i.sibling:null);Rr(s);break;case 19:var d=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(el(i,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return i_(i,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(Pt,Pt.current),u)break;return null;case 22:case 23:return s.lanes=0,jy(i,s,a);case 24:Er(s,xt,i.memoizedState.cache)}return ji(i,s,a)}function r_(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)qt=!0;else{if(!vd(i,a)&&(s.flags&128)===0)return qt=!1,_w(i,s,a);qt=(i.flags&131072)!==0}else qt=!1,je&&(s.flags&1048576)!==0&&Vg(s,$u,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")bh(u)?(i=Bs(u,i),s.tag=1,s=Zy(null,s,u,i,a)):(s.tag=0,s=hd(null,s,u,i,a));else{if(u!=null){if(d=u.$$typeof,d===le){s.tag=11,s=$y(null,s,u,i,a);break e}else if(d===P){s.tag=14,s=Qy(null,s,u,i,a);break e}}throw s=We(u)||u,Error(r(306,s,""))}}return s;case 0:return hd(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=Bs(u,s.pendingProps),Zy(i,s,u,d,a);case 3:e:{if(ve(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,zh(i,s),al(s,u,null,a);var A=s.memoizedState;if(u=A.cache,Er(s,xt,u),u!==m.cache&&kh(s,[xt],a,!0),ol(),u=A.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=e_(i,s,u,a);break e}else if(u!==d){d=On(Error(r(424)),s),Za(d),s=e_(i,s,u,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(gt=Wn(i.firstChild),fn=s,je=!0,Vs=null,pi=!0,a=ky(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ja(),u===d){s=ji(i,s,a);break e}Kt(i,s,u,a)}s=s.child}return s;case 26:return dc(i,s),i===null?(a=lv(s.type,null,s.pendingProps,null))?s.memoizedState=a:je||(a=s.type,i=s.pendingProps,u=bc(Ce.current).createElement(a),u[Dt]=s,u[St]=i,$t(u,a,i),vt(u),s.stateNode=u):s.memoizedState=lv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Qe(s),i===null&&je&&(u=s.stateNode=sv(s.type,s.pendingProps,Ce.current),fn=s,pi=!0,d=gt,kr(s.type)?(Zd=d,gt=Wn(u.firstChild)):gt=d),Kt(i,s,s.pendingProps.children,a),dc(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&je&&((d=u=gt)&&(u=Yw(u,s.type,s.pendingProps,pi),u!==null?(s.stateNode=u,fn=s,gt=Wn(u.firstChild),pi=!1,d=!0):d=!1),d||Os(s)),Qe(s),d=s.type,m=s.pendingProps,A=i!==null?i.memoizedProps:null,u=m.children,Xd(d,m)?u=null:A!==null&&Xd(d,A)&&(s.flags|=32),s.memoizedState!==null&&(d=Qh(i,s,cw,null,null,a),Dl._currentValue=d),dc(i,s),Kt(i,s,u,a),s.child;case 6:return i===null&&je&&((i=a=gt)&&(a=$w(a,s.pendingProps,pi),a!==null?(s.stateNode=a,fn=s,gt=null,i=!0):i=!1),i||Os(s)),null;case 13:return t_(i,s,a);case 4:return ve(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Fo(s,null,u,a):Kt(i,s,u,a),s.child;case 11:return $y(i,s,s.type,s.pendingProps,a);case 7:return Kt(i,s,s.pendingProps,a),s.child;case 8:return Kt(i,s,s.pendingProps.children,a),s.child;case 12:return Kt(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Er(s,s.type,u.value),Kt(i,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Us(s),d=Zt(d),u=u(d),s.flags|=1,Kt(i,s,u,a),s.child;case 14:return Qy(i,s,s.type,s.pendingProps,a);case 15:return Xy(i,s,s.type,s.pendingProps,a);case 19:return i_(i,s,a);case 31:return u=s.pendingProps,a=s.mode,u={mode:u.mode,children:u.children},i===null?(a=pc(u,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Hi(i.child,u),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return jy(i,s,a);case 24:return Us(s),u=Zt(xt),i===null?(d=qh(),d===null&&(d=lt,m=Uh(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:u,cache:d},Fh(s),Er(s,xt,d)):((i.lanes&a)!==0&&(zh(i,s),al(s,null,null,a),ol()),d=i.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Er(s,xt,u)):(u=m.cache,Er(s,xt,u),u!==d.cache&&kh(s,[xt],a,!0))),Kt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Wi(i){i.flags|=4}function s_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dv(s)){if(s=qn.current,s!==null&&((He&4194048)===He?mi!==null:(He&62914560)!==He&&(He&536870912)===0||s!==mi))throw rl=Bh,zg;i.flags|=8192}}function mc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Na():536870912,i.lanes|=s,Ko|=s)}function pl(i,s){if(!je)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ht(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var d=i.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function vw(i,s,a){var u=s.pendingProps;switch(xh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),$i(xt),Be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Wa(s)?Wi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ug())),ht(s),null;case 26:return a=s.memoizedState,i===null?(Wi(s),a!==null?(ht(s),s_(s,a)):(ht(s),s.flags&=-16777217)):a?a!==i.memoizedState?(Wi(s),ht(s),s_(s,a)):(ht(s),s.flags&=-16777217):(i.memoizedProps!==u&&Wi(s),ht(s),s.flags&=-16777217),null;case 27:Xe(s),a=Ce.current;var d=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Wi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ht(s),null}i=_e.current,Wa(s)?Og(s):(i=sv(d,u,a),s.stateNode=i,Wi(s))}return ht(s),null;case 5:if(Xe(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Wi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ht(s),null}if(i=_e.current,Wa(s))Og(s);else{switch(d=bc(Ce.current),i){case 1:i=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?d.createElement(a,{is:u.is}):d.createElement(a)}}i[Dt]=s,i[St]=u;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=i;e:switch($t(i,a,u),a){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Wi(s)}}return ht(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Wi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ce.current,Wa(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,d=fn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}i[Dt]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||J_(i.nodeValue,a)),i||Os(s)}else i=bc(i).createTextNode(u),i[Dt]=s,s.stateNode=i}return ht(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=Wa(s),u!==null&&u.dehydrated!==null){if(i===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Dt]=s}else Ja(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),d=!1}else d=Ug(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Xi(s),s):(Xi(s),null)}if(Xi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=u!==null,i=i!==null&&i.memoizedState!==null,a){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),mc(s,s.updateQueue),ht(s),null;case 4:return Be(),i===null&&Gd(s.stateNode.containerInfo),ht(s),null;case 10:return $i(s.type),ht(s),null;case 19:if(fe(Pt),d=s.memoizedState,d===null)return ht(s),null;if(u=(s.flags&128)!==0,m=d.rendering,m===null)if(u)pl(d,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=cc(i),m!==null){for(s.flags|=128,pl(d,!1),i=m.updateQueue,s.updateQueue=i,mc(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Pg(a,i),a=a.sibling;return se(Pt,Pt.current&1|2),s.child}i=i.sibling}d.tail!==null&&an()>_c&&(s.flags|=128,u=!0,pl(d,!1),s.lanes=4194304)}else{if(!u)if(i=cc(m),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,mc(s,i),pl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!je)return ht(s),null}else 2*an()-d.renderingStartTime>_c&&a!==536870912&&(s.flags|=128,u=!0,pl(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(i=d.last,i!==null?i.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=an(),s.sibling=null,i=Pt.current,se(Pt,u?i&1|2:i&1),s):(ht(s),null);case 22:case 23:return Xi(s),Yh(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),a=s.updateQueue,a!==null&&mc(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&fe(Ls),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),$i(xt),ht(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Tw(i,s){switch(xh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return $i(xt),Be(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Xe(s),null;case 13:if(Xi(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ja()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return fe(Pt),null;case 4:return Be(),null;case 10:return $i(s.type),null;case 22:case 23:return Xi(s),Yh(),i!==null&&fe(Ls),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return $i(xt),null;case 25:return null;default:return null}}function o_(i,s){switch(xh(s),s.tag){case 3:$i(xt),Be();break;case 26:case 27:case 5:Xe(s);break;case 4:Be();break;case 13:Xi(s);break;case 19:fe(Pt);break;case 10:$i(s.type);break;case 22:case 23:Xi(s),Yh(),i!==null&&fe(Ls);break;case 24:$i(xt)}}function ml(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&i)===i){u=void 0;var m=a.create,A=a.inst;u=m(),A.destroy=u}a=a.next}while(a!==d)}}catch(C){at(s,s.return,C)}}function br(i,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&i)===i){var A=u.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,d=s;var N=a,G=C;try{G()}catch(Z){at(d,N,Z)}}}u=u.next}while(u!==m)}}catch(Z){at(s,s.return,Z)}}function a_(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{Qg(s,a)}catch(u){at(i,i.return,u)}}}function l_(i,s,a){a.props=Bs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){at(i,s,u)}}function gl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(d){at(i,s,d)}}function gi(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){at(i,s,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){at(i,s,d)}else a.current=null}function u_(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){at(i,i.return,d)}}function Td(i,s,a){try{var u=i.stateNode;Fw(u,i.type,a,s),u[St]=s}catch(d){at(i,i.return,d)}}function c_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&kr(i.type)||i.tag===4}function Ed(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||c_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&kr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ad(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ic));else if(u!==4&&(u===27&&kr(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Ad(i,s,a),i=i.sibling;i!==null;)Ad(i,s,a),i=i.sibling}function gc(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&kr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(gc(i,s,a),i=i.sibling;i!==null;)gc(i,s,a),i=i.sibling}function f_(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);$t(s,u,a),s[Dt]=i,s[St]=a}catch(m){at(i,i.return,m)}}var Ji=!1,Et=!1,Sd=!1,h_=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function Ew(i,s){if(i=i.containerInfo,$d=Vc,i=Sg(i),Eh(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var A=0,C=-1,N=-1,G=0,Z=0,te=i,Y=null;t:for(;;){for(var Q;te!==a||d!==0&&te.nodeType!==3||(C=A+d),te!==m||u!==0&&te.nodeType!==3||(N=A+u),te.nodeType===3&&(A+=te.nodeValue.length),(Q=te.firstChild)!==null;)Y=te,te=Q;for(;;){if(te===i)break t;if(Y===a&&++G===d&&(C=A),Y===m&&++Z===u&&(N=A),(Q=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=Q}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:i,selectionRange:a},Vc=!1,Bt=s;Bt!==null;)if(s=Bt,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Bt=i;else for(;Bt!==null;){switch(s=Bt,m=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var we=Bs(a.type,d,a.elementType===a.type);i=u.getSnapshotBeforeUpdate(we,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ae){at(a,a.return,Ae)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)Wd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Bt=i;break}Bt=s.return}}function d_(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(i,a),u&4&&ml(5,a);break;case 1:if(Dr(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){at(a,a.return,A)}else{var d=Bs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(d,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){at(a,a.return,A)}}u&64&&a_(a),u&512&&gl(a,a.return);break;case 3:if(Dr(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Qg(i,s)}catch(A){at(a,a.return,A)}}break;case 27:s===null&&u&4&&f_(a);case 26:case 5:Dr(i,a),s===null&&u&4&&u_(a),u&512&&gl(a,a.return);break;case 12:Dr(i,a);break;case 13:Dr(i,a),u&4&&g_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Mw.bind(null,a),Qw(i,a))));break;case 22:if(u=a.memoizedState!==null||Ji,!u){s=s!==null&&s.memoizedState!==null||Et,d=Ji;var m=Et;Ji=u,(Et=s)&&!m?Mr(i,a,(a.subtreeFlags&8772)!==0):Dr(i,a),Ji=d,Et=m}break;case 30:break;default:Dr(i,a)}}function p_(i){var s=i.alternate;s!==null&&(i.alternate=null,p_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&yr(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,pn=!1;function Zi(i,s,a){for(a=a.child;a!==null;)m_(i,s,a),a=a.sibling}function m_(i,s,a){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Et||gi(a,s),Zi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Et||gi(a,s);var u=ft,d=pn;kr(a.type)&&(ft=a.stateNode,pn=!1),Zi(i,s,a),wl(a.stateNode),ft=u,pn=d;break;case 5:Et||gi(a,s);case 6:if(u=ft,d=pn,ft=null,Zi(i,s,a),ft=u,pn=d,ft!==null)if(pn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(m){at(a,s,m)}else try{ft.removeChild(a.stateNode)}catch(m){at(a,s,m)}break;case 18:ft!==null&&(pn?(i=ft,iv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Pl(i)):iv(ft,a.stateNode));break;case 4:u=ft,d=pn,ft=a.stateNode.containerInfo,pn=!0,Zi(i,s,a),ft=u,pn=d;break;case 0:case 11:case 14:case 15:Et||br(2,a,s),Et||br(4,a,s),Zi(i,s,a);break;case 1:Et||(gi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&l_(a,s,u)),Zi(i,s,a);break;case 21:Zi(i,s,a);break;case 22:Et=(u=Et)||a.memoizedState!==null,Zi(i,s,a),Et=u;break;default:Zi(i,s,a)}}function g_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pl(i)}catch(a){at(s,s.return,a)}}function Aw(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new h_),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new h_),s;default:throw Error(r(435,i.tag))}}function Cd(i,s){var a=Aw(i);s.forEach(function(u){var d=Nw.bind(null,i,u);a.has(u)||(a.add(u),u.then(d,d))})}function Cn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],m=i,A=s,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(kr(C.type)){ft=C.stateNode,pn=!1;break e}break;case 5:ft=C.stateNode,pn=!1;break e;case 3:case 4:ft=C.stateNode.containerInfo,pn=!0;break e}C=C.return}if(ft===null)throw Error(r(160));m_(m,A,d),ft=null,pn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)y_(s,i),s=s.sibling}var jn=null;function y_(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cn(s,i),wn(i),u&4&&(br(3,i,i.return),ml(3,i),br(5,i,i.return));break;case 1:Cn(s,i),wn(i),u&512&&(Et||a===null||gi(a,a.return)),u&64&&Ji&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=jn;if(Cn(s,i),wn(i),u&512&&(Et||a===null||gi(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ms]||m[Dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),$t(m,u,a),m[Dt]=i,vt(m),u=m;break e;case"link":var A=fv("link","href",d).get(u+(a.href||""));if(A){for(var C=0;C<A.length;C++)if(m=A[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(C,1);break t}}m=d.createElement(u),$t(m,u,a),d.head.appendChild(m);break;case"meta":if(A=fv("meta","content",d).get(u+(a.content||""))){for(C=0;C<A.length;C++)if(m=A[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(C,1);break t}}m=d.createElement(u),$t(m,u,a),d.head.appendChild(m);break;default:throw Error(r(468,u))}m[Dt]=i,vt(m),u=m}i.stateNode=u}else hv(d,i.type,i.stateNode);else i.stateNode=cv(d,u,i.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?hv(d,i.type,i.stateNode):cv(d,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Td(i,i.memoizedProps,a.memoizedProps)}break;case 27:Cn(s,i),wn(i),u&512&&(Et||a===null||gi(a,a.return)),a!==null&&u&4&&Td(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Cn(s,i),wn(i),u&512&&(Et||a===null||gi(a,a.return)),i.flags&32){d=i.stateNode;try{Nn(d,"")}catch(Q){at(i,i.return,Q)}}u&4&&i.stateNode!=null&&(d=i.memoizedProps,Td(i,d,a!==null?a.memoizedProps:d)),u&1024&&(Sd=!0);break;case 6:if(Cn(s,i),wn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Q){at(i,i.return,Q)}}break;case 3:if(Nc=null,d=jn,jn=Dc(s.containerInfo),Cn(s,i),jn=d,wn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Pl(s.containerInfo)}catch(Q){at(i,i.return,Q)}Sd&&(Sd=!1,__(i));break;case 4:u=jn,jn=Dc(i.stateNode.containerInfo),Cn(s,i),wn(i),jn=u;break;case 12:Cn(s,i),wn(i);break;case 13:Cn(s,i),wn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Md=an()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Cd(i,u)));break;case 22:d=i.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,G=Ji,Z=Et;if(Ji=G||d,Et=Z||N,Cn(s,i),Et=Z,Ji=G,wn(i),u&8192)e:for(s=i.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||N||Ji||Et||Fs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(m=N.stateNode,d)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=N.stateNode;var te=N.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Q){at(N,N.return,Q)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(Q){at(N,N.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Cd(i,a))));break;case 19:Cn(s,i),wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Cd(i,u)));break;case 30:break;case 21:break;default:Cn(s,i),wn(i)}}function wn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(c_(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=Ed(i);gc(i,m,d);break;case 5:var A=a.stateNode;a.flags&32&&(Nn(A,""),a.flags&=-33);var C=Ed(i);gc(i,C,A);break;case 3:case 4:var N=a.stateNode.containerInfo,G=Ed(i);Ad(i,G,N);break;default:throw Error(r(161))}}catch(Z){at(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function __(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;__(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Dr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)d_(i,s.alternate,s),s=s.sibling}function Fs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:br(4,s,s.return),Fs(s);break;case 1:gi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&l_(s,s.return,a),Fs(s);break;case 27:wl(s.stateNode);case 26:case 5:gi(s,s.return),Fs(s);break;case 22:s.memoizedState===null&&Fs(s);break;case 30:Fs(s);break;default:Fs(s)}i=i.sibling}}function Mr(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=i,m=s,A=m.flags;switch(m.tag){case 0:case 11:case 15:Mr(d,m,a),ml(4,m);break;case 1:if(Mr(d,m,a),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){at(u,u.return,G)}if(u=m,d=u.updateQueue,d!==null){var C=u.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)$g(N[d],C)}catch(G){at(u,u.return,G)}}a&&A&64&&a_(m),gl(m,m.return);break;case 27:f_(m);case 26:case 5:Mr(d,m,a),a&&u===null&&A&4&&u_(m),gl(m,m.return);break;case 12:Mr(d,m,a);break;case 13:Mr(d,m,a),a&&A&4&&g_(d,m);break;case 22:m.memoizedState===null&&Mr(d,m,a),gl(m,m.return);break;case 30:break;default:Mr(d,m,a)}s=s.sibling}}function wd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&tl(a))}function Rd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&tl(i))}function yi(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)v_(i,s,a,u),s=s.sibling}function v_(i,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:yi(i,s,a,u),d&2048&&ml(9,s);break;case 1:yi(i,s,a,u);break;case 3:yi(i,s,a,u),d&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&tl(i)));break;case 12:if(d&2048){yi(i,s,a,u),i=s.stateNode;try{var m=s.memoizedProps,A=m.id,C=m.onPostCommit;typeof C=="function"&&C(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){at(s,s.return,N)}}else yi(i,s,a,u);break;case 13:yi(i,s,a,u);break;case 23:break;case 22:m=s.stateNode,A=s.alternate,s.memoizedState!==null?m._visibility&2?yi(i,s,a,u):yl(i,s):m._visibility&2?yi(i,s,a,u):(m._visibility|=2,zo(i,s,a,u,(s.subtreeFlags&10256)!==0)),d&2048&&wd(A,s);break;case 24:yi(i,s,a,u),d&2048&&Rd(s.alternate,s);break;default:yi(i,s,a,u)}}function zo(i,s,a,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=i,A=s,C=a,N=u,G=A.flags;switch(A.tag){case 0:case 11:case 15:zo(m,A,C,N,d),ml(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?zo(m,A,C,N,d):yl(m,A):(Z._visibility|=2,zo(m,A,C,N,d)),d&&G&2048&&wd(A.alternate,A);break;case 24:zo(m,A,C,N,d),d&&G&2048&&Rd(A.alternate,A);break;default:zo(m,A,C,N,d)}s=s.sibling}}function yl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,d=u.flags;switch(u.tag){case 22:yl(a,u),d&2048&&wd(u.alternate,u);break;case 24:yl(a,u),d&2048&&Rd(u.alternate,u);break;default:yl(a,u)}s=s.sibling}}var _l=8192;function Ho(i){if(i.subtreeFlags&_l)for(i=i.child;i!==null;)T_(i),i=i.sibling}function T_(i){switch(i.tag){case 26:Ho(i),i.flags&_l&&i.memoizedState!==null&&aR(jn,i.memoizedState,i.memoizedProps);break;case 5:Ho(i);break;case 3:case 4:var s=jn;jn=Dc(i.stateNode.containerInfo),Ho(i),jn=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=_l,_l=16777216,Ho(i),_l=s):Ho(i));break;default:Ho(i)}}function E_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function vl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Bt=u,S_(u,i)}E_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)A_(i),i=i.sibling}function A_(i){switch(i.tag){case 0:case 11:case 15:vl(i),i.flags&2048&&br(9,i,i.return);break;case 3:vl(i);break;case 12:vl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,yc(i)):vl(i);break;default:vl(i)}}function yc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Bt=u,S_(u,i)}E_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:br(8,s,s.return),yc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,yc(s));break;default:yc(s)}i=i.sibling}}function S_(i,s){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:br(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:tl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Bt=u;else e:for(a=i;Bt!==null;){u=Bt;var d=u.sibling,m=u.return;if(p_(u),u===a){Bt=null;break e}if(d!==null){d.return=m,Bt=d;break e}Bt=m}}}var Sw={getCacheForType:function(i){var s=Zt(xt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},Cw=typeof WeakMap=="function"?WeakMap:Map,tt=0,lt=null,Oe=null,He=0,nt=0,Rn=null,Nr=!1,Go=!1,Id=!1,er=0,yt=0,xr=0,zs=0,bd=0,Bn=0,Ko=0,Tl=null,mn=null,Dd=!1,Md=0,_c=1/0,vc=null,Pr=null,Yt=0,Vr=null,Yo=null,$o=0,Nd=0,xd=null,C_=null,El=0,Pd=null;function In(){if((tt&2)!==0&&He!==0)return He&-He;if(j.T!==null){var i=Vo;return i!==0?i:Bd()}return mr()}function w_(){Bn===0&&(Bn=(He&536870912)===0||je?Ma():536870912);var i=qn.current;return i!==null&&(i.flags|=32),Bn}function bn(i,s,a){(i===lt&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(Qo(i,0),Or(i,He,Bn,!1)),xi(i,a),((tt&2)===0||i!==lt)&&(i===lt&&((tt&2)===0&&(zs|=a),yt===4&&Or(i,He,Bn,!1)),_i(i))}function R_(i,s,a){if((tt&6)!==0)throw Error(r(327));var u=!a&&(s&124)===0&&(s&i.expiredLanes)===0||ps(i,s),d=u?Iw(i,s):kd(i,s,!0),m=u;do{if(d===0){Go&&!u&&Or(i,s,0,!1);break}else{if(a=i.current.alternate,m&&!ww(a)){d=kd(i,s,!1),m=!1;continue}if(d===2){if(m=s,i.errorRecoveryDisabledLanes&m)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var C=i;d=Tl;var N=C.current.memoizedState.isDehydrated;if(N&&(Qo(C,A).flags|=256),A=kd(C,A,!1),A!==2){if(Id&&!N){C.errorRecoveryDisabledLanes|=m,zs|=m,d=4;break e}m=mn,mn=d,m!==null&&(mn===null?mn=m:mn.push.apply(mn,m))}d=A}if(m=!1,d!==2)continue}}if(d===1){Qo(i,0),Or(i,s,0,!0);break}e:{switch(u=i,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Or(u,s,Bn,!Nr);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Md+300-an(),10<d)){if(Or(u,s,Bn,!Nr),co(u,0,!0)!==0)break e;u.timeoutHandle=tv(I_.bind(null,u,a,mn,vc,Dd,s,Bn,zs,Ko,Nr,m,2,-0,0),d);break e}I_(u,a,mn,vc,Dd,s,Bn,zs,Ko,Nr,m,0,-0,0)}}break}while(!0);_i(i)}function I_(i,s,a,u,d,m,A,C,N,G,Z,te,Y,Q){if(i.timeoutHandle=-1,te=s.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(bl={stylesheets:null,count:0,unsuspend:oR},T_(s),te=lR(),te!==null)){i.cancelPendingCommit=te(V_.bind(null,i,s,m,a,u,d,A,C,N,Z,1,Y,Q)),Or(i,m,A,!G);return}V_(i,s,m,a,u,d,A,C,N)}function ww(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],m=d.getSnapshot;d=d.value;try{if(!An(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Or(i,s,a,u){s&=~bd,s&=~zs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var d=s;0<d;){var m=31-Jt(d),A=1<<m;u[m]=-1,d&=~A}a!==0&&ii(i,a,s)}function Tc(){return(tt&6)===0?(Al(0),!1):!0}function Vd(){if(Oe!==null){if(nt===0)var i=Oe.return;else i=Oe,Yi=ks=null,Wh(i),Bo=null,hl=0,i=Oe;for(;i!==null;)o_(i.alternate,i),i=i.return;Oe=null}}function Qo(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Hw(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Vd(),lt=i,Oe=a=Hi(i.current,null),He=s,nt=0,Rn=null,Nr=!1,Go=ps(i,s),Id=!1,Ko=Bn=bd=zs=xr=yt=0,mn=Tl=null,Dd=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var d=31-Jt(u),m=1<<d;s|=i[d],u&=~m}return er=s,zu(),a}function b_(i,s){xe=null,j.H=ac,s===il||s===Wu?(s=Kg(),nt=3):s===zg?(s=Kg(),nt=4):nt=s===Yy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,Oe===null&&(yt=1,hc(i,On(s,i.current)))}function D_(){var i=j.H;return j.H=ac,i===null?ac:i}function M_(){var i=j.A;return j.A=Sw,i}function Od(){yt=4,Nr||(He&4194048)!==He&&qn.current!==null||(Go=!0),(xr&134217727)===0&&(zs&134217727)===0||lt===null||Or(lt,He,Bn,!1)}function kd(i,s,a){var u=tt;tt|=2;var d=D_(),m=M_();(lt!==i||He!==s)&&(vc=null,Qo(i,s)),s=!1;var A=yt;e:do try{if(nt!==0&&Oe!==null){var C=Oe,N=Rn;switch(nt){case 8:Vd(),A=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(s=!0);var G=nt;if(nt=0,Rn=null,Xo(i,C,N,G),a&&Go){A=0;break e}break;default:G=nt,nt=0,Rn=null,Xo(i,C,N,G)}}Rw(),A=yt;break}catch(Z){b_(i,Z)}while(!0);return s&&i.shellSuspendCounter++,Yi=ks=null,tt=u,j.H=d,j.A=m,Oe===null&&(lt=null,He=0,zu()),A}function Rw(){for(;Oe!==null;)N_(Oe)}function Iw(i,s){var a=tt;tt|=2;var u=D_(),d=M_();lt!==i||He!==s?(vc=null,_c=an()+500,Qo(i,s)):Go=ps(i,s);e:do try{if(nt!==0&&Oe!==null){s=Oe;var m=Rn;t:switch(nt){case 1:nt=0,Rn=null,Xo(i,s,m,1);break;case 2:case 9:if(Hg(m)){nt=0,Rn=null,x_(s);break}s=function(){nt!==2&&nt!==9||lt!==i||(nt=7),_i(i)},m.then(s,s);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Hg(m)?(nt=0,Rn=null,x_(s)):(nt=0,Rn=null,Xo(i,s,m,7));break;case 5:var A=null;switch(Oe.tag){case 26:A=Oe.memoizedState;case 5:case 27:var C=Oe;if(!A||dv(A)){nt=0,Rn=null;var N=C.sibling;if(N!==null)Oe=N;else{var G=C.return;G!==null?(Oe=G,Ec(G)):Oe=null}break t}}nt=0,Rn=null,Xo(i,s,m,5);break;case 6:nt=0,Rn=null,Xo(i,s,m,6);break;case 8:Vd(),yt=6;break e;default:throw Error(r(462))}}bw();break}catch(Z){b_(i,Z)}while(!0);return Yi=ks=null,j.H=u,j.A=d,tt=a,Oe!==null?0:(lt=null,He=0,zu(),yt)}function bw(){for(;Oe!==null&&!dr();)N_(Oe)}function N_(i){var s=r_(i.alternate,i,er);i.memoizedProps=i.pendingProps,s===null?Ec(i):Oe=s}function x_(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=Jy(a,s,s.pendingProps,s.type,void 0,He);break;case 11:s=Jy(a,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Wh(s);default:o_(a,s),s=Oe=Pg(s,er),s=r_(a,s,er)}i.memoizedProps=i.pendingProps,s===null?Ec(i):Oe=s}function Xo(i,s,a,u){Yi=ks=null,Wh(s),Bo=null,hl=0;var d=s.return;try{if(yw(i,d,s,a,He)){yt=1,hc(i,On(a,i.current)),Oe=null;return}}catch(m){if(d!==null)throw Oe=d,m;yt=1,hc(i,On(a,i.current)),Oe=null;return}s.flags&32768?(je||u===1?i=!0:Go||(He&536870912)!==0?i=!1:(Nr=i=!0,(u===2||u===9||u===3||u===6)&&(u=qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),P_(s,i)):Ec(s)}function Ec(i){var s=i;do{if((s.flags&32768)!==0){P_(s,Nr);return}i=s.return;var a=vw(s.alternate,s,er);if(a!==null){Oe=a;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=i}while(s!==null);yt===0&&(yt=5)}function P_(i,s){do{var a=Tw(i.alternate,i);if(a!==null){a.flags&=32767,Oe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Oe=i;return}Oe=i=a}while(i!==null);yt=6,Oe=null}function V_(i,s,a,u,d,m,A,C,N){i.cancelPendingCommit=null;do Ac();while(Yt!==0);if((tt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Rh,xa(i,a,m,A,C,N),i===lt&&(Oe=lt=null,He=0),Yo=s,Vr=i,$o=a,Nd=m,xd=d,C_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xw(cs,function(){return q_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,d=ue.p,ue.p=2,A=tt,tt|=4;try{Ew(i,s,a)}finally{tt=A,ue.p=d,j.T=u}}Yt=1,O_(),k_(),U_()}}function O_(){if(Yt===1){Yt=0;var i=Vr,s=Yo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var u=ue.p;ue.p=2;var d=tt;tt|=4;try{y_(s,i);var m=Qd,A=Sg(i.containerInfo),C=m.focusedElem,N=m.selectionRange;if(A!==C&&C&&C.ownerDocument&&Ag(C.ownerDocument.documentElement,C)){if(N!==null&&Eh(C)){var G=N.start,Z=N.end;if(Z===void 0&&(Z=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(Z,C.value.length);else{var te=C.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),we=C.textContent.length,Ae=Math.min(N.start,we),ot=N.end===void 0?Ae:Math.min(N.end,we);!Q.extend&&Ae>ot&&(A=ot,ot=Ae,Ae=A);var B=Eg(C,Ae),k=Eg(C,ot);if(B&&k&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var H=te.createRange();H.setStart(B.node,B.offset),Q.removeAllRanges(),Ae>ot?(Q.addRange(H),Q.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),Q.addRange(H))}}}}for(te=[],Q=C;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<te.length;C++){var ee=te[C];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Vc=!!$d,Qd=$d=null}finally{tt=d,ue.p=u,j.T=a}}i.current=s,Yt=2}}function k_(){if(Yt===2){Yt=0;var i=Vr,s=Yo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var u=ue.p;ue.p=2;var d=tt;tt|=4;try{d_(i,s.alternate,s)}finally{tt=d,ue.p=u,j.T=a}}Yt=3}}function U_(){if(Yt===4||Yt===3){Yt=0,us();var i=Vr,s=Yo,a=$o,u=C_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,Yo=Vr=null,L_(i,i.pendingLanes));var d=i.pendingLanes;if(d===0&&(Pr=null),fo(a),s=s.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(mt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=j.T,d=ue.p,ue.p=2,j.T=null;try{for(var m=i.onRecoverableError,A=0;A<u.length;A++){var C=u[A];m(C.value,{componentStack:C.stack})}}finally{j.T=s,ue.p=d}}($o&3)!==0&&Ac(),_i(i),d=i.pendingLanes,(a&4194090)!==0&&(d&42)!==0?i===Pd?El++:(El=0,Pd=i):El=0,Al(0)}}function L_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,tl(s)))}function Ac(i){return O_(),k_(),U_(),q_()}function q_(){if(Yt!==5)return!1;var i=Vr,s=Nd;Nd=0;var a=fo($o),u=j.T,d=ue.p;try{ue.p=32>a?32:a,j.T=null,a=xd,xd=null;var m=Vr,A=$o;if(Yt=0,Yo=Vr=null,$o=0,(tt&6)!==0)throw Error(r(331));var C=tt;if(tt|=4,A_(m.current),v_(m,m.current,A,a),tt=C,Al(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(mt,m)}catch{}return!0}finally{ue.p=d,j.T=u,L_(i,s)}}function B_(i,s,a){s=On(a,s),s=fd(i.stateNode,s,2),i=Cr(i,s,2),i!==null&&(xi(i,2),_i(i))}function at(i,s,a){if(i.tag===3)B_(i,i,a);else for(;s!==null;){if(s.tag===3){B_(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pr===null||!Pr.has(u))){i=On(a,i),a=Gy(2),u=Cr(s,a,2),u!==null&&(Ky(a,u,s,i),xi(u,2),_i(u));break}}s=s.return}}function Ud(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new Cw;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||(Id=!0,d.add(a),i=Dw.bind(null,i,s,a),s.then(i,i))}function Dw(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,lt===i&&(He&a)===a&&(yt===4||yt===3&&(He&62914560)===He&&300>an()-Md?(tt&2)===0&&Qo(i,0):bd|=a,Ko===He&&(Ko=0)),_i(i)}function F_(i,s){s===0&&(s=Na()),i=Mo(i,s),i!==null&&(xi(i,s),_i(i))}function Mw(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),F_(i,a)}function Nw(i,s){var a=0;switch(i.tag){case 13:var u=i.stateNode,d=i.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),F_(i,a)}function xw(i,s){return hn(i,s)}var Sc=null,jo=null,Ld=!1,Cc=!1,qd=!1,Hs=0;function _i(i){i!==jo&&i.next===null&&(jo===null?Sc=jo=i:jo=jo.next=i),Cc=!0,Ld||(Ld=!0,Vw())}function Al(i,s){if(!qd&&Cc){qd=!0;do for(var a=!1,u=Sc;u!==null;){if(i!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var A=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Jt(42|i)+1)-1,m&=d&~(A&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,K_(u,m))}else m=He,m=co(u,u===lt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ps(u,m)||(a=!0,K_(u,m));u=u.next}while(a);qd=!1}}function Pw(){z_()}function z_(){Cc=Ld=!1;var i=0;Hs!==0&&(zw()&&(i=Hs),Hs=0);for(var s=an(),a=null,u=Sc;u!==null;){var d=u.next,m=H_(u,s);m===0?(u.next=null,a===null?Sc=d:a.next=d,d===null&&(jo=a)):(a=u,(i!==0||(m&3)!==0)&&(Cc=!0)),u=d}Al(i)}function H_(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,d=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var A=31-Jt(m),C=1<<A,N=d[A];N===-1?((C&a)===0||(C&u)!==0)&&(d[A]=Da(C,s)):N<=s&&(i.expiredLanes|=C),m&=~C}if(s=lt,a=He,a=co(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Wt(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||ps(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&Wt(u),fo(a)){case 2:case 8:a=lo;break;case 32:a=cs;break;case 268435456:a=uo;break;default:a=cs}return u=G_.bind(null,i),a=hn(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&Wt(u),i.callbackPriority=2,i.callbackNode=null,2}function G_(i,s){if(Yt!==0&&Yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Ac()&&i.callbackNode!==a)return null;var u=He;return u=co(i,i===lt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(R_(i,u,s),H_(i,an()),i.callbackNode!=null&&i.callbackNode===a?G_.bind(null,i):null)}function K_(i,s){if(Ac())return null;R_(i,s,!0)}function Vw(){Gw(function(){(tt&6)!==0?hn(Mi,Pw):z_()})}function Bd(){return Hs===0&&(Hs=Ma()),Hs}function Y_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_o(""+i)}function $_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function Ow(i,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var m=Y_((d[St]||null).action),A=u.submitter;A&&(s=(s=A[St]||null)?Y_(s.formAction):A.getAttribute("formAction"),s!==null&&(m=s,A=null));var C=new vo("action","action",null,u,d);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Hs!==0){var N=A?$_(d,A):new FormData(d);od(a,{pending:!0,data:N,method:d.method,action:m},null,N)}}else typeof m=="function"&&(C.preventDefault(),N=A?$_(d,A):new FormData(d),od(a,{pending:!0,data:N,method:d.method,action:m},m,N))},currentTarget:d}]})}}for(var Fd=0;Fd<wh.length;Fd++){var zd=wh[Fd],kw=zd.toLowerCase(),Uw=zd[0].toUpperCase()+zd.slice(1);Xn(kw,"on"+Uw)}Xn(Rg,"onAnimationEnd"),Xn(Ig,"onAnimationIteration"),Xn(bg,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(ew,"onTransitionRun"),Xn(tw,"onTransitionStart"),Xn(nw,"onTransitionCancel"),Xn(Dg,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Q_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],d=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var A=u.length-1;0<=A;A--){var C=u[A],N=C.instance,G=C.currentTarget;if(C=C.listener,N!==m&&d.isPropagationStopped())break e;m=C,d.currentTarget=G;try{m(d)}catch(Z){fc(Z)}d.currentTarget=null,m=N}else for(A=0;A<u.length;A++){if(C=u[A],N=C.instance,G=C.currentTarget,C=C.listener,N!==m&&d.isPropagationStopped())break e;m=C,d.currentTarget=G;try{m(d)}catch(Z){fc(Z)}d.currentTarget=null,m=N}}}}function ke(i,s){var a=s[Va];a===void 0&&(a=s[Va]=new Set);var u=i+"__bubble";a.has(u)||(X_(s,i,2,!1),a.add(u))}function Hd(i,s,a){var u=0;s&&(u|=4),X_(a,i,u,s)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Gd(i){if(!i[wc]){i[wc]=!0,Oa.forEach(function(a){a!=="selectionchange"&&(Lw.has(a)||Hd(a,!1,i),Hd(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[wc]||(s[wc]=!0,Hd("selectionchange",!1,s))}}function X_(i,s,a,u){switch(vv(s)){case 2:var d=fR;break;case 8:d=hR;break;default:d=rp}a=d.bind(null,s,a,i),d=void 0,!Pn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?i.addEventListener(s,a,{capture:!0,passive:d}):i.addEventListener(s,a,!0):d!==void 0?i.addEventListener(s,a,{passive:d}):i.addEventListener(s,a,!1)}function Kd(i,s,a,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var C=u.stateNode.containerInfo;if(C===d)break;if(A===4)for(A=u.return;A!==null;){var N=A.tag;if((N===3||N===4)&&A.stateNode.containerInfo===d)return;A=A.return}for(;C!==null;){if(A=Pi(C),A===null)return;if(N=A.tag,N===5||N===6||N===26||N===27){u=m=A;continue e}C=C.parentNode}}u=u.return}Iu(function(){var G=m,Z=xn(a),te=[];e:{var Y=Mg.get(i);if(Y!==void 0){var Q=vo,we=i;switch(i){case"keypress":if(ui(a)===0)break e;case"keydown":case"keyup":Q=wo;break;case"focusin":we="focus",Q=Ao;break;case"focusout":we="blur",Q=Ao;break;case"beforeblur":case"afterblur":Q=Ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Ou;break;case Rg:case Ig:case bg:Q=So;break;case Dg:Q=Uu;break;case"scroll":case"scrollend":Q=bu;break;case"wheel":Q=Ro;break;case"copy":case"cut":case"paste":Q=Co;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=$a;break;case"toggle":case"beforetoggle":Q=qu}var Ae=(s&4)!==0,ot=!Ae&&(i==="scroll"||i==="scrollend"),B=Ae?Y!==null?Y+"Capture":null:Y;Ae=[];for(var k=G,H;k!==null;){var ee=k;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=As(k,B),ee!=null&&Ae.push(Cl(k,ee,H))),ot)break;k=k.return}0<Ae.length&&(Y=new Q(Y,we,null,a,Z),te.push({event:Y,listeners:Ae}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",Y&&a!==Ui&&(we=a.relatedTarget||a.fromElement)&&(Pi(we)||we[Mn]))break e;if((Q||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(we=a.relatedTarget||a.toElement,Q=G,we=we?Pi(we):null,we!==null&&(ot=l(we),Ae=we.tag,we!==ot||Ae!==5&&Ae!==27&&Ae!==6)&&(we=null)):(Q=null,we=G),Q!==we)){if(Ae=Vn,ee="onMouseLeave",B="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ae=$a,ee="onPointerLeave",B="onPointerEnter",k="pointer"),ot=Q==null?Y:si(Q),H=we==null?Y:si(we),Y=new Ae(ee,k+"leave",Q,a,Z),Y.target=ot,Y.relatedTarget=H,ee=null,Pi(Z)===G&&(Ae=new Ae(B,k+"enter",we,a,Z),Ae.target=H,Ae.relatedTarget=ot,ee=Ae),ot=ee,Q&&we)t:{for(Ae=Q,B=we,k=0,H=Ae;H;H=Wo(H))k++;for(H=0,ee=B;ee;ee=Wo(ee))H++;for(;0<k-H;)Ae=Wo(Ae),k--;for(;0<H-k;)B=Wo(B),H--;for(;k--;){if(Ae===B||B!==null&&Ae===B.alternate)break t;Ae=Wo(Ae),B=Wo(B)}Ae=null}else Ae=null;Q!==null&&j_(te,Y,Q,Ae,!1),we!==null&&ot!==null&&j_(te,ot,we,Ae,!0)}}e:{if(Y=G?si(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var me=mg;else if(Nt(Y))if(gg)me=WC;else{me=XC;var Ve=QC}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Ba(G.elementType)&&(me=mg):me=jC;if(me&&(me=me(i,G))){zi(te,me,a,Z);break e}Ve&&Ve(i,Y,G),i==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&vr(Y,"number",Y.value)}switch(Ve=G?si(G):window,i){case"focusin":(Nt(Ve)||Ve.contentEditable==="true")&&(Io=Ve,Ah=G,ja=null);break;case"focusout":ja=Ah=Io=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,Cg(te,a,Z);break;case"selectionchange":if(ZC)break;case"keydown":case"keyup":Cg(te,a,Z)}var Te;if(hi)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?X(i,a)&&(Se="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(E&&a.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(Te=za()):(li=Z,Tr="value"in li?li.value:li.textContent,Fe=!0)),Ve=Rc(G,Se),0<Ve.length&&(Se=new Ka(Se,i,null,a,Z),te.push({event:Se,listeners:Ve}),Te?Se.data=Te:(Te=oe(a),Te!==null&&(Se.data=Te)))),(Te=v?Mt(i,a):ze(i,a))&&(Se=Rc(G,"onBeforeInput"),0<Se.length&&(Ve=new Ka("onBeforeInput","beforeinput",null,a,Z),te.push({event:Ve,listeners:Se}),Ve.data=Te)),Ow(te,i,G,a,Z)}Q_(te,s)})}function Cl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Rc(i,s){for(var a=s+"Capture",u=[];i!==null;){var d=i,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=As(i,a),d!=null&&u.unshift(Cl(i,d,m)),d=As(i,s),d!=null&&u.push(Cl(i,d,m))),i.tag===3)return u;i=i.return}return[]}function Wo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function j_(i,s,a,u,d){for(var m=s._reactName,A=[];a!==null&&a!==u;){var C=a,N=C.alternate,G=C.stateNode;if(C=C.tag,N!==null&&N===u)break;C!==5&&C!==26&&C!==27||G===null||(N=G,d?(G=As(a,m),G!=null&&A.unshift(Cl(a,G,N))):d||(G=As(a,m),G!=null&&A.push(Cl(a,G,N)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var qw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function W_(i){return(typeof i=="string"?i:""+i).replace(qw,`
`).replace(Bw,"")}function J_(i,s){return s=W_(s),W_(i)===s}function Ic(){}function st(i,s,a,u,d,m){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Nn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Nn(i,""+u);break;case"className":oi(i,"class",u);break;case"tabIndex":oi(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(i,a,u);break;case"style":qa(i,u,m);break;case"data":if(s!=="object"){oi(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_o(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&st(i,s,"name",d.name,d,null),st(i,s,"formEncType",d.formEncType,d,null),st(i,s,"formMethod",d.formMethod,d,null),st(i,s,"formTarget",d.formTarget,d,null)):(st(i,s,"encType",d.encType,d,null),st(i,s,"method",d.method,d,null),st(i,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_o(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Ic);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=_o(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":ke("beforetoggle",i),ke("toggle",i),_r(i,"popover",u);break;case"xlinkActuate":Ht(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ht(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ht(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ht(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ht(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ht(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ht(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":_r(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mh.get(a)||a,_r(i,a,u))}}function Yd(i,s,a,u,d,m){switch(a){case"style":qa(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Nn(i,u):(typeof u=="number"||typeof u=="bigint")&&Nn(i,""+u);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ho.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=i[St]||null,m=m!=null?m[a]:null,typeof m=="function"&&i.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,d);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):_r(i,a,u)}}}function $t(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var u=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var A=a[m];if(A!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,m,A,a,null)}}d&&st(i,s,"srcSet",a.srcSet,a,null),u&&st(i,s,"src",a.src,a,null);return;case"input":ke("invalid",i);var C=m=A=d=null,N=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var Z=a[u];if(Z!=null)switch(u){case"name":d=Z;break;case"type":A=Z;break;case"checked":N=Z;break;case"defaultChecked":G=Z;break;case"value":m=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:st(i,s,u,Z,a,null)}}vs(i,m,C,N,G,A,d,!1),yo(i);return;case"select":ke("invalid",i),u=A=m=null;for(d in a)if(a.hasOwnProperty(d)&&(C=a[d],C!=null))switch(d){case"value":m=C;break;case"defaultValue":A=C;break;case"multiple":u=C;default:st(i,s,d,C,a,null)}s=m,a=A,i.multiple=!!u,s!=null?ki(i,!!u,s,!1):a!=null&&ki(i,!!u,a,!0);return;case"textarea":ke("invalid",i),m=d=u=null;for(A in a)if(a.hasOwnProperty(A)&&(C=a[A],C!=null))switch(A){case"value":u=C;break;case"defaultValue":d=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:st(i,s,A,C,a,null)}Ts(i,u,d,m),yo(i);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(i,s,N,u,a,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(u=0;u<Sl.length;u++)ke(Sl[u],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(i,s,G,u,a,null)}return;default:if(Ba(s)){for(Z in a)a.hasOwnProperty(Z)&&(u=a[Z],u!==void 0&&Yd(i,s,Z,u,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(u=a[C],u!=null&&st(i,s,C,u,a,null))}function Fw(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,A=null,C=null,N=null,G=null,Z=null;for(Q in a){var te=a[Q];if(a.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":N=te;default:u.hasOwnProperty(Q)||st(i,s,Q,null,u,te)}}for(var Y in u){var Q=u[Y];if(te=a[Y],u.hasOwnProperty(Y)&&(Q!=null||te!=null))switch(Y){case"type":m=Q;break;case"name":d=Q;break;case"checked":G=Q;break;case"defaultChecked":Z=Q;break;case"value":A=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:Q!==te&&st(i,s,Y,Q,u,te)}}En(i,A,C,N,G,Z,m,d);return;case"select":Q=A=C=Y=null;for(m in a)if(N=a[m],a.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":Q=N;default:u.hasOwnProperty(m)||st(i,s,m,null,u,N)}for(d in u)if(m=u[d],N=a[d],u.hasOwnProperty(d)&&(m!=null||N!=null))switch(d){case"value":Y=m;break;case"defaultValue":C=m;break;case"multiple":A=m;default:m!==N&&st(i,s,d,m,u,N)}s=C,a=A,u=Q,Y!=null?ki(i,!!a,Y,!1):!!u!=!!a&&(s!=null?ki(i,!!a,s,!0):ki(i,!!a,a?[]:"",!1));return;case"textarea":Q=Y=null;for(C in a)if(d=a[C],a.hasOwnProperty(C)&&d!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:st(i,s,C,null,u,d)}for(A in u)if(d=u[A],m=a[A],u.hasOwnProperty(A)&&(d!=null||m!=null))switch(A){case"value":Y=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&st(i,s,A,d,u,m)}it(i,Y,Q);return;case"option":for(var we in a)if(Y=a[we],a.hasOwnProperty(we)&&Y!=null&&!u.hasOwnProperty(we))switch(we){case"selected":i.selected=!1;break;default:st(i,s,we,null,u,Y)}for(N in u)if(Y=u[N],Q=a[N],u.hasOwnProperty(N)&&Y!==Q&&(Y!=null||Q!=null))switch(N){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:st(i,s,N,Y,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)Y=a[Ae],a.hasOwnProperty(Ae)&&Y!=null&&!u.hasOwnProperty(Ae)&&st(i,s,Ae,null,u,Y);for(G in u)if(Y=u[G],Q=a[G],u.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:st(i,s,G,Y,u,Q)}return;default:if(Ba(s)){for(var ot in a)Y=a[ot],a.hasOwnProperty(ot)&&Y!==void 0&&!u.hasOwnProperty(ot)&&Yd(i,s,ot,void 0,u,Y);for(Z in u)Y=u[Z],Q=a[Z],!u.hasOwnProperty(Z)||Y===Q||Y===void 0&&Q===void 0||Yd(i,s,Z,Y,u,Q);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&st(i,s,B,null,u,Y);for(te in u)Y=u[te],Q=a[te],!u.hasOwnProperty(te)||Y===Q||Y==null&&Q==null||st(i,s,te,Y,u,Q)}var $d=null,Qd=null;function bc(i){return i.nodeType===9?i:i.ownerDocument}function Z_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ev(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Xd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jd=null;function zw(){var i=window.event;return i&&i.type==="popstate"?i===jd?!1:(jd=i,!0):(jd=null,!1)}var tv=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(i){return nv.resolve(null).then(i).catch(Kw)}:tv;function Kw(i){setTimeout(function(){throw i})}function kr(i){return i==="head"}function iv(i,s){var a=s,u=0,d=0;do{var m=a.nextSibling;if(i.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<u&&8>u){a=u;var A=i.ownerDocument;if(a&1&&wl(A.documentElement),a&2&&wl(A.body),a&4)for(a=A.head,wl(a),A=a.firstChild;A;){var C=A.nextSibling,N=A.nodeName;A[ms]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=C}}if(d===0){i.removeChild(m),Pl(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:u=a.charCodeAt(0)-48;else u=0;a=m}while(a);Pl(s)}function Wd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wd(a),yr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Yw(i,s,a,u){for(;i.nodeType===1;){var d=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ms])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==d.rel||i.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Wn(i.nextSibling),i===null)break}return null}function $w(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Wn(i.nextSibling),i===null))return null;return i}function Jd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function Qw(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Wn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Zd=null;function rv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function sv(i,s,a){switch(s=bc(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function wl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);yr(i)}var Fn=new Map,ov=new Set;function Dc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var tr=ue.d;ue.d={f:Xw,r:jw,D:Ww,C:Jw,L:Zw,m:eR,X:nR,S:tR,M:iR};function Xw(){var i=tr.f(),s=Tc();return i||s}function jw(i){var s=ri(i);s!==null&&s.tag===5&&s.type==="form"?Ry(s):tr.r(i)}var Jo=typeof document>"u"?null:document;function av(i,s,a){var u=Jo;if(u&&typeof s=="string"&&s){var d=Ct(s);d='link[rel="'+i+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),ov.has(d)||(ov.add(d),i={rel:i,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),$t(s,"link",i),vt(s),u.head.appendChild(s)))}}function Ww(i){tr.D(i),av("dns-prefetch",i,null)}function Jw(i,s){tr.C(i,s),av("preconnect",i,s)}function Zw(i,s,a){tr.L(i,s,a);var u=Jo;if(u&&i&&s){var d='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ct(a.imageSizes)+'"]')):d+='[href="'+Ct(i)+'"]';var m=d;switch(s){case"style":m=Zo(i);break;case"script":m=ea(i)}Fn.has(m)||(i=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Fn.set(m,i),u.querySelector(d)!==null||s==="style"&&u.querySelector(Rl(m))||s==="script"&&u.querySelector(Il(m))||(s=u.createElement("link"),$t(s,"link",i),vt(s),u.head.appendChild(s)))}}function eR(i,s){tr.m(i,s);var a=Jo;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Ct(u)+'"][href="'+Ct(i)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ea(i)}if(!Fn.has(m)&&(i=T({rel:"modulepreload",href:i},s),Fn.set(m,i),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(m)))return}u=a.createElement("link"),$t(u,"link",i),vt(u),a.head.appendChild(u)}}}function tR(i,s,a){tr.S(i,s,a);var u=Jo;if(u&&i){var d=ln(u).hoistableStyles,m=Zo(i);s=s||"default";var A=d.get(m);if(!A){var C={loading:0,preload:null};if(A=u.querySelector(Rl(m)))C.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Fn.get(m))&&ep(i,a);var N=A=u.createElement("link");vt(N),$t(N,"link",i),N._p=new Promise(function(G,Z){N.onload=G,N.onerror=Z}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Mc(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:C},d.set(m,A)}}}function nR(i,s){tr.X(i,s);var a=Jo;if(a&&i){var u=ln(a).hoistableScripts,d=ea(i),m=u.get(d);m||(m=a.querySelector(Il(d)),m||(i=T({src:i,async:!0},s),(s=Fn.get(d))&&tp(i,s),m=a.createElement("script"),vt(m),$t(m,"link",i),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function iR(i,s){tr.M(i,s);var a=Jo;if(a&&i){var u=ln(a).hoistableScripts,d=ea(i),m=u.get(d);m||(m=a.querySelector(Il(d)),m||(i=T({src:i,async:!0,type:"module"},s),(s=Fn.get(d))&&tp(i,s),m=a.createElement("script"),vt(m),$t(m,"link",i),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function lv(i,s,a,u){var d=(d=Ce.current)?Dc(d):null;if(!d)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Zo(a.href),a=ln(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Zo(a.href);var m=ln(d).hoistableStyles,A=m.get(i);if(A||(d=d.ownerDocument||d,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,A),(m=d.querySelector(Rl(i)))&&!m._p&&(A.instance=m,A.state.loading=5),Fn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(i,a),m||rR(d,i,a,A.state))),s&&u===null)throw Error(r(528,""));return A}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ea(a),a=ln(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Zo(i){return'href="'+Ct(i)+'"'}function Rl(i){return'link[rel="stylesheet"]['+i+"]"}function uv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function rR(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),$t(s,"link",a),vt(s),i.head.appendChild(s))}function ea(i){return'[src="'+Ct(i)+'"]'}function Il(i){return"script[async]"+i}function cv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(u)return s.instance=u,vt(u),u;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),vt(u),$t(u,"style",d),Mc(u,a.precedence,i),s.instance=u;case"stylesheet":d=Zo(a.href);var m=i.querySelector(Rl(d));if(m)return s.state.loading|=4,s.instance=m,vt(m),m;u=uv(a),(d=Fn.get(d))&&ep(u,d),m=(i.ownerDocument||i).createElement("link"),vt(m);var A=m;return A._p=new Promise(function(C,N){A.onload=C,A.onerror=N}),$t(m,"link",u),s.state.loading|=4,Mc(m,a.precedence,i),s.instance=m;case"script":return m=ea(a.src),(d=i.querySelector(Il(m)))?(s.instance=d,vt(d),d):(u=a,(d=Fn.get(m))&&(u=T({},a),tp(u,d)),i=i.ownerDocument||i,d=i.createElement("script"),vt(d),$t(d,"link",u),i.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Mc(u,a.precedence,i));return s.instance}function Mc(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,A=0;A<u.length;A++){var C=u[A];if(C.dataset.precedence===s)m=C;else if(m!==d)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function ep(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function tp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Nc=null;function fv(i,s,a){if(Nc===null){var u=new Map,d=Nc=new Map;d.set(a,u)}else d=Nc,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),d=0;d<a.length;d++){var m=a[d];if(!(m[ms]||m[Dt]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(s)||"";A=i+A;var C=u.get(A);C?C.push(m):u.set(A,[m])}}return u}function hv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function sR(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var bl=null;function oR(){}function aR(i,s,a){if(bl===null)throw Error(r(475));var u=bl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Zo(a.href),m=i.querySelector(Rl(d));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=xc.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=m,vt(m);return}m=i.ownerDocument||i,a=uv(a),(d=Fn.get(d))&&ep(a,d),m=m.createElement("link"),vt(m);var A=m;A._p=new Promise(function(C,N){A.onload=C,A.onerror=N}),$t(m,"link",a),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=xc.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function lR(){if(bl===null)throw Error(r(475));var i=bl;return i.stylesheets&&i.count===0&&np(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&np(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)np(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Pc=null;function np(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Pc=new Map,s.forEach(uR,i),Pc=null,xc.call(i))}function uR(i,s){if(!(s.state.loading&4)){var a=Pc.get(i);if(a)var u=a.get(null);else{a=new Map,Pc.set(i,a);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var A=d[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}d=s.instance,A=d.getAttribute("data-precedence"),m=a.get(A)||u,m===u&&a.set(null,d),a.set(A,d),this.count++,u=xc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),s.state.loading|=4}}var Dl={$$typeof:W,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function cR(i,s,a,u,d,m,A,C){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function pv(i,s,a,u,d,m,A,C,N,G,Z,te){return i=new cR(i,s,a,A,C,N,G,te),s=1,m===!0&&(s|=24),m=Sn(3,null,null,s),i.current=m,m.stateNode=i,s=Uh(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:s},Fh(m),i}function mv(i){return i?(i=No,i):No}function gv(i,s,a,u,d,m){d=mv(d),u.context===null?u.context=d:u.pendingContext=d,u=Sr(s),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=Cr(i,u,s),a!==null&&(bn(a,i,s),sl(a,i,s))}function yv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function ip(i,s){yv(i,s),(i=i.alternate)&&yv(i,s)}function _v(i){if(i.tag===13){var s=Mo(i,67108864);s!==null&&bn(s,i,67108864),ip(i,67108864)}}var Vc=!0;function fR(i,s,a,u){var d=j.T;j.T=null;var m=ue.p;try{ue.p=2,rp(i,s,a,u)}finally{ue.p=m,j.T=d}}function hR(i,s,a,u){var d=j.T;j.T=null;var m=ue.p;try{ue.p=8,rp(i,s,a,u)}finally{ue.p=m,j.T=d}}function rp(i,s,a,u){if(Vc){var d=sp(u);if(d===null)Kd(i,s,u,Oc,a),Tv(i,u);else if(pR(d,i,s,a,u))u.stopPropagation();else if(Tv(i,u),s&4&&-1<dR.indexOf(i)){for(;d!==null;){var m=ri(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=Yn(m.pendingLanes);if(A!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var N=1<<31-Jt(A);C.entanglements[1]|=N,A&=~N}_i(m),(tt&6)===0&&(_c=an()+500,Al(0))}}break;case 13:C=Mo(m,2),C!==null&&bn(C,m,2),Tc(),ip(m,2)}if(m=sp(u),m===null&&Kd(i,s,u,Oc,a),m===d)break;d=m}d!==null&&u.stopPropagation()}else Kd(i,s,u,null,a)}}function sp(i){return i=xn(i),op(i)}var Oc=null;function op(i){if(Oc=null,i=Pi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Oc=i,null}function vv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ao()){case Mi:return 2;case lo:return 8;case cs:case ch:return 32;case uo:return 268435456;default:return 32}default:return 32}}var ap=!1,Ur=null,Lr=null,qr=null,Ml=new Map,Nl=new Map,Br=[],dR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(i,s){switch(i){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Ml.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(s.pointerId)}}function xl(i,s,a,u,d,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ri(s),s!==null&&_v(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),i)}function pR(i,s,a,u,d){switch(s){case"focusin":return Ur=xl(Ur,i,s,a,u,d),!0;case"dragenter":return Lr=xl(Lr,i,s,a,u,d),!0;case"mouseover":return qr=xl(qr,i,s,a,u,d),!0;case"pointerover":var m=d.pointerId;return Ml.set(m,xl(Ml.get(m)||null,i,s,a,u,d)),!0;case"gotpointercapture":return m=d.pointerId,Nl.set(m,xl(Nl.get(m)||null,i,s,a,u,d)),!0}return!1}function Ev(i){var s=Pi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Tu(i.priority,function(){if(a.tag===13){var u=In();u=pr(u);var d=Mo(a,u);d!==null&&bn(d,a,u),ip(a,u)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=sp(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ui=u,a.target.dispatchEvent(u),Ui=null}else return s=ri(a),s!==null&&_v(s),i.blockedOn=a,!1;s.shift()}return!0}function Av(i,s,a){kc(i)&&a.delete(s)}function mR(){ap=!1,Ur!==null&&kc(Ur)&&(Ur=null),Lr!==null&&kc(Lr)&&(Lr=null),qr!==null&&kc(qr)&&(qr=null),Ml.forEach(Av),Nl.forEach(Av)}function Uc(i,s){i.blockedOn===s&&(i.blockedOn=null,ap||(ap=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mR)))}var Lc=null;function Sv(i){Lc!==i&&(Lc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Lc===i&&(Lc=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],d=i[s+2];if(typeof u!="function"){if(op(u||a)===null)continue;break}var m=ri(a);m!==null&&(i.splice(s,3),s-=3,od(m,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function Pl(i){function s(N){return Uc(N,i)}Ur!==null&&Uc(Ur,i),Lr!==null&&Uc(Lr,i),qr!==null&&Uc(qr,i),Ml.forEach(s),Nl.forEach(s);for(var a=0;a<Br.length;a++){var u=Br[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)Ev(a),a.blockedOn===null&&Br.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],m=a[u+1],A=d[St]||null;if(typeof m=="function")A||Sv(a);else if(A){var C=null;if(m&&m.hasAttribute("formAction")){if(d=m,A=m[St]||null)C=A.formAction;else if(op(d)!==null)continue}else C=A.action;typeof C=="function"?a[u+1]=C:(a.splice(u,3),u-=3),Sv(a)}}}function lp(i){this._internalRoot=i}qc.prototype.render=lp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,u=In();gv(a,u,i,s,null,null)},qc.prototype.unmount=lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;gv(i.current,2,null,i,null,null),Tc(),s[Mn]=null}};function qc(i){this._internalRoot=i}qc.prototype.unstable_scheduleHydration=function(i){if(i){var s=mr();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Br.length&&s!==0&&s<Br[a].priority;a++);Br.splice(a,0,i),a===0&&Ev(i)}};var Cv=e.version;if(Cv!=="19.1.0")throw Error(r(527,Cv,"19.1.0"));ue.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var gR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{mt=Bc.inject(gR),et=Bc}catch{}}return Ol.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,u="",d=By,m=Fy,A=zy,C=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=pv(i,1,!1,null,null,a,u,d,m,A,C,null),i[Mn]=s.current,Gd(i),new lp(s)},Ol.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var u=!1,d="",m=By,A=Fy,C=zy,N=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),s=pv(i,1,!0,s,a??null,u,d,m,A,C,N,G),s.context=mv(null),a=s.current,u=In(),u=pr(u),d=Sr(u),d.callback=null,Cr(a,d,u),a=u,s.current.lanes=a,xi(s,a),_i(s),i[Mn]=s.current,Gd(i),new qc(s)},Ol.version="19.1.0",Ol}var Vv;function IR(){if(Vv)return fp.exports;Vv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fp.exports=RR(),fp.exports}var bR=IR(),kl={},Ov;function DR(){if(Ov)return kl;Ov=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.parse=c,kl.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function c(R,b){const M=new l,z=R.length;if(z<2)return M;const q=(b==null?void 0:b.decode)||T;let $=0;do{const J=R.indexOf("=",$);if(J===-1)break;const W=R.indexOf(";",$),le=W===-1?z:W;if(J>le){$=R.lastIndexOf(";",J-1)+1;continue}const ce=h(R,$,J),ge=p(R,J,ce),P=R.slice(ce,ge);if(M[P]===void 0){let I=h(R,J+1,le),D=p(R,le,I);const V=q(R.slice(I,D));M[P]=V}$=le+1}while($<z);return M}function h(R,b,M){do{const z=R.charCodeAt(b);if(z!==32&&z!==9)return b}while(++b<M);return M}function p(R,b,M){for(;b>M;){const z=R.charCodeAt(--b);if(z!==32&&z!==9)return b+1}return M}function g(R,b,M){const z=(M==null?void 0:M.encode)||encodeURIComponent;if(!n.test(R))throw new TypeError(`argument name is invalid: ${R}`);const q=z(b);if(!e.test(q))throw new TypeError(`argument val is invalid: ${b}`);let $=R+"="+q;if(!M)return $;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);$+="; Max-Age="+M.maxAge}if(M.domain){if(!t.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);$+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);$+="; Path="+M.path}if(M.expires){if(!S(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);$+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&($+="; HttpOnly"),M.secure&&($+="; Secure"),M.partitioned&&($+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return $}function T(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function S(R){return o.call(R)==="[object Date]"}return kl}DR();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kv="popstate";function MR(n={}){function e(r,o){let{pathname:l,search:c,hash:h}=r.location;return xp("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:Ql(o)}return xR(e,t,null,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ri(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substring(2,10)}function Uv(n,e){return{usr:n.state,key:n.key,idx:e}}function xp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?va(e):e,state:t,key:e&&e.key||r||NR()}}function Ql({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function va(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function xR(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,c=o.history,h="POP",p=null,g=T();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function T(){return(c.state||{idx:null}).idx}function S(){h="POP";let q=T(),$=q==null?null:q-g;g=q,p&&p({action:h,location:z.location,delta:$})}function R(q,$){h="PUSH";let J=xp(z.location,q,$);g=T()+1;let W=Uv(J,g),le=z.createHref(J);try{c.pushState(W,"",le)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(le)}l&&p&&p({action:h,location:z.location,delta:1})}function b(q,$){h="REPLACE";let J=xp(z.location,q,$);g=T();let W=Uv(J,g),le=z.createHref(J);c.replaceState(W,"",le),l&&p&&p({action:h,location:z.location,delta:0})}function M(q){let $=o.location.origin!=="null"?o.location.origin:o.location.href,J=typeof q=="string"?q:Ql(q);return J=J.replace(/ $/,"%20"),dt($,`No window.location.(origin|href) available to create URL for href: ${J}`),new URL(J,$)}let z={get action(){return h},get location(){return n(o,c)},listen(q){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(kv,S),p=q,()=>{o.removeEventListener(kv,S),p=null}},createHref(q){return e(o,q)},createURL:M,encodeLocation(q){let $=M(q);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:R,replace:b,go(q){return c.go(q)}};return z}function E0(n,e,t="/"){return PR(n,e,t,!1)}function PR(n,e,t,r){let o=typeof e=="string"?va(e):e,l=or(o.pathname||"/",t);if(l==null)return null;let c=A0(n);VR(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let g=KR(l);h=HR(c[p],g,r)}return h}function A0(n,e=[],t=[],r=""){let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(dt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let g=sr([r,p.relativePath]),T=t.concat(p);l.children&&l.children.length>0&&(dt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),A0(l.children,e,T,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:FR(g,l.index),routesMeta:T})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of S0(l.path))o(l,c,p)}),e}function S0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let c=S0(r.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function VR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var OR=/^:[\w-]+$/,kR=3,UR=2,LR=1,qR=10,BR=-2,Lv=n=>n==="*";function FR(n,e){let t=n.split("/"),r=t.length;return t.some(Lv)&&(r+=BR),e&&(r+=UR),t.filter(o=>!Lv(o)).reduce((o,l)=>o+(OR.test(l)?kR:l===""?LR:qR),r)}function zR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function HR(n,e,t=!1){let{routesMeta:r}=n,o={},l="/",c=[];for(let h=0;h<r.length;++h){let p=r[h],g=h===r.length-1,T=l==="/"?e:e.slice(l.length)||"/",S=yf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},T),R=p.route;if(!S&&g&&t&&!r[r.length-1].route.index&&(S=yf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!S)return null;Object.assign(o,S.params),c.push({params:o,pathname:sr([l,S.pathname]),pathnameBase:XR(sr([l,S.pathnameBase])),route:R}),S.pathnameBase!=="/"&&(l=sr([l,S.pathnameBase]))}return c}function yf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=GR(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:r.reduce((g,{paramName:T,isOptional:S},R)=>{if(T==="*"){let M=h[R]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const b=h[R];return S&&!b?g[T]=void 0:g[T]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function GR(n,e=!1,t=!0){Ri(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(r.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function KR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ri(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function or(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function YR(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?va(n):n;return{pathname:t?t.startsWith("/")?t:$R(t,e):e,search:jR(r),hash:WR(o)}}function $R(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function mp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function C0(n){let e=QR(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function w0(n,e,t,r=!1){let o;typeof n=="string"?o=va(n):(o={...n},dt(!o.pathname||!o.pathname.includes("?"),mp("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),mp("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),mp("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let S=e.length-1;if(!r&&c.startsWith("..")){let R=c.split("/");for(;R[0]==="..";)R.shift(),S-=1;o.pathname=R.join("/")}h=S>=0?e[S]:"/"}let p=YR(o,h),g=c&&c!=="/"&&c.endsWith("/"),T=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||T)&&(p.pathname+="/"),p}var sr=n=>n.join("/").replace(/\/\/+/g,"/"),XR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,WR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var R0=["POST","PUT","PATCH","DELETE"];new Set(R0);var ZR=["GET",...R0];new Set(ZR);var Ta=K.createContext(null);Ta.displayName="DataRouter";var Ff=K.createContext(null);Ff.displayName="DataRouterState";var I0=K.createContext({isTransitioning:!1});I0.displayName="ViewTransition";var eI=K.createContext(new Map);eI.displayName="Fetchers";var tI=K.createContext(null);tI.displayName="Await";var Di=K.createContext(null);Di.displayName="Navigation";var ou=K.createContext(null);ou.displayName="Location";var hr=K.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var um=K.createContext(null);um.displayName="RouteError";function nI(n,{relative:e}={}){dt(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(Di),{hash:o,pathname:l,search:c}=lu(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:sr([t,l])),r.createHref({pathname:h,search:c,hash:o})}function au(){return K.useContext(ou)!=null}function os(){return dt(au(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(ou).location}var b0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D0(n){K.useContext(Di).static||K.useLayoutEffect(n)}function cm(){let{isDataRoute:n}=K.useContext(hr);return n?mI():iI()}function iI(){dt(au(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Ta),{basename:e,navigator:t}=K.useContext(Di),{matches:r}=K.useContext(hr),{pathname:o}=os(),l=JSON.stringify(C0(r)),c=K.useRef(!1);return D0(()=>{c.current=!0}),K.useCallback((p,g={})=>{if(Ri(c.current,b0),!c.current)return;if(typeof p=="number"){t.go(p);return}let T=w0(p,JSON.parse(l),o,g.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:sr([e,T.pathname])),(g.replace?t.replace:t.push)(T,g.state,g)},[e,t,l,o,n])}K.createContext(null);function lu(n,{relative:e}={}){let{matches:t}=K.useContext(hr),{pathname:r}=os(),o=JSON.stringify(C0(t));return K.useMemo(()=>w0(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function rI(n,e){return M0(n,e)}function M0(n,e,t,r){var J;dt(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=K.useContext(Di),{matches:c}=K.useContext(hr),h=c[c.length-1],p=h?h.params:{},g=h?h.pathname:"/",T=h?h.pathnameBase:"/",S=h&&h.route;{let W=S&&S.path||"";N0(g,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let R=os(),b;if(e){let W=typeof e=="string"?va(e):e;dt(T==="/"||((J=W.pathname)==null?void 0:J.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${W.pathname}" was given in the \`location\` prop.`),b=W}else b=R;let M=b.pathname||"/",z=M;if(T!=="/"){let W=T.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(W.length).join("/")}let q=!l&&t&&t.matches&&t.matches.length>0?t.matches:E0(n,{pathname:z});Ri(S||q!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ri(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=uI(q&&q.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:sr([T,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?T:sr([T,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),c,t,r);return e&&$?K.createElement(ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},$):$}function sI(){let n=pI(),e=JR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,c)}var oI=K.createElement(sI,null),aI=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(hr.Provider,{value:this.props.routeContext},K.createElement(um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lI({routeContext:n,match:e,children:t}){let r=K.useContext(Ta);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(hr.Provider,{value:n},t)}function uI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);dt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:T,errors:S}=t,R=g.route.loader&&!T.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||R){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,g,T)=>{let S,R=!1,b=null,M=null;t&&(S=l&&g.route.id?l[g.route.id]:void 0,b=g.route.errorElement||oI,c&&(h<0&&T===0?(N0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,M=null):h===T&&(R=!0,M=g.route.hydrateFallbackElement||null)));let z=e.concat(o.slice(0,T+1)),q=()=>{let $;return S?$=b:R?$=M:g.route.Component?$=K.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=p,K.createElement(lI,{match:g,routeContext:{outlet:p,matches:z,isDataRoute:t!=null},children:$})};return t&&(g.route.ErrorBoundary||g.route.errorElement||T===0)?K.createElement(aI,{location:t.location,revalidation:t.revalidation,component:b,error:S,children:q(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):q()},null)}function fm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cI(n){let e=K.useContext(Ta);return dt(e,fm(n)),e}function fI(n){let e=K.useContext(Ff);return dt(e,fm(n)),e}function hI(n){let e=K.useContext(hr);return dt(e,fm(n)),e}function hm(n){let e=hI(n),t=e.matches[e.matches.length-1];return dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dI(){return hm("useRouteId")}function pI(){var r;let n=K.useContext(um),e=fI("useRouteError"),t=hm("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function mI(){let{router:n}=cI("useNavigate"),e=hm("useNavigate"),t=K.useRef(!1);return D0(()=>{t.current=!0}),K.useCallback(async(o,l={})=>{Ri(t.current,b0),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var qv={};function N0(n,e,t){!e&&!qv[n]&&(qv[n]=!0,Ri(!1,t))}K.memo(gI);function gI({routes:n,future:e,state:t}){return M0(n,void 0,t,e)}function Jc(n){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:l=!1}){dt(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=K.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=va(t));let{pathname:p="/",search:g="",hash:T="",state:S=null,key:R="default"}=t,b=K.useMemo(()=>{let M=or(p,c);return M==null?null:{location:{pathname:M,search:g,hash:T,state:S,key:R},navigationType:r}},[c,p,g,T,S,R,r]);return Ri(b!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${T}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:K.createElement(Di.Provider,{value:h},K.createElement(ou.Provider,{children:e,value:b}))}function _I({children:n,location:e}){return rI(Pp(n),e)}function Pp(n,e=[]){let t=[];return K.Children.forEach(n,(r,o)=>{if(!K.isValidElement(r))return;let l=[...e,o];if(r.type===K.Fragment){t.push.apply(t,Pp(r.props.children,l));return}dt(r.type===Jc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Pp(r.props.children,l)),t.push(c)}),t}var Zc="get",ef="application/x-www-form-urlencoded";function zf(n){return n!=null&&typeof n.tagName=="string"}function vI(n){return zf(n)&&n.tagName.toLowerCase()==="button"}function TI(n){return zf(n)&&n.tagName.toLowerCase()==="form"}function EI(n){return zf(n)&&n.tagName.toLowerCase()==="input"}function AI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SI(n,e){return n.button===0&&(!e||e==="_self")&&!AI(n)}var Fc=null;function CI(){if(Fc===null)try{new FormData(document.createElement("form"),0),Fc=!1}catch{Fc=!0}return Fc}var wI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gp(n){return n!=null&&!wI.has(n)?(Ri(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ef}"`),null):n}function RI(n,e){let t,r,o,l,c;if(TI(n)){let h=n.getAttribute("action");r=h?or(h,e):null,t=n.getAttribute("method")||Zc,o=gp(n.getAttribute("enctype"))||ef,l=new FormData(n)}else if(vI(n)||EI(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(r=p?or(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Zc,o=gp(n.getAttribute("formenctype"))||gp(h.getAttribute("enctype"))||ef,l=new FormData(h,n),!CI()){let{name:g,type:T,value:S}=n;if(T==="image"){let R=g?`${g}.`:"";l.append(`${R}x`,"0"),l.append(`${R}y`,"0")}else g&&l.append(g,S)}}else{if(zf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zc,r=null,o=ef,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:l,body:c}}function dm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function II(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DI(n,e,t){let r=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await II(l,t);return c.links?c.links():[]}return[]}));return PI(r.flat(1).filter(bI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Bv(n,e,t,r,o,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,h=(p,g)=>{var T;return t[g].pathname!==p.pathname||((T=t[g].route.path)==null?void 0:T.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||h(p,g)):l==="data"?e.filter((p,g)=>{var S;let T=r.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(c(p,g)||h(p,g))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=t[0])==null?void 0:S.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function MI(n,e,{includeHydrateFallback:t}={}){return NI(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function NI(n){return[...new Set(n)]}function xI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function PI(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let l=JSON.stringify(xI(o));return t.has(l)||(t.add(l),r.push({key:l,link:o})),r},[])}function VI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&or(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function x0(){let n=K.useContext(Ta);return dm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OI(){let n=K.useContext(Ff);return dm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var pm=K.createContext(void 0);pm.displayName="FrameworkContext";function P0(){let n=K.useContext(pm);return dm(n,"You must render this element inside a <HydratedRouter> element"),n}function kI(n,e){let t=K.useContext(pm),[r,o]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:g,onMouseLeave:T,onTouchStart:S}=e,R=K.useRef(null);K.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=$=>{$.forEach(J=>{c(J.isIntersecting)})},q=new IntersectionObserver(z,{threshold:.5});return R.current&&q.observe(R.current),()=>{q.disconnect()}}},[n]),K.useEffect(()=>{if(r){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[r]);let b=()=>{o(!0)},M=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,R,{}]:[l,R,{onFocus:Ul(h,b),onBlur:Ul(p,M),onMouseEnter:Ul(g,b),onMouseLeave:Ul(T,M),onTouchStart:Ul(S,b)}]:[!1,R,{}]}function Ul(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UI({page:n,...e}){let{router:t}=x0(),r=K.useMemo(()=>E0(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(qI,{page:n,matches:r,...e}):null}function LI(n){let{manifest:e,routeModules:t}=P0(),[r,o]=K.useState([]);return K.useEffect(()=>{let l=!1;return DI(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),r}function qI({page:n,matches:e,...t}){let r=os(),{manifest:o,routeModules:l}=P0(),{basename:c}=x0(),{loaderData:h,matches:p}=OI(),g=K.useMemo(()=>Bv(n,e,p,o,r,"data"),[n,e,p,o,r]),T=K.useMemo(()=>Bv(n,e,p,o,r,"assets"),[n,e,p,o,r]),S=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,z=!1;if(e.forEach($=>{var W;let J=o.routes[$.route.id];!J||!J.hasLoader||(!g.some(le=>le.route.id===$.route.id)&&$.route.id in h&&((W=l[$.route.id])!=null&&W.shouldRevalidate)||J.hasClientLoader?z=!0:M.add($.route.id))}),M.size===0)return[];let q=VI(n,c);return z&&M.size>0&&q.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[q.pathname+q.search]},[c,h,r,o,g,e,n,l]),R=K.useMemo(()=>MI(T,o),[T,o]),b=LI(T);return K.createElement(K.Fragment,null,S.map(M=>K.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),R.map(M=>K.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),b.map(({key:M,link:z})=>K.createElement("link",{key:M,...z})))}function BI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var V0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{V0&&(window.__reactRouterVersion="7.5.0")}catch{}function FI({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=MR({window:t,v5Compat:!0}));let o=r.current,[l,c]=K.useState({action:o.action,location:o.location}),h=K.useCallback(p=>{K.startTransition(()=>c(p))},[c]);return K.useLayoutEffect(()=>o.listen(h),[o,h]),K.createElement(yI,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var O0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k0=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:g,preventScrollReset:T,viewTransition:S,...R},b){let{basename:M}=K.useContext(Di),z=typeof g=="string"&&O0.test(g),q,$=!1;if(typeof g=="string"&&z&&(q=g,V0))try{let D=new URL(window.location.href),V=g.startsWith("//")?new URL(D.protocol+g):new URL(g),U=or(V.pathname,M);V.origin===D.origin&&U!=null?g=U+V.search+V.hash:$=!0}catch{Ri(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=nI(g,{relative:o}),[W,le,ce]=kI(r,R),ge=KI(g,{replace:c,state:h,target:p,preventScrollReset:T,relative:o,viewTransition:S});function P(D){e&&e(D),D.defaultPrevented||ge(D)}let I=K.createElement("a",{...R,...ce,href:q||J,onClick:$||l?e:P,ref:BI(b,le),target:p,"data-discover":!z&&t==="render"?"true":void 0});return W&&!z?K.createElement(K.Fragment,null,I,K.createElement(UI,{page:J})):I});k0.displayName="Link";var zI=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...g},T){let S=lu(c,{relative:g.relative}),R=os(),b=K.useContext(Ff),{navigator:M,basename:z}=K.useContext(Di),q=b!=null&&jI(S)&&h===!0,$=M.encodeLocation?M.encodeLocation(S).pathname:S.pathname,J=R.pathname,W=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(J=J.toLowerCase(),W=W?W.toLowerCase():null,$=$.toLowerCase()),W&&z&&(W=or(W,z)||W);const le=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ce=J===$||!o&&J.startsWith($)&&J.charAt(le)==="/",ge=W!=null&&(W===$||!o&&W.startsWith($)&&W.charAt($.length)==="/"),P={isActive:ce,isPending:ge,isTransitioning:q},I=ce?e:void 0,D;typeof r=="function"?D=r(P):D=[r,ce?"active":null,ge?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(P):l;return K.createElement(k0,{...g,"aria-current":I,className:D,ref:T,style:V,to:c,viewTransition:h},typeof p=="function"?p(P):p)});zI.displayName="NavLink";var HI=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:l,method:c=Zc,action:h,onSubmit:p,relative:g,preventScrollReset:T,viewTransition:S,...R},b)=>{let M=QI(),z=XI(h,{relative:g}),q=c.toLowerCase()==="get"?"get":"post",$=typeof h=="string"&&O0.test(h),J=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let le=W.nativeEvent.submitter,ce=(le==null?void 0:le.getAttribute("formmethod"))||c;M(le||W.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:o,state:l,relative:g,preventScrollReset:T,viewTransition:S})};return K.createElement("form",{ref:b,method:q,action:z,onSubmit:r?p:J,...R,"data-discover":!$&&n==="render"?"true":void 0})});HI.displayName="Form";function GI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U0(n){let e=K.useContext(Ta);return dt(e,GI(n)),e}function KI(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:l,viewTransition:c}={}){let h=cm(),p=os(),g=lu(n,{relative:l});return K.useCallback(T=>{if(SI(T,e)){T.preventDefault();let S=t!==void 0?t:Ql(p)===Ql(g);h(n,{replace:S,state:r,preventScrollReset:o,relative:l,viewTransition:c})}},[p,h,g,t,r,e,n,o,l,c])}var YI=0,$I=()=>`__${String(++YI)}__`;function QI(){let{router:n}=U0("useSubmit"),{basename:e}=K.useContext(Di),t=dI();return K.useCallback(async(r,o={})=>{let{action:l,method:c,encType:h,formData:p,body:g}=RI(r,e);if(o.navigate===!1){let T=o.fetcherKey||$I();await n.fetch(T,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||h,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function XI(n,{relative:e}={}){let{basename:t}=K.useContext(Di),r=K.useContext(hr);dt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...lu(n||".",{relative:e})},c=os();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(T=>T==="")){h.delete("index"),p.filter(S=>S).forEach(S=>h.append("index",S));let T=h.toString();l.search=T?`?${T}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:sr([t,l.pathname])),Ql(l)}function jI(n,e={}){let t=K.useContext(I0);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U0("useViewTransitionState"),o=lu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=or(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=or(t.nextLocation.pathname,r)||t.nextLocation.pathname;return yf(o.pathname,c)!=null||yf(o.pathname,l)!=null}new TextEncoder;function WI(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[o,l]=K.useState(!1),c=K.useRef(t);c.current=t;const h=K.useRef(r);return h.current=r,K.useEffect(()=>{const p=document.createElement("script");return p.src="https://accounts.google.com/gsi/client",p.async=!0,p.defer=!0,p.nonce=e,p.onload=()=>{var g;l(!0),(g=c.current)===null||g===void 0||g.call(c)},p.onerror=()=>{var g;l(!1),(g=h.current)===null||g===void 0||g.call(h)},document.body.appendChild(p),()=>{document.body.removeChild(p)}},[e]),o}const L0=K.createContext(null);function JI({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:o}){const l=WI({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),c=K.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:l}),[n,l]);return T0.createElement(L0.Provider,{value:c},o)}function ZI(){const n=K.useContext(L0);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function eb(n){var e;return(e=n==null?void 0:n.clientId)!==null&&e!==void 0?e:n==null?void 0:n.client_id}const tb={large:40,medium:32,small:20};function nb({onSuccess:n,onError:e,useOneTap:t,promptMomentNotification:r,type:o="standard",theme:l="outline",size:c="large",text:h,shape:p,logo_alignment:g,width:T,locale:S,click_listener:R,containerProps:b,...M}){const z=K.useRef(null),{clientId:q,scriptLoadedSuccessfully:$}=ZI(),J=K.useRef(n);J.current=n;const W=K.useRef(e);W.current=e;const le=K.useRef(r);return le.current=r,K.useEffect(()=>{var ce,ge,P,I,D,V,U,L,x;if($)return(P=(ge=(ce=window==null?void 0:window.google)===null||ce===void 0?void 0:ce.accounts)===null||ge===void 0?void 0:ge.id)===null||P===void 0||P.initialize({client_id:q,callback:We=>{var Ye;if(!(We!=null&&We.credential))return(Ye=W.current)===null||Ye===void 0?void 0:Ye.call(W);const{credential:j,select_by:ue}=We;J.current({credential:j,clientId:eb(We),select_by:ue})},...M}),(V=(D=(I=window==null?void 0:window.google)===null||I===void 0?void 0:I.accounts)===null||D===void 0?void 0:D.id)===null||V===void 0||V.renderButton(z.current,{type:o,theme:l,size:c,text:h,shape:p,logo_alignment:g,width:T,locale:S,click_listener:R}),t&&((x=(L=(U=window==null?void 0:window.google)===null||U===void 0?void 0:U.accounts)===null||L===void 0?void 0:L.id)===null||x===void 0||x.prompt(le.current)),()=>{var We,Ye,j;t&&((j=(Ye=(We=window==null?void 0:window.google)===null||We===void 0?void 0:We.accounts)===null||Ye===void 0?void 0:Ye.id)===null||j===void 0||j.cancel())}},[q,$,t,o,l,c,h,p,g,T,S]),T0.createElement("div",{...b,ref:z,style:{height:tb[c],...b==null?void 0:b.style}})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hf{}function Ke(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function y(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let g=0;g<p.length;g++){const T=p[g];y(T,e.slice(l+1),t[g])}else for(const g of p)y(g,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];y(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],o=n[r];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function _(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(c=>_(c,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sn(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function q0(n,e){const t=sn(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Fv(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Xl(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Fv(n,t)):[Fv(n,e)]}function B0(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ib(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function mm(n){return!(n==null||ib(n))}function F0(n){return n==null||Array.isArray(n)&&n.length===0?!1:n.every(mm)}function Hn(n,e){if(e==null)throw new Error("ContentUnion is required");return B0(e)?e:mm(e)?{role:"user",parts:Xl(n,e)}:{role:"model",parts:Xl(n,e)}}function z0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Hn(n,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Hn(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Hn(n,t)):[Hn(n,e)]}function tf(n,e,t){t.length!==0&&(F0(t)?e.push({role:"user",parts:Xl(n,t)}):e.push({role:"model",parts:Xl(n,t)}),t.length=0)}function rb(n,e,t,r){mm(r)===F0(t)||(tf(n,e,t),t.length=0),t.push(r)}function _t(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e))return[Hn(n,e)];const t=[],r=[];for(const o of e)if(B0(o))tf(n,t,r),t.push(o);else if(typeof o=="string"||typeof o=="object"&&!Array.isArray(o))rb(n,t,r,o);else if(Array.isArray(o))tf(n,t,r),t.push({role:"user",parts:Xl(n,o)});else throw new Error(`Unsupported content type: ${typeof o}`);return tf(n,t,r),t}function nf(n,e){if(!n.isVertexAI()&&"default"in e)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in e&&e.anyOf!==void 0)for(const t of e.anyOf)nf(n,t);if("items"in e&&e.items!==void 0&&nf(n,e.items),"properties"in e&&e.properties!==void 0)for(const t of Object.values(e.properties))nf(n,t)}function H0(n,e){return nf(n,e),e}function G0(n,e){if(typeof e=="object"&&"voiceConfig"in e)return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function K0(n,e){return e}function oa(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function sb(n,e,t,r=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function as(n,e){if(typeof e!="string")throw new Error("name must be a string");return sb(n,e,"cachedContents")}function ls(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Y0(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ob(n,e){const t={};if(_(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=_(e,["thought"]);r!=null&&y(t,["thought"],r);const o=_(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const l=_(e,["executableCode"]);l!=null&&y(t,["executableCode"],l);const c=_(e,["fileData"]);c!=null&&y(t,["fileData"],c);const h=_(e,["functionCall"]);h!=null&&y(t,["functionCall"],h);const p=_(e,["functionResponse"]);p!=null&&y(t,["functionResponse"],p);const g=_(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const T=_(e,["text"]);return T!=null&&y(t,["text"],T),t}function zv(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>ob(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function ab(n,e){const t={};if(_(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const r=_(e,["description"]);r!=null&&y(t,["description"],r);const o=_(e,["name"]);o!=null&&y(t,["name"],o);const l=_(e,["parameters"]);return l!=null&&y(t,["parameters"],l),t}function lb(){return{}}function ub(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["dynamicThreshold"]);return o!=null&&y(t,["dynamicThreshold"],o),t}function cb(n,e){const t={},r=_(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],ub(n,r)),t}function fb(n,e){const t={},r=_(e,["functionDeclarations"]);if(r!=null&&(Array.isArray(r)?y(t,["functionDeclarations"],r.map(h=>ab(n,h))):y(t,["functionDeclarations"],r)),_(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");_(e,["googleSearch"])!=null&&y(t,["googleSearch"],lb());const l=_(e,["googleSearchRetrieval"]);l!=null&&y(t,["googleSearchRetrieval"],cb(n,l));const c=_(e,["codeExecution"]);return c!=null&&y(t,["codeExecution"],c),t}function hb(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["allowedFunctionNames"]);return o!=null&&y(t,["allowedFunctionNames"],o),t}function db(n,e){const t={},r=_(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],hb(n,r)),t}function pb(n,e,t){const r={},o=_(e,["ttl"]);t!==void 0&&o!=null&&y(t,["ttl"],o);const l=_(e,["expireTime"]);t!==void 0&&l!=null&&y(t,["expireTime"],l);const c=_(e,["displayName"]);t!==void 0&&c!=null&&y(t,["displayName"],c);const h=_(e,["contents"]);t!==void 0&&h!=null&&(Array.isArray(h)?y(t,["contents"],_t(n,_t(n,h).map(S=>zv(n,S)))):y(t,["contents"],_t(n,h)));const p=_(e,["systemInstruction"]);t!==void 0&&p!=null&&y(t,["systemInstruction"],zv(n,Hn(n,p)));const g=_(e,["tools"]);t!==void 0&&g!=null&&(Array.isArray(g)?y(t,["tools"],g.map(S=>fb(n,S))):y(t,["tools"],g));const T=_(e,["toolConfig"]);return t!==void 0&&T!=null&&y(t,["toolConfig"],db(n,T)),r}function mb(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["model"],q0(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],pb(n,o,t)),t}function gb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function yb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function _b(n,e,t){const r={},o=_(e,["ttl"]);t!==void 0&&o!=null&&y(t,["ttl"],o);const l=_(e,["expireTime"]);return t!==void 0&&l!=null&&y(t,["expireTime"],l),r}function vb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],_b(n,o,t)),t}function Tb(n,e,t){const r={},o=_(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=_(e,["pageToken"]);return t!==void 0&&l!=null&&y(t,["_query","pageToken"],l),r}function Eb(n,e){const t={},r=_(e,["config"]);return r!=null&&y(t,["config"],Tb(n,r,t)),t}function Ab(n,e){const t={},r=_(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const o=_(e,["thought"]);o!=null&&y(t,["thought"],o);const l=_(e,["codeExecutionResult"]);l!=null&&y(t,["codeExecutionResult"],l);const c=_(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const h=_(e,["fileData"]);h!=null&&y(t,["fileData"],h);const p=_(e,["functionCall"]);p!=null&&y(t,["functionCall"],p);const g=_(e,["functionResponse"]);g!=null&&y(t,["functionResponse"],g);const T=_(e,["inlineData"]);T!=null&&y(t,["inlineData"],T);const S=_(e,["text"]);return S!=null&&y(t,["text"],S),t}function Hv(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>Ab(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function Sb(n,e){const t={},r=_(e,["example"]);r!=null&&y(t,["example"],r);const o=_(e,["pattern"]);o!=null&&y(t,["pattern"],o);const l=_(e,["default"]);l!=null&&y(t,["default"],l);const c=_(e,["maxLength"]);c!=null&&y(t,["maxLength"],c);const h=_(e,["minLength"]);h!=null&&y(t,["minLength"],h);const p=_(e,["minProperties"]);p!=null&&y(t,["minProperties"],p);const g=_(e,["maxProperties"]);g!=null&&y(t,["maxProperties"],g);const T=_(e,["anyOf"]);T!=null&&y(t,["anyOf"],T);const S=_(e,["description"]);S!=null&&y(t,["description"],S);const R=_(e,["enum"]);R!=null&&y(t,["enum"],R);const b=_(e,["format"]);b!=null&&y(t,["format"],b);const M=_(e,["items"]);M!=null&&y(t,["items"],M);const z=_(e,["maxItems"]);z!=null&&y(t,["maxItems"],z);const q=_(e,["maximum"]);q!=null&&y(t,["maximum"],q);const $=_(e,["minItems"]);$!=null&&y(t,["minItems"],$);const J=_(e,["minimum"]);J!=null&&y(t,["minimum"],J);const W=_(e,["nullable"]);W!=null&&y(t,["nullable"],W);const le=_(e,["properties"]);le!=null&&y(t,["properties"],le);const ce=_(e,["propertyOrdering"]);ce!=null&&y(t,["propertyOrdering"],ce);const ge=_(e,["required"]);ge!=null&&y(t,["required"],ge);const P=_(e,["title"]);P!=null&&y(t,["title"],P);const I=_(e,["type"]);return I!=null&&y(t,["type"],I),t}function Cb(n,e){const t={},r=_(e,["response"]);r!=null&&y(t,["response"],Sb(n,r));const o=_(e,["description"]);o!=null&&y(t,["description"],o);const l=_(e,["name"]);l!=null&&y(t,["name"],l);const c=_(e,["parameters"]);return c!=null&&y(t,["parameters"],c),t}function wb(){return{}}function Rb(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["dynamicThreshold"]);return o!=null&&y(t,["dynamicThreshold"],o),t}function Ib(n,e){const t={},r=_(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],Rb(n,r)),t}function bb(n,e){const t={},r=_(e,["functionDeclarations"]);r!=null&&(Array.isArray(r)?y(t,["functionDeclarations"],r.map(p=>Cb(n,p))):y(t,["functionDeclarations"],r));const o=_(e,["retrieval"]);o!=null&&y(t,["retrieval"],o),_(e,["googleSearch"])!=null&&y(t,["googleSearch"],wb());const c=_(e,["googleSearchRetrieval"]);c!=null&&y(t,["googleSearchRetrieval"],Ib(n,c));const h=_(e,["codeExecution"]);return h!=null&&y(t,["codeExecution"],h),t}function Db(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["allowedFunctionNames"]);return o!=null&&y(t,["allowedFunctionNames"],o),t}function Mb(n,e){const t={},r=_(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],Db(n,r)),t}function Nb(n,e,t){const r={},o=_(e,["ttl"]);t!==void 0&&o!=null&&y(t,["ttl"],o);const l=_(e,["expireTime"]);t!==void 0&&l!=null&&y(t,["expireTime"],l);const c=_(e,["displayName"]);t!==void 0&&c!=null&&y(t,["displayName"],c);const h=_(e,["contents"]);t!==void 0&&h!=null&&(Array.isArray(h)?y(t,["contents"],_t(n,_t(n,h).map(S=>Hv(n,S)))):y(t,["contents"],_t(n,h)));const p=_(e,["systemInstruction"]);t!==void 0&&p!=null&&y(t,["systemInstruction"],Hv(n,Hn(n,p)));const g=_(e,["tools"]);t!==void 0&&g!=null&&(Array.isArray(g)?y(t,["tools"],g.map(S=>bb(n,S))):y(t,["tools"],g));const T=_(e,["toolConfig"]);return t!==void 0&&T!=null&&y(t,["toolConfig"],Mb(n,T)),r}function xb(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["model"],q0(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],Nb(n,o,t)),t}function Pb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function Vb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function Ob(n,e,t){const r={},o=_(e,["ttl"]);t!==void 0&&o!=null&&y(t,["ttl"],o);const l=_(e,["expireTime"]);return t!==void 0&&l!=null&&y(t,["expireTime"],l),r}function kb(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","name"],as(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],Ob(n,o,t)),t}function Ub(n,e,t){const r={},o=_(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=_(e,["pageToken"]);return t!==void 0&&l!=null&&y(t,["_query","pageToken"],l),r}function Lb(n,e){const t={},r=_(e,["config"]);return r!=null&&y(t,["config"],Ub(n,r,t)),t}function rf(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["model"]);l!=null&&y(t,["model"],l);const c=_(e,["createTime"]);c!=null&&y(t,["createTime"],c);const h=_(e,["updateTime"]);h!=null&&y(t,["updateTime"],h);const p=_(e,["expireTime"]);p!=null&&y(t,["expireTime"],p);const g=_(e,["usageMetadata"]);return g!=null&&y(t,["usageMetadata"],g),t}function qb(){return{}}function Bb(n,e){const t={},r=_(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=_(e,["cachedContents"]);return o!=null&&(Array.isArray(o)?y(t,["cachedContents"],o.map(l=>rf(n,l))):y(t,["cachedContents"],o)),t}function sf(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["model"]);l!=null&&y(t,["model"],l);const c=_(e,["createTime"]);c!=null&&y(t,["createTime"],c);const h=_(e,["updateTime"]);h!=null&&y(t,["updateTime"],h);const p=_(e,["expireTime"]);p!=null&&y(t,["expireTime"],p);const g=_(e,["usageMetadata"]);return g!=null&&y(t,["usageMetadata"],g),t}function Fb(){return{}}function zb(n,e){const t={},r=_(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=_(e,["cachedContents"]);return o!=null&&(Array.isArray(o)?y(t,["cachedContents"],o.map(l=>sf(n,l))):y(t,["cachedContents"],o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _f;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_f||(_f={}));class $0{constructor(e,t,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,o)}init(e,t,r){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gv||(Gv={}));var Kv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Kv||(Kv={}));var Yv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Yv||(Yv={}));var $v;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($v||($v={}));var Qv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Qv||(Qv={}));var Xv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xv||(Xv={}));var jv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jv||(jv={}));var Wv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Wv||(Wv={}));var Jv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Jv||(Jv={}));var Zv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zv||(Zv={}));var eT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(eT||(eT={}));var tT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(tT||(tT={}));var nT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(nT||(nT={}));var iT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iT||(iT={}));var rT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rT||(rT={}));var sT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(sT||(sT={}));var oT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(oT||(oT={}));var aT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(aT||(aT={}));var lT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(lT||(lT={}));var uT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(uT||(uT={}));var cT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(cT||(cT={}));var fT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fT||(fT={}));var hT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hT||(hT={}));var dT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dT||(dT={}));var pT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(pT||(pT={}));var mT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mT||(mT={}));var gT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gT||(gT={}));var yT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(yT||(yT={}));var _T;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_T||(_T={}));class zc{get text(){var e,t,r,o,l,c,h,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",T=!1;const S=[];for(const R of(p=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[b,M]of Object.entries(R))b!=="text"&&b!=="thought"&&(M!==null||M!==void 0)&&S.push(b);if(typeof R.text=="string"){if(typeof R.thought=="boolean"&&R.thought)continue;T=!0,g+=R.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?g:void 0}get functionCalls(){var e,t,r,o,l,c,h,p;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(p=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,r,o,l,c,h,p,g;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(p=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((T==null?void 0:T.length)!==0)return(g=T==null?void 0:T[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,r,o,l,c,h,p,g;if(((o=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(p=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((T==null?void 0:T.length)!==0)return(g=T==null?void 0:T[0])===null||g===void 0?void 0:g.output}}class vT{}class TT{}class ET{}class Hb{}class AT{}class ST{}class Gb{}class Q0{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kb{}class Yb{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $b extends Hf{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $0(_f.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=xb(this.apiClient,e);return l=Ke("cachedContents",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>sf(this.apiClient,p))}else{const h=mb(this.apiClient,e);return l=Ke("cachedContents",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>rf(this.apiClient,p))}}async get(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=Pb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>sf(this.apiClient,p))}else{const h=gb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>rf(this.apiClient,p))}}async delete(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=Vb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(()=>{const p=Fb(),g=new AT;return Object.assign(g,p),g})}else{const h=yb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(()=>{const p=qb(),g=new AT;return Object.assign(g,p),g})}}async update(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=kb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>sf(this.apiClient,p))}else{const h=vb(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>rf(this.apiClient,p))}}async listInternal(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=Lb(this.apiClient,e);return l=Ke("cachedContents",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>{const g=zb(this.apiClient,p),T=new ST;return Object.assign(T,g),T})}else{const h=Eb(this.apiClient,e);return l=Ke("cachedContents",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>{const g=Bb(this.apiClient,p),T=new ST;return Object.assign(T,g),T})}}}function CT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yn(n){return this instanceof yn?(this.v=n,this):new yn(n)}function vf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(b){return function(M){return Promise.resolve(M).then(b,S)}}function h(b,M){r[b]&&(o[b]=function(z){return new Promise(function(q,$){l.push([b,z,q,$])>1||p(b,z)})},M&&(o[b]=M(o[b])))}function p(b,M){try{g(r[b](M))}catch(z){R(l[0][3],z)}}function g(b){b.value instanceof yn?Promise.resolve(b.value.v).then(T,S):R(l[0][2],b)}function T(b){p("next",b)}function S(b){p("throw",b)}function R(b,M){b(M),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Vp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof CT=="function"?CT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(c){return new Promise(function(h,p){c=n[l](c),o(h,p,c.done,c.value)})}}function o(l,c,h,p){Promise.resolve(p).then(function(g){l({value:g,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:X0(t)}function X0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Xb(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jb(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0,o=n[0];for(;r<t;)if(n[r].role==="user")o=n[r],r++;else{const l=[];let c=!0;for(;r<t&&n[r].role==="model";)l.push(n[r]),c&&!X0(n[r])&&(c=!1),r++;c&&(e.push(o),e.push(...l))}return e}class Wb{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Jb(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Jb{constructor(e,t,r,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Xb(l)}async sendMessage(e){var t;await this.sendPromise;const r=Hn(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c;const p=(c=(l=(await o).candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,g=p?[p]:[];this.recordHistory(r,g)})(),await this.sendPromise,o}async sendMessageStream(e){var t;await this.sendPromise;const r=Hn(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{});const l=await o;return this.processStreamResponse(l,r)}getHistory(e=!1){return e?jb(this.history):this.history}processStreamResponse(e,t){var r,o;return vf(this,arguments,function*(){var c,h,p,g;const T=[];try{for(var S=!0,R=Vp(e),b;b=yield yn(R.next()),c=b.done,!c;S=!0){g=b.value,S=!1;const M=g;if(Qb(M)){const z=(o=(r=M.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;z!==void 0&&T.push(z)}yield yield yn(M)}}catch(M){h={error:M}}finally{try{!S&&!c&&(p=R.return)&&(yield yn(p.call(R)))}finally{if(h)throw h.error}}this.recordHistory(t,T)})}recordHistory(e,t){let r=[];t.length>0&&t.every(o=>o.role==="model")?r=t:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zb(n,e,t){const r={},o=_(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=_(e,["pageToken"]);return t!==void 0&&l!=null&&y(t,["_query","pageToken"],l),r}function eD(n,e){const t={},r=_(e,["config"]);return r!=null&&y(t,["config"],Zb(n,r,t)),t}function tD(n,e){const t={},r=_(e,["details"]);r!=null&&y(t,["details"],r);const o=_(e,["message"]);o!=null&&y(t,["message"],o);const l=_(e,["code"]);return l!=null&&y(t,["code"],l),t}function nD(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["mimeType"]);l!=null&&y(t,["mimeType"],l);const c=_(e,["sizeBytes"]);c!=null&&y(t,["sizeBytes"],c);const h=_(e,["createTime"]);h!=null&&y(t,["createTime"],h);const p=_(e,["expirationTime"]);p!=null&&y(t,["expirationTime"],p);const g=_(e,["updateTime"]);g!=null&&y(t,["updateTime"],g);const T=_(e,["sha256Hash"]);T!=null&&y(t,["sha256Hash"],T);const S=_(e,["uri"]);S!=null&&y(t,["uri"],S);const R=_(e,["downloadUri"]);R!=null&&y(t,["downloadUri"],R);const b=_(e,["state"]);b!=null&&y(t,["state"],b);const M=_(e,["source"]);M!=null&&y(t,["source"],M);const z=_(e,["videoMetadata"]);z!=null&&y(t,["videoMetadata"],z);const q=_(e,["error"]);return q!=null&&y(t,["error"],tD(n,q)),t}function iD(n,e){const t={},r=_(e,["file"]);r!=null&&y(t,["file"],nD(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function rD(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","file"],Y0(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function sD(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["_url","file"],Y0(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function oD(n,e){const t={},r=_(e,["details"]);r!=null&&y(t,["details"],r);const o=_(e,["message"]);o!=null&&y(t,["message"],o);const l=_(e,["code"]);return l!=null&&y(t,["code"],l),t}function Op(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["mimeType"]);l!=null&&y(t,["mimeType"],l);const c=_(e,["sizeBytes"]);c!=null&&y(t,["sizeBytes"],c);const h=_(e,["createTime"]);h!=null&&y(t,["createTime"],h);const p=_(e,["expirationTime"]);p!=null&&y(t,["expirationTime"],p);const g=_(e,["updateTime"]);g!=null&&y(t,["updateTime"],g);const T=_(e,["sha256Hash"]);T!=null&&y(t,["sha256Hash"],T);const S=_(e,["uri"]);S!=null&&y(t,["uri"],S);const R=_(e,["downloadUri"]);R!=null&&y(t,["downloadUri"],R);const b=_(e,["state"]);b!=null&&y(t,["state"],b);const M=_(e,["source"]);M!=null&&y(t,["source"],M);const z=_(e,["videoMetadata"]);z!=null&&y(t,["videoMetadata"],z);const q=_(e,["error"]);return q!=null&&y(t,["error"],oD(n,q)),t}function aD(n,e){const t={},r=_(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=_(e,["files"]);return o!=null&&(Array.isArray(o)?y(t,["files"],o.map(l=>Op(n,l))):y(t,["files"],o)),t}function lD(n,e){const t={},r=_(e,["httpHeaders"]);return r!=null&&y(t,["httpHeaders"],r),t}function uD(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cD extends Hf{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $0(_f.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Op(this.apiClient,t))}async listInternal(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eD(this.apiClient,e);return o=Ke("files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(h=>{const p=aD(this.apiClient,h),g=new Gb;return Object.assign(g,p),g})}}async createInternal(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iD(this.apiClient,e);return o=Ke("upload/v1beta/files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(h=>{const p=lD(this.apiClient,h),g=new Kb;return Object.assign(g,p),g})}}async get(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rD(this.apiClient,e);return o=Ke("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(h=>Op(this.apiClient,h))}}async delete(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sD(this.apiClient,e);return o=Ke("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(()=>{const h=uD(),p=new Yb;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fD(n,e){const t={};if(_(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=_(e,["thought"]);r!=null&&y(t,["thought"],r);const o=_(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const l=_(e,["executableCode"]);l!=null&&y(t,["executableCode"],l);const c=_(e,["fileData"]);c!=null&&y(t,["fileData"],c);const h=_(e,["functionCall"]);h!=null&&y(t,["functionCall"],h);const p=_(e,["functionResponse"]);p!=null&&y(t,["functionResponse"],p);const g=_(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const T=_(e,["text"]);return T!=null&&y(t,["text"],T),t}function uu(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>fD(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function hD(n,e){const t={};if(_(e,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(_(e,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(_(e,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(_(e,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(_(e,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(_(e,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(_(e,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const r=_(e,["anyOf"]);r!=null&&y(t,["anyOf"],r);const o=_(e,["description"]);o!=null&&y(t,["description"],o);const l=_(e,["enum"]);l!=null&&y(t,["enum"],l);const c=_(e,["format"]);c!=null&&y(t,["format"],c);const h=_(e,["items"]);h!=null&&y(t,["items"],h);const p=_(e,["maxItems"]);p!=null&&y(t,["maxItems"],p);const g=_(e,["maximum"]);g!=null&&y(t,["maximum"],g);const T=_(e,["minItems"]);T!=null&&y(t,["minItems"],T);const S=_(e,["minimum"]);S!=null&&y(t,["minimum"],S);const R=_(e,["nullable"]);R!=null&&y(t,["nullable"],R);const b=_(e,["properties"]);b!=null&&y(t,["properties"],b);const M=_(e,["propertyOrdering"]);M!=null&&y(t,["propertyOrdering"],M);const z=_(e,["required"]);z!=null&&y(t,["required"],z);const q=_(e,["title"]);q!=null&&y(t,["title"],q);const $=_(e,["type"]);return $!=null&&y(t,["type"],$),t}function dD(n,e){const t={};if(_(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=_(e,["category"]);r!=null&&y(t,["category"],r);const o=_(e,["threshold"]);return o!=null&&y(t,["threshold"],o),t}function pD(n,e){const t={};if(_(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const r=_(e,["description"]);r!=null&&y(t,["description"],r);const o=_(e,["name"]);o!=null&&y(t,["name"],o);const l=_(e,["parameters"]);return l!=null&&y(t,["parameters"],l),t}function mD(){return{}}function gD(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["dynamicThreshold"]);return o!=null&&y(t,["dynamicThreshold"],o),t}function yD(n,e){const t={},r=_(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],gD(n,r)),t}function j0(n,e){const t={},r=_(e,["functionDeclarations"]);if(r!=null&&(Array.isArray(r)?y(t,["functionDeclarations"],r.map(h=>pD(n,h))):y(t,["functionDeclarations"],r)),_(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");_(e,["googleSearch"])!=null&&y(t,["googleSearch"],mD());const l=_(e,["googleSearchRetrieval"]);l!=null&&y(t,["googleSearchRetrieval"],yD(n,l));const c=_(e,["codeExecution"]);return c!=null&&y(t,["codeExecution"],c),t}function _D(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["allowedFunctionNames"]);return o!=null&&y(t,["allowedFunctionNames"],o),t}function vD(n,e){const t={},r=_(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],_D(n,r)),t}function TD(n,e){const t={},r=_(e,["voiceName"]);return r!=null&&y(t,["voiceName"],r),t}function ED(n,e){const t={},r=_(e,["prebuiltVoiceConfig"]);return r!=null&&y(t,["prebuiltVoiceConfig"],TD(n,r)),t}function AD(n,e){const t={},r=_(e,["voiceConfig"]);return r!=null&&y(t,["voiceConfig"],ED(n,r)),t}function SD(n,e){const t={},r=_(e,["includeThoughts"]);r!=null&&y(t,["includeThoughts"],r);const o=_(e,["thinkingBudget"]);return o!=null&&y(t,["thinkingBudget"],o),t}function CD(n,e,t){const r={},o=_(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],uu(n,Hn(n,o)));const l=_(e,["temperature"]);l!=null&&y(r,["temperature"],l);const c=_(e,["topP"]);c!=null&&y(r,["topP"],c);const h=_(e,["topK"]);h!=null&&y(r,["topK"],h);const p=_(e,["candidateCount"]);p!=null&&y(r,["candidateCount"],p);const g=_(e,["maxOutputTokens"]);g!=null&&y(r,["maxOutputTokens"],g);const T=_(e,["stopSequences"]);T!=null&&y(r,["stopSequences"],T);const S=_(e,["responseLogprobs"]);S!=null&&y(r,["responseLogprobs"],S);const R=_(e,["logprobs"]);R!=null&&y(r,["logprobs"],R);const b=_(e,["presencePenalty"]);b!=null&&y(r,["presencePenalty"],b);const M=_(e,["frequencyPenalty"]);M!=null&&y(r,["frequencyPenalty"],M);const z=_(e,["seed"]);z!=null&&y(r,["seed"],z);const q=_(e,["responseMimeType"]);q!=null&&y(r,["responseMimeType"],q);const $=_(e,["responseSchema"]);if($!=null&&y(r,["responseSchema"],hD(n,H0(n,$))),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");const J=_(e,["safetySettings"]);t!==void 0&&J!=null&&(Array.isArray(J)?y(t,["safetySettings"],J.map(V=>dD(n,V))):y(t,["safetySettings"],J));const W=_(e,["tools"]);t!==void 0&&W!=null&&(Array.isArray(W)?y(t,["tools"],oa(n,oa(n,W).map(V=>j0(n,K0(n,V))))):y(t,["tools"],oa(n,W)));const le=_(e,["toolConfig"]);if(t!==void 0&&le!=null&&y(t,["toolConfig"],vD(n,le)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=_(e,["cachedContent"]);t!==void 0&&ce!=null&&y(t,["cachedContent"],as(n,ce));const ge=_(e,["responseModalities"]);ge!=null&&y(r,["responseModalities"],ge);const P=_(e,["mediaResolution"]);P!=null&&y(r,["mediaResolution"],P);const I=_(e,["speechConfig"]);if(I!=null&&y(r,["speechConfig"],AD(n,G0(n,I))),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=_(e,["thinkingConfig"]);return D!=null&&y(r,["thinkingConfig"],SD(n,D)),r}function wT(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&(Array.isArray(o)?y(t,["contents"],_t(n,_t(n,o).map(c=>uu(n,c)))):y(t,["contents"],_t(n,o)));const l=_(e,["config"]);return l!=null&&y(t,["generationConfig"],CD(n,l,t)),t}function wD(n,e,t){const r={},o=_(e,["taskType"]);t!==void 0&&o!=null&&y(t,["requests[]","taskType"],o);const l=_(e,["title"]);t!==void 0&&l!=null&&y(t,["requests[]","title"],l);const c=_(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&y(t,["requests[]","outputDimensionality"],c),_(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function RD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&y(t,["requests[]","content"],z0(n,o));const l=_(e,["config"]);l!=null&&y(t,["config"],wD(n,l,t));const c=_(e,["model"]);return c!==void 0&&y(t,["requests[]","model"],sn(n,c)),t}function ID(n,e,t){const r={};if(_(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=_(e,["numberOfImages"]);t!==void 0&&o!=null&&y(t,["parameters","sampleCount"],o);const l=_(e,["aspectRatio"]);t!==void 0&&l!=null&&y(t,["parameters","aspectRatio"],l);const c=_(e,["guidanceScale"]);if(t!==void 0&&c!=null&&y(t,["parameters","guidanceScale"],c),_(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=_(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&y(t,["parameters","safetySetting"],h);const p=_(e,["personGeneration"]);t!==void 0&&p!=null&&y(t,["parameters","personGeneration"],p);const g=_(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&y(t,["parameters","includeSafetyAttributes"],g);const T=_(e,["includeRaiReason"]);t!==void 0&&T!=null&&y(t,["parameters","includeRaiReason"],T);const S=_(e,["language"]);t!==void 0&&S!=null&&y(t,["parameters","language"],S);const R=_(e,["outputMimeType"]);t!==void 0&&R!=null&&y(t,["parameters","outputOptions","mimeType"],R);const b=_(e,["outputCompressionQuality"]);if(t!==void 0&&b!=null&&y(t,["parameters","outputOptions","compressionQuality"],b),_(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(_(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function bD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=_(e,["config"]);return l!=null&&y(t,["config"],ID(n,l,t)),t}function DD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","name"],sn(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function MD(n,e){const t={};if(_(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(_(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(_(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function ND(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&(Array.isArray(o)?y(t,["contents"],_t(n,_t(n,o).map(c=>uu(n,c)))):y(t,["contents"],_t(n,o)));const l=_(e,["config"]);return l!=null&&y(t,["config"],MD(n,l)),t}function xD(n,e){const t={};if(_(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=_(e,["imageBytes"]);r!=null&&y(t,["bytesBase64Encoded"],ls(n,r));const o=_(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function PD(n,e,t){const r={},o=_(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&y(t,["parameters","sampleCount"],o),_(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=_(e,["durationSeconds"]);if(t!==void 0&&l!=null&&y(t,["parameters","durationSeconds"],l),_(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=_(e,["aspectRatio"]);if(t!==void 0&&c!=null&&y(t,["parameters","aspectRatio"],c),_(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const h=_(e,["personGeneration"]);if(t!==void 0&&h!=null&&y(t,["parameters","personGeneration"],h),_(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=_(e,["negativePrompt"]);if(t!==void 0&&p!=null&&y(t,["parameters","negativePrompt"],p),_(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function VD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=_(e,["image"]);l!=null&&y(t,["instances[0]","image"],xD(n,l));const c=_(e,["config"]);return c!=null&&y(t,["config"],PD(n,c,t)),t}function OD(n,e){const t={},r=_(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const o=_(e,["thought"]);o!=null&&y(t,["thought"],o);const l=_(e,["codeExecutionResult"]);l!=null&&y(t,["codeExecutionResult"],l);const c=_(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const h=_(e,["fileData"]);h!=null&&y(t,["fileData"],h);const p=_(e,["functionCall"]);p!=null&&y(t,["functionCall"],p);const g=_(e,["functionResponse"]);g!=null&&y(t,["functionResponse"],g);const T=_(e,["inlineData"]);T!=null&&y(t,["inlineData"],T);const S=_(e,["text"]);return S!=null&&y(t,["text"],S),t}function Zs(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>OD(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function W0(n,e){const t={},r=_(e,["example"]);r!=null&&y(t,["example"],r);const o=_(e,["pattern"]);o!=null&&y(t,["pattern"],o);const l=_(e,["default"]);l!=null&&y(t,["default"],l);const c=_(e,["maxLength"]);c!=null&&y(t,["maxLength"],c);const h=_(e,["minLength"]);h!=null&&y(t,["minLength"],h);const p=_(e,["minProperties"]);p!=null&&y(t,["minProperties"],p);const g=_(e,["maxProperties"]);g!=null&&y(t,["maxProperties"],g);const T=_(e,["anyOf"]);T!=null&&y(t,["anyOf"],T);const S=_(e,["description"]);S!=null&&y(t,["description"],S);const R=_(e,["enum"]);R!=null&&y(t,["enum"],R);const b=_(e,["format"]);b!=null&&y(t,["format"],b);const M=_(e,["items"]);M!=null&&y(t,["items"],M);const z=_(e,["maxItems"]);z!=null&&y(t,["maxItems"],z);const q=_(e,["maximum"]);q!=null&&y(t,["maximum"],q);const $=_(e,["minItems"]);$!=null&&y(t,["minItems"],$);const J=_(e,["minimum"]);J!=null&&y(t,["minimum"],J);const W=_(e,["nullable"]);W!=null&&y(t,["nullable"],W);const le=_(e,["properties"]);le!=null&&y(t,["properties"],le);const ce=_(e,["propertyOrdering"]);ce!=null&&y(t,["propertyOrdering"],ce);const ge=_(e,["required"]);ge!=null&&y(t,["required"],ge);const P=_(e,["title"]);P!=null&&y(t,["title"],P);const I=_(e,["type"]);return I!=null&&y(t,["type"],I),t}function kD(n,e){const t={},r=_(e,["method"]);r!=null&&y(t,["method"],r);const o=_(e,["category"]);o!=null&&y(t,["category"],o);const l=_(e,["threshold"]);return l!=null&&y(t,["threshold"],l),t}function UD(n,e){const t={},r=_(e,["response"]);r!=null&&y(t,["response"],W0(n,r));const o=_(e,["description"]);o!=null&&y(t,["description"],o);const l=_(e,["name"]);l!=null&&y(t,["name"],l);const c=_(e,["parameters"]);return c!=null&&y(t,["parameters"],c),t}function LD(){return{}}function qD(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["dynamicThreshold"]);return o!=null&&y(t,["dynamicThreshold"],o),t}function BD(n,e){const t={},r=_(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],qD(n,r)),t}function gm(n,e){const t={},r=_(e,["functionDeclarations"]);r!=null&&(Array.isArray(r)?y(t,["functionDeclarations"],r.map(p=>UD(n,p))):y(t,["functionDeclarations"],r));const o=_(e,["retrieval"]);o!=null&&y(t,["retrieval"],o),_(e,["googleSearch"])!=null&&y(t,["googleSearch"],LD());const c=_(e,["googleSearchRetrieval"]);c!=null&&y(t,["googleSearchRetrieval"],BD(n,c));const h=_(e,["codeExecution"]);return h!=null&&y(t,["codeExecution"],h),t}function FD(n,e){const t={},r=_(e,["mode"]);r!=null&&y(t,["mode"],r);const o=_(e,["allowedFunctionNames"]);return o!=null&&y(t,["allowedFunctionNames"],o),t}function zD(n,e){const t={},r=_(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],FD(n,r)),t}function HD(n,e){const t={},r=_(e,["voiceName"]);return r!=null&&y(t,["voiceName"],r),t}function GD(n,e){const t={},r=_(e,["prebuiltVoiceConfig"]);return r!=null&&y(t,["prebuiltVoiceConfig"],HD(n,r)),t}function KD(n,e){const t={},r=_(e,["voiceConfig"]);return r!=null&&y(t,["voiceConfig"],GD(n,r)),t}function YD(n,e){const t={},r=_(e,["includeThoughts"]);r!=null&&y(t,["includeThoughts"],r);const o=_(e,["thinkingBudget"]);return o!=null&&y(t,["thinkingBudget"],o),t}function $D(n,e,t){const r={},o=_(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],Zs(n,Hn(n,o)));const l=_(e,["temperature"]);l!=null&&y(r,["temperature"],l);const c=_(e,["topP"]);c!=null&&y(r,["topP"],c);const h=_(e,["topK"]);h!=null&&y(r,["topK"],h);const p=_(e,["candidateCount"]);p!=null&&y(r,["candidateCount"],p);const g=_(e,["maxOutputTokens"]);g!=null&&y(r,["maxOutputTokens"],g);const T=_(e,["stopSequences"]);T!=null&&y(r,["stopSequences"],T);const S=_(e,["responseLogprobs"]);S!=null&&y(r,["responseLogprobs"],S);const R=_(e,["logprobs"]);R!=null&&y(r,["logprobs"],R);const b=_(e,["presencePenalty"]);b!=null&&y(r,["presencePenalty"],b);const M=_(e,["frequencyPenalty"]);M!=null&&y(r,["frequencyPenalty"],M);const z=_(e,["seed"]);z!=null&&y(r,["seed"],z);const q=_(e,["responseMimeType"]);q!=null&&y(r,["responseMimeType"],q);const $=_(e,["responseSchema"]);$!=null&&y(r,["responseSchema"],W0(n,H0(n,$)));const J=_(e,["routingConfig"]);J!=null&&y(r,["routingConfig"],J);const W=_(e,["safetySettings"]);t!==void 0&&W!=null&&(Array.isArray(W)?y(t,["safetySettings"],W.map(x=>kD(n,x))):y(t,["safetySettings"],W));const le=_(e,["tools"]);t!==void 0&&le!=null&&(Array.isArray(le)?y(t,["tools"],oa(n,oa(n,le).map(x=>gm(n,K0(n,x))))):y(t,["tools"],oa(n,le)));const ce=_(e,["toolConfig"]);t!==void 0&&ce!=null&&y(t,["toolConfig"],zD(n,ce));const ge=_(e,["labels"]);t!==void 0&&ge!=null&&y(t,["labels"],ge);const P=_(e,["cachedContent"]);t!==void 0&&P!=null&&y(t,["cachedContent"],as(n,P));const I=_(e,["responseModalities"]);I!=null&&y(r,["responseModalities"],I);const D=_(e,["mediaResolution"]);D!=null&&y(r,["mediaResolution"],D);const V=_(e,["speechConfig"]);V!=null&&y(r,["speechConfig"],KD(n,G0(n,V)));const U=_(e,["audioTimestamp"]);U!=null&&y(r,["audioTimestamp"],U);const L=_(e,["thinkingConfig"]);return L!=null&&y(r,["thinkingConfig"],YD(n,L)),r}function RT(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&(Array.isArray(o)?y(t,["contents"],_t(n,_t(n,o).map(c=>Zs(n,c)))):y(t,["contents"],_t(n,o)));const l=_(e,["config"]);return l!=null&&y(t,["generationConfig"],$D(n,l,t)),t}function QD(n,e,t){const r={},o=_(e,["taskType"]);t!==void 0&&o!=null&&y(t,["instances[]","task_type"],o);const l=_(e,["title"]);t!==void 0&&l!=null&&y(t,["instances[]","title"],l);const c=_(e,["outputDimensionality"]);t!==void 0&&c!=null&&y(t,["parameters","outputDimensionality"],c);const h=_(e,["mimeType"]);t!==void 0&&h!=null&&y(t,["instances[]","mimeType"],h);const p=_(e,["autoTruncate"]);return t!==void 0&&p!=null&&y(t,["parameters","autoTruncate"],p),r}function XD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&y(t,["instances[]","content"],z0(n,o));const l=_(e,["config"]);return l!=null&&y(t,["config"],QD(n,l,t)),t}function jD(n,e,t){const r={},o=_(e,["outputGcsUri"]);t!==void 0&&o!=null&&y(t,["parameters","storageUri"],o);const l=_(e,["negativePrompt"]);t!==void 0&&l!=null&&y(t,["parameters","negativePrompt"],l);const c=_(e,["numberOfImages"]);t!==void 0&&c!=null&&y(t,["parameters","sampleCount"],c);const h=_(e,["aspectRatio"]);t!==void 0&&h!=null&&y(t,["parameters","aspectRatio"],h);const p=_(e,["guidanceScale"]);t!==void 0&&p!=null&&y(t,["parameters","guidanceScale"],p);const g=_(e,["seed"]);t!==void 0&&g!=null&&y(t,["parameters","seed"],g);const T=_(e,["safetyFilterLevel"]);t!==void 0&&T!=null&&y(t,["parameters","safetySetting"],T);const S=_(e,["personGeneration"]);t!==void 0&&S!=null&&y(t,["parameters","personGeneration"],S);const R=_(e,["includeSafetyAttributes"]);t!==void 0&&R!=null&&y(t,["parameters","includeSafetyAttributes"],R);const b=_(e,["includeRaiReason"]);t!==void 0&&b!=null&&y(t,["parameters","includeRaiReason"],b);const M=_(e,["language"]);t!==void 0&&M!=null&&y(t,["parameters","language"],M);const z=_(e,["outputMimeType"]);t!==void 0&&z!=null&&y(t,["parameters","outputOptions","mimeType"],z);const q=_(e,["outputCompressionQuality"]);t!==void 0&&q!=null&&y(t,["parameters","outputOptions","compressionQuality"],q);const $=_(e,["addWatermark"]);t!==void 0&&$!=null&&y(t,["parameters","addWatermark"],$);const J=_(e,["enhancePrompt"]);return t!==void 0&&J!=null&&y(t,["parameters","enhancePrompt"],J),r}function WD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=_(e,["config"]);return l!=null&&y(t,["config"],jD(n,l,t)),t}function JD(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","name"],sn(n,r));const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function ZD(n,e,t){const r={},o=_(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],Zs(n,Hn(n,o)));const l=_(e,["tools"]);t!==void 0&&l!=null&&(Array.isArray(l)?y(t,["tools"],l.map(h=>gm(n,h))):y(t,["tools"],l));const c=_(e,["generationConfig"]);return t!==void 0&&c!=null&&y(t,["generationConfig"],c),r}function eM(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&(Array.isArray(o)?y(t,["contents"],_t(n,_t(n,o).map(c=>Zs(n,c)))):y(t,["contents"],_t(n,o)));const l=_(e,["config"]);return l!=null&&y(t,["config"],ZD(n,l,t)),t}function tM(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["contents"]);o!=null&&(Array.isArray(o)?y(t,["contents"],_t(n,_t(n,o).map(c=>Zs(n,c)))):y(t,["contents"],_t(n,o)));const l=_(e,["config"]);return l!=null&&y(t,["config"],l),t}function nM(n,e){const t={},r=_(e,["gcsUri"]);r!=null&&y(t,["gcsUri"],r);const o=_(e,["imageBytes"]);o!=null&&y(t,["bytesBase64Encoded"],ls(n,o));const l=_(e,["mimeType"]);return l!=null&&y(t,["mimeType"],l),t}function iM(n,e,t){const r={},o=_(e,["numberOfVideos"]);t!==void 0&&o!=null&&y(t,["parameters","sampleCount"],o);const l=_(e,["outputGcsUri"]);t!==void 0&&l!=null&&y(t,["parameters","storageUri"],l);const c=_(e,["fps"]);t!==void 0&&c!=null&&y(t,["parameters","fps"],c);const h=_(e,["durationSeconds"]);t!==void 0&&h!=null&&y(t,["parameters","durationSeconds"],h);const p=_(e,["seed"]);t!==void 0&&p!=null&&y(t,["parameters","seed"],p);const g=_(e,["aspectRatio"]);t!==void 0&&g!=null&&y(t,["parameters","aspectRatio"],g);const T=_(e,["resolution"]);t!==void 0&&T!=null&&y(t,["parameters","resolution"],T);const S=_(e,["personGeneration"]);t!==void 0&&S!=null&&y(t,["parameters","personGeneration"],S);const R=_(e,["pubsubTopic"]);t!==void 0&&R!=null&&y(t,["parameters","pubsubTopic"],R);const b=_(e,["negativePrompt"]);t!==void 0&&b!=null&&y(t,["parameters","negativePrompt"],b);const M=_(e,["enhancePrompt"]);return t!==void 0&&M!=null&&y(t,["parameters","enhancePrompt"],M),r}function rM(n,e){const t={},r=_(e,["model"]);r!=null&&y(t,["_url","model"],sn(n,r));const o=_(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=_(e,["image"]);l!=null&&y(t,["instances[0]","image"],nM(n,l));const c=_(e,["config"]);return c!=null&&y(t,["config"],iM(n,c,t)),t}function sM(n,e){const t={},r=_(e,["thought"]);r!=null&&y(t,["thought"],r);const o=_(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const l=_(e,["executableCode"]);l!=null&&y(t,["executableCode"],l);const c=_(e,["fileData"]);c!=null&&y(t,["fileData"],c);const h=_(e,["functionCall"]);h!=null&&y(t,["functionCall"],h);const p=_(e,["functionResponse"]);p!=null&&y(t,["functionResponse"],p);const g=_(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const T=_(e,["text"]);return T!=null&&y(t,["text"],T),t}function J0(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>sM(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function oM(n,e){const t={},r=_(e,["citationSources"]);return r!=null&&y(t,["citations"],r),t}function aM(n,e){const t={},r=_(e,["content"]);r!=null&&y(t,["content"],J0(n,r));const o=_(e,["citationMetadata"]);o!=null&&y(t,["citationMetadata"],oM(n,o));const l=_(e,["tokenCount"]);l!=null&&y(t,["tokenCount"],l);const c=_(e,["finishReason"]);c!=null&&y(t,["finishReason"],c);const h=_(e,["avgLogprobs"]);h!=null&&y(t,["avgLogprobs"],h);const p=_(e,["groundingMetadata"]);p!=null&&y(t,["groundingMetadata"],p);const g=_(e,["index"]);g!=null&&y(t,["index"],g);const T=_(e,["logprobsResult"]);T!=null&&y(t,["logprobsResult"],T);const S=_(e,["safetyRatings"]);return S!=null&&y(t,["safetyRatings"],S),t}function IT(n,e){const t={},r=_(e,["candidates"]);r!=null&&(Array.isArray(r)?y(t,["candidates"],r.map(h=>aM(n,h))):y(t,["candidates"],r));const o=_(e,["modelVersion"]);o!=null&&y(t,["modelVersion"],o);const l=_(e,["promptFeedback"]);l!=null&&y(t,["promptFeedback"],l);const c=_(e,["usageMetadata"]);return c!=null&&y(t,["usageMetadata"],c),t}function lM(n,e){const t={},r=_(e,["values"]);return r!=null&&y(t,["values"],r),t}function uM(){return{}}function cM(n,e){const t={},r=_(e,["embeddings"]);return r!=null&&(Array.isArray(r)?y(t,["embeddings"],r.map(l=>lM(n,l))):y(t,["embeddings"],r)),_(e,["metadata"])!=null&&y(t,["metadata"],uM()),t}function fM(n,e){const t={},r=_(e,["bytesBase64Encoded"]);r!=null&&y(t,["imageBytes"],ls(n,r));const o=_(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function Z0(n,e){const t={},r=_(e,["safetyAttributes","categories"]);r!=null&&y(t,["categories"],r);const o=_(e,["safetyAttributes","scores"]);o!=null&&y(t,["scores"],o);const l=_(e,["contentType"]);return l!=null&&y(t,["contentType"],l),t}function hM(n,e){const t={},r=_(e,["_self"]);r!=null&&y(t,["image"],fM(n,r));const o=_(e,["raiFilteredReason"]);o!=null&&y(t,["raiFilteredReason"],o);const l=_(e,["_self"]);return l!=null&&y(t,["safetyAttributes"],Z0(n,l)),t}function dM(n,e){const t={},r=_(e,["predictions"]);r!=null&&(Array.isArray(r)?y(t,["generatedImages"],r.map(l=>hM(n,l))):y(t,["generatedImages"],r));const o=_(e,["positivePromptSafetyAttributes"]);return o!=null&&y(t,["positivePromptSafetyAttributes"],Z0(n,o)),t}function pM(n,e){const t={},r=_(e,["baseModel"]);r!=null&&y(t,["baseModel"],r);const o=_(e,["createTime"]);o!=null&&y(t,["createTime"],o);const l=_(e,["updateTime"]);return l!=null&&y(t,["updateTime"],l),t}function mM(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["description"]);l!=null&&y(t,["description"],l);const c=_(e,["version"]);c!=null&&y(t,["version"],c);const h=_(e,["_self"]);h!=null&&y(t,["tunedModelInfo"],pM(n,h));const p=_(e,["inputTokenLimit"]);p!=null&&y(t,["inputTokenLimit"],p);const g=_(e,["outputTokenLimit"]);g!=null&&y(t,["outputTokenLimit"],g);const T=_(e,["supportedGenerationMethods"]);return T!=null&&y(t,["supportedActions"],T),t}function gM(n,e){const t={},r=_(e,["totalTokens"]);r!=null&&y(t,["totalTokens"],r);const o=_(e,["cachedContentTokenCount"]);return o!=null&&y(t,["cachedContentTokenCount"],o),t}function yM(n,e){const t={},r=_(e,["video","uri"]);r!=null&&y(t,["uri"],r);const o=_(e,["video","encodedVideo"]);o!=null&&y(t,["videoBytes"],ls(n,o));const l=_(e,["encoding"]);return l!=null&&y(t,["mimeType"],l),t}function _M(n,e){const t={},r=_(e,["_self"]);return r!=null&&y(t,["video"],yM(n,r)),t}function bT(n,e){const t={},r=_(e,["generatedSamples"]);r!=null&&(Array.isArray(r)?y(t,["generatedVideos"],r.map(c=>_M(n,c))):y(t,["generatedVideos"],r));const o=_(e,["raiMediaFilteredCount"]);o!=null&&y(t,["raiMediaFilteredCount"],o);const l=_(e,["raiMediaFilteredReasons"]);return l!=null&&y(t,["raiMediaFilteredReasons"],l),t}function vM(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["metadata"]);o!=null&&y(t,["metadata"],o);const l=_(e,["done"]);l!=null&&y(t,["done"],l);const c=_(e,["error"]);c!=null&&y(t,["error"],c);const h=_(e,["response","generateVideoResponse"]);h!=null&&y(t,["response"],bT(n,h));const p=_(e,["response","generateVideoResponse"]);return p!=null&&y(t,["result"],bT(n,p)),t}function TM(n,e){const t={},r=_(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const o=_(e,["thought"]);o!=null&&y(t,["thought"],o);const l=_(e,["codeExecutionResult"]);l!=null&&y(t,["codeExecutionResult"],l);const c=_(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const h=_(e,["fileData"]);h!=null&&y(t,["fileData"],h);const p=_(e,["functionCall"]);p!=null&&y(t,["functionCall"],p);const g=_(e,["functionResponse"]);g!=null&&y(t,["functionResponse"],g);const T=_(e,["inlineData"]);T!=null&&y(t,["inlineData"],T);const S=_(e,["text"]);return S!=null&&y(t,["text"],S),t}function eA(n,e){const t={},r=_(e,["parts"]);r!=null&&(Array.isArray(r)?y(t,["parts"],r.map(l=>TM(n,l))):y(t,["parts"],r));const o=_(e,["role"]);return o!=null&&y(t,["role"],o),t}function EM(n,e){const t={},r=_(e,["citations"]);return r!=null&&y(t,["citations"],r),t}function AM(n,e){const t={},r=_(e,["content"]);r!=null&&y(t,["content"],eA(n,r));const o=_(e,["citationMetadata"]);o!=null&&y(t,["citationMetadata"],EM(n,o));const l=_(e,["finishMessage"]);l!=null&&y(t,["finishMessage"],l);const c=_(e,["finishReason"]);c!=null&&y(t,["finishReason"],c);const h=_(e,["avgLogprobs"]);h!=null&&y(t,["avgLogprobs"],h);const p=_(e,["groundingMetadata"]);p!=null&&y(t,["groundingMetadata"],p);const g=_(e,["index"]);g!=null&&y(t,["index"],g);const T=_(e,["logprobsResult"]);T!=null&&y(t,["logprobsResult"],T);const S=_(e,["safetyRatings"]);return S!=null&&y(t,["safetyRatings"],S),t}function DT(n,e){const t={},r=_(e,["candidates"]);r!=null&&(Array.isArray(r)?y(t,["candidates"],r.map(g=>AM(n,g))):y(t,["candidates"],r));const o=_(e,["createTime"]);o!=null&&y(t,["createTime"],o);const l=_(e,["responseId"]);l!=null&&y(t,["responseId"],l);const c=_(e,["modelVersion"]);c!=null&&y(t,["modelVersion"],c);const h=_(e,["promptFeedback"]);h!=null&&y(t,["promptFeedback"],h);const p=_(e,["usageMetadata"]);return p!=null&&y(t,["usageMetadata"],p),t}function SM(n,e){const t={},r=_(e,["truncated"]);r!=null&&y(t,["truncated"],r);const o=_(e,["token_count"]);return o!=null&&y(t,["tokenCount"],o),t}function CM(n,e){const t={},r=_(e,["values"]);r!=null&&y(t,["values"],r);const o=_(e,["statistics"]);return o!=null&&y(t,["statistics"],SM(n,o)),t}function wM(n,e){const t={},r=_(e,["billableCharacterCount"]);return r!=null&&y(t,["billableCharacterCount"],r),t}function RM(n,e){const t={},r=_(e,["predictions[]","embeddings"]);r!=null&&(Array.isArray(r)?y(t,["embeddings"],r.map(l=>CM(n,l))):y(t,["embeddings"],r));const o=_(e,["metadata"]);return o!=null&&y(t,["metadata"],wM(n,o)),t}function IM(n,e){const t={},r=_(e,["gcsUri"]);r!=null&&y(t,["gcsUri"],r);const o=_(e,["bytesBase64Encoded"]);o!=null&&y(t,["imageBytes"],ls(n,o));const l=_(e,["mimeType"]);return l!=null&&y(t,["mimeType"],l),t}function tA(n,e){const t={},r=_(e,["safetyAttributes","categories"]);r!=null&&y(t,["categories"],r);const o=_(e,["safetyAttributes","scores"]);o!=null&&y(t,["scores"],o);const l=_(e,["contentType"]);return l!=null&&y(t,["contentType"],l),t}function bM(n,e){const t={},r=_(e,["_self"]);r!=null&&y(t,["image"],IM(n,r));const o=_(e,["raiFilteredReason"]);o!=null&&y(t,["raiFilteredReason"],o);const l=_(e,["_self"]);l!=null&&y(t,["safetyAttributes"],tA(n,l));const c=_(e,["prompt"]);return c!=null&&y(t,["enhancedPrompt"],c),t}function DM(n,e){const t={},r=_(e,["predictions"]);r!=null&&(Array.isArray(r)?y(t,["generatedImages"],r.map(l=>bM(n,l))):y(t,["generatedImages"],r));const o=_(e,["positivePromptSafetyAttributes"]);return o!=null&&y(t,["positivePromptSafetyAttributes"],tA(n,o)),t}function MM(n,e){const t={},r=_(e,["endpoint"]);r!=null&&y(t,["name"],r);const o=_(e,["deployedModelId"]);return o!=null&&y(t,["deployedModelId"],o),t}function NM(n,e){const t={},r=_(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&y(t,["baseModel"],r);const o=_(e,["createTime"]);o!=null&&y(t,["createTime"],o);const l=_(e,["updateTime"]);return l!=null&&y(t,["updateTime"],l),t}function xM(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["displayName"]);o!=null&&y(t,["displayName"],o);const l=_(e,["description"]);l!=null&&y(t,["description"],l);const c=_(e,["versionId"]);c!=null&&y(t,["version"],c);const h=_(e,["deployedModels"]);h!=null&&(Array.isArray(h)?y(t,["endpoints"],h.map(T=>MM(n,T))):y(t,["endpoints"],h));const p=_(e,["labels"]);p!=null&&y(t,["labels"],p);const g=_(e,["_self"]);return g!=null&&y(t,["tunedModelInfo"],NM(n,g)),t}function PM(n,e){const t={},r=_(e,["totalTokens"]);return r!=null&&y(t,["totalTokens"],r),t}function VM(n,e){const t={},r=_(e,["tokensInfo"]);return r!=null&&y(t,["tokensInfo"],r),t}function OM(n,e){const t={},r=_(e,["gcsUri"]);r!=null&&y(t,["uri"],r);const o=_(e,["bytesBase64Encoded"]);o!=null&&y(t,["videoBytes"],ls(n,o));const l=_(e,["mimeType"]);return l!=null&&y(t,["mimeType"],l),t}function kM(n,e){const t={},r=_(e,["_self"]);return r!=null&&y(t,["video"],OM(n,r)),t}function MT(n,e){const t={},r=_(e,["videos"]);r!=null&&(Array.isArray(r)?y(t,["generatedVideos"],r.map(c=>kM(n,c))):y(t,["generatedVideos"],r));const o=_(e,["raiMediaFilteredCount"]);o!=null&&y(t,["raiMediaFilteredCount"],o);const l=_(e,["raiMediaFilteredReasons"]);return l!=null&&y(t,["raiMediaFilteredReasons"],l),t}function UM(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["metadata"]);o!=null&&y(t,["metadata"],o);const l=_(e,["done"]);l!=null&&y(t,["done"],l);const c=_(e,["error"]);c!=null&&y(t,["error"],c);const h=_(e,["response"]);h!=null&&y(t,["response"],MT(n,h));const p=_(e,["response"]);return p!=null&&y(t,["result"],MT(n,p)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LM(n,e){const t={},r=_(e,["config"]);r!=null&&y(t,["setup"],jM(n,r));const o=_(e,["model"]);return o!==void 0&&y(t,["setup","model"],o),t}function qM(n,e){const t={},r=_(e,["config"]);r!=null&&y(t,["setup"],WM(n,r));const o=_(e,["model"]);return o!==void 0&&y(t,["setup","model"],o),t}function BM(n,e){const t={},r=_(e,["setupComplete"]);r!==void 0&&y(t,["setupComplete"],r);const o=_(e,["serverContent"]);o!=null&&y(t,["serverContent"],JM(n,o));const l=_(e,["toolCall"]);l!=null&&y(t,["toolCall"],n1(n,l));const c=_(e,["toolCallCancellation"]);c!=null&&y(t,["toolCallCancellation"],r1(n,c));const h=_(e,["usageMetadata"]);h!=null&&h!=null&&y(t,["usageMetadata"],h1(n,h));const p=_(e,["goAway"]);p!=null&&y(t,["goAway"],o1(p));const g=_(e,["sessionResumptionUpdate"]);return g!=null&&y(t,["sessionResumptionUpdate"],l1(g)),t}function FM(n,e){const t={},r=_(e,["setupComplete"]);r!==void 0&&y(t,["setupComplete"],r);const o=_(e,["serverContent"]);o!=null&&y(t,["serverContent"],ZM(n,o));const l=_(e,["toolCall"]);l!=null&&y(t,["toolCall"],i1(n,l));const c=_(e,["toolCallCancellation"]);c!=null&&y(t,["toolCallCancellation"],s1(n,c));const h=_(e,["goAway"]);h!=null&&y(t,["goAway"],a1(h));const p=_(e,["sessionResumptionUpdate"]);p!=null&&y(t,["sessionResumptionUpdate"],u1(p));const g=_(e,["usageMetadata"]);return g!=null&&g!=null&&y(t,["usageMetadata"],d1(n,g)),t}function zM(n){const e={},t=_(n,["targetTokens"]);return t!=null&&y(e,["targetTokens"],t),e}function HM(n){const e={},t=_(n,["targetTokens"]);return t!=null&&y(e,["targetTokens"],t),e}function GM(n){const e={},t=_(n,["triggerTokens"]);t!=null&&y(e,["triggerTokens"],t);const r=_(n,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],zM(r)),e}function KM(n){const e={},t=_(n,["triggerTokens"]);t!=null&&y(e,["triggerTokens"],t);const r=_(n,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],HM(r)),e}function YM(n){const e={},t=_(n,["disabled"]);t!=null&&y(e,["disabled"],t);const r=_(n,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const o=_(n,["endOfSpeechSensitivity"]);o!=null&&y(e,["endOfSpeechSensitivity"],o);const l=_(n,["prefixPaddingMs"]);l!=null&&y(e,["prefixPaddingMs"],l);const c=_(n,["silenceDurationMs"]);return c!=null&&y(e,["silenceDurationMs"],c),e}function $M(n){const e={},t=_(n,["disabled"]);t!=null&&y(e,["disabled"],t);const r=_(n,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const o=_(n,["endOfSpeechSensitivity"]);o!=null&&y(e,["endOfSpeechSensitivity"],o);const l=_(n,["prefixPaddingMs"]);l!=null&&y(e,["prefixPaddingMs"],l);const c=_(n,["silenceDurationMs"]);return c!=null&&y(e,["silenceDurationMs"],c),e}function QM(n){const e={},t=_(n,["automaticActivityDetection"]);t!=null&&y(e,["automaticActivityDetection"],YM(t));const r=_(n,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const o=_(n,["turnCoverage"]);return o!=null&&y(e,["turnCoverage"],o),e}function XM(n){const e={},t=_(n,["automaticActivityDetection"]);t!=null&&y(e,["automaticActivityDetection"],$M(t));const r=_(n,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const o=_(n,["turnCoverage"]);return o!=null&&y(e,["turnCoverage"],o),e}function jM(n,e){const t={},r=_(e,["generationConfig"]);r!==void 0&&y(t,["generationConfig"],r);const o=_(e,["responseModalities"]);o!==void 0&&y(t,["generationConfig","responseModalities"],o);const l=_(e,["speechConfig"]);l!==void 0&&y(t,["generationConfig","speechConfig"],l);const c=_(e,["systemInstruction"]);c!=null&&y(t,["systemInstruction"],uu(n,c));const h=_(e,["tools"]);h!=null&&Array.isArray(h)&&y(t,["tools"],h.map(S=>j0(n,S)));const p=_(e,["sessionResumption"]);p!=null&&y(t,["sessionResumption"],c1(p));const g=_(e,["contextWindowCompression"]);g!=null&&y(t,["contextWindowCompression"],GM(g));const T=_(e,["realtimeInputConfig"]);return T!=null&&y(t,["realtimeInputConfig"],QM(T)),t}function WM(n,e){const t={},r=_(e,["generationConfig"]);r!==void 0&&y(t,["generationConfig"],r);const o=_(e,["responseModalities"]);o!==void 0?y(t,["generationConfig","responseModalities"],o):y(t,["generationConfig","responseModalities"],["AUDIO"]);const l=_(e,["speechConfig"]);l!==void 0&&y(t,["generationConfig","speechConfig"],l);const c=_(e,["systemInstruction"]);c!=null&&y(t,["systemInstruction"],Zs(n,c));const h=_(e,["tools"]);h!=null&&Array.isArray(h)&&y(t,["tools"],h.map(S=>gm(n,S)));const p=_(e,["sessionResumption"]);p!=null&&y(t,["sessionResumption"],f1(p));const g=_(e,["contextWindowCompression"]);g!=null&&y(t,["contextWindowCompression"],KM(g));const T=_(e,["realtimeInputConfig"]);return T!=null&&y(t,["realtimeInputConfig"],XM(T)),t}function JM(n,e){const t={},r=_(e,["modelTurn"]);r!=null&&y(t,["modelTurn"],J0(n,r));const o=_(e,["turnComplete"]);o!==void 0&&y(t,["turnComplete"],o);const l=_(e,["interrupted"]);l!==void 0&&y(t,["interrupted"],l);const c=_(e,["generationComplete"]);return c!=null&&y(t,["generationComplete"],c),t}function ZM(n,e){const t={},r=_(e,["modelTurn"]);r!=null&&y(t,["modelTurn"],eA(n,r));const o=_(e,["turnComplete"]);o!==void 0&&y(t,["turnComplete"],o);const l=_(e,["interrupted"]);l!==void 0&&y(t,["interrupted"],l);const c=_(e,["generationComplete"]);return c!=null&&y(t,["generationComplete"],c),t}function e1(n,e){const t={},r=_(e,["id"]);r!==void 0&&y(t,["id"],r);const o=_(e,["args"]);o!==void 0&&y(t,["args"],o);const l=_(e,["name"]);return l!==void 0&&y(t,["name"],l),t}function t1(n,e){const t={},r=_(e,["args"]);r!==void 0&&y(t,["args"],r);const o=_(e,["name"]);return o!==void 0&&y(t,["name"],o),t}function n1(n,e){const t={},r=_(e,["functionCalls"]);return r!=null&&Array.isArray(r)&&y(t,["functionCalls"],r.map(o=>e1(n,o))),t}function i1(n,e){const t={},r=_(e,["functionCalls"]);return r!=null&&Array.isArray(r)&&y(t,["functionCalls"],r.map(o=>t1(n,o))),t}function r1(n,e){const t={},r=_(e,["ids"]);return r!==void 0&&y(t,["ids"],r),t}function s1(n,e){const t={},r=_(e,["ids"]);return r!==void 0&&y(t,["ids"],r),t}function o1(n){const e={},t=_(n,["timeLeft"]);return t!==void 0&&y(e,["timeLeft"],t),e}function a1(n){const e={},t=_(n,["timeLeft"]);return t!==void 0&&y(e,["timeLeft"],t),e}function l1(n){const e={},t=_(n,["newHandle"]);t!==void 0&&y(e,["newHandle"],t);const r=_(n,["resumable"]);r!==void 0&&y(e,["resumable"],r);const o=_(n,["lastConsumedClientMessageIndex"]);return o!==void 0&&y(e,["lastConsumedClientMessageIndex"],o),e}function u1(n){const e={},t=_(n,["newHandle"]);t!==void 0&&y(e,["newHandle"],t);const r=_(n,["resumable"]);r!==void 0&&y(e,["resumable"],r);const o=_(n,["lastConsumedClientMessageIndex"]);return o!==void 0&&y(e,["lastConsumedClientMessageIndex"],o),e}function c1(n){const e={},t=_(n,["handle"]);if(t!==void 0&&y(e,["handle"],t),_(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function f1(n){const e={},t=_(n,["handle"]);t!==void 0&&y(e,["handle"],t);const r=_(n,["transparent"]);return r!==void 0&&y(e,["transparent"],r),e}function Hc(n,e){const t={},r=_(e,["modality"]);r!=null&&y(t,["modality"],r);const o=_(e,["tokenCount"]);return o!=null&&y(t,["tokenCount"],o),t}function h1(n,e){const t={},r=_(e,["promptTokenCount"]);r!=null&&y(t,["promptTokenCount"],r);const o=_(e,["cachedContentTokenCount"]);o!=null&&y(t,["cachedContentTokenCount"],o);const l=_(e,["responseTokenCount"]);l!=null&&y(t,["responseTokenCount"],l);const c=_(e,["toolUsePromptTokenCount"]);c!=null&&y(t,["toolUsePromptTokenCount"],c);const h=_(e,["thoughtsTokenCount"]);h!=null&&y(t,["thoughtsTokenCount"],h);const p=_(e,["totalTokenCount"]);p!=null&&y(t,["totalTokenCount"],p);const g=_(e,["promptTokensDetails"]);g!=null&&(Array.isArray(g)?y(t,["promptTokensDetails"],g.map(b=>Hc(n,b))):y(t,["promptTokensDetails"],g));const T=_(e,["cacheTokensDetails"]);T!=null&&(Array.isArray(T)?y(t,["cacheTokensDetails"],T.map(b=>Hc(n,b))):y(t,["cacheTokensDetails"],T));const S=_(e,["responseTokensDetails"]);S!=null&&(Array.isArray(S)?y(t,["responseTokensDetails"],S.map(b=>Hc(n,b))):y(t,["responseTokensDetails"],S));const R=_(e,["toolUsePromptTokensDetails"]);return R!=null&&(Array.isArray(R)?y(t,["toolUsePromptTokensDetails"],R.map(b=>Hc(n,b))):y(t,["toolUsePromptTokensDetails"],R)),t}function Gc(n,e){const t={},r=_(e,["modality"]);r!=null&&y(t,["modality"],r);const o=_(e,["tokenCount"]);return o!=null&&y(t,["tokenCount"],o),t}function d1(n,e){const t={},r=_(e,["promptTokenCount"]);r!=null&&y(t,["promptTokenCount"],r);const o=_(e,["cachedContentTokenCount"]);o!=null&&y(t,["cachedContentTokenCount"],o);const l=_(e,["candidatesTokenCount"]);l!=null&&y(t,["responseTokenCount"],l);const c=_(e,["toolUsePromptTokenCount"]);c!=null&&y(t,["toolUsePromptTokenCount"],c);const h=_(e,["thoughtsTokenCount"]);h!=null&&y(t,["thoughtsTokenCount"],h);const p=_(e,["totalTokenCount"]);p!=null&&y(t,["totalTokenCount"],p);const g=_(e,["promptTokensDetails"]);g!=null&&(Array.isArray(g)?y(t,["promptTokensDetails"],g.map(M=>Gc(n,M))):y(t,["promptTokensDetails"],g));const T=_(e,["cacheTokensDetails"]);T!=null&&(Array.isArray(T)?y(t,["cacheTokensDetails"],T.map(M=>Gc(n,M))):y(t,["cacheTokensDetails"],T));const S=_(e,["toolUsePromptTokensDetails"]);S!=null&&(Array.isArray(S)?y(t,["toolUsePromptTokensDetails"],S.map(M=>Gc(n,M))):y(t,["toolUsePromptTokensDetails"],S));const R=_(e,["candidatesTokensDetails"]);R!=null&&(Array.isArray(R)?y(t,["responseTokensDetails"],R.map(M=>Gc(n,M))):y(t,["responseTokensDetails"],R));const b=_(e,["trafficType"]);return b!=null&&y(t,["trafficType"],b),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function m1(n,e,t){let r,o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),n.isVertexAI()?r=FM(n,o):r=BM(n,o),e(r)}class g1{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const h=T1(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const J=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${J}`}let p=()=>{};const g=new Promise(J=>{p=J}),T=e.callbacks,S=function(){var J;(J=T==null?void 0:T.onopen)===null||J===void 0||J.call(T),p({})},R=this.apiClient,b={onopen:S,onmessage:J=>{m1(R,T.onmessage,J)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(J){},onclose:(r=T==null?void 0:T.onclose)!==null&&r!==void 0?r:function(J){}},M=this.webSocketFactory.create(c,v1(h),b);M.connect(),await g;let z=sn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const J=this.apiClient.getProject(),W=this.apiClient.getLocation();z=`projects/${J}/locations/${W}/`+z}let q={};const $={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=qM(this.apiClient,$):q=LM(this.apiClient,$),M.send(JSON.stringify(q)),new _1(M,this.apiClient)}}const y1={turnComplete:!0};class _1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=_t(e,t.turns),e.isVertexAI()?r=r.map(o=>Zs(e,o)):r=r.map(o=>uu(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClientRealtimeInput(e,t){let r={};if(!("media"in t)||!t.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof t.media}'`);return r={realtimeInput:{mediaChunks:[t.media],activityStart:t.activityStart,activityEnd:t.activityEnd}},r}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(p1)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},y1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){if(e.media==null)throw new Error("Media is required.");const t=this.tLiveClientRealtimeInput(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function v1(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function T1(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E1 extends Hf{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var o;let l;const c=[];if(r!=null&&r.generatedImages)for(const p of r.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l}:h={generatedImages:c},h})}async generateContentInternal(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=RT(this.apiClient,e);return l=Ke("{model}:generateContent",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>{const g=DT(this.apiClient,p),T=new zc;return Object.assign(T,g),T})}else{const h=wT(this.apiClient,e);return l=Ke("{model}:generateContent",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>{const g=IT(this.apiClient,p),T=new zc;return Object.assign(T,g),T})}}async generateContentStreamInternal(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=RT(this.apiClient,e);l=Ke("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const p=this.apiClient;return o=p.requestStream({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}),o.then(function(g){return vf(this,arguments,function*(){var T,S,R,b;try{for(var M=!0,z=Vp(g),q;q=yield yn(z.next()),T=q.done,!T;M=!0){b=q.value,M=!1;const J=DT(p,b),W=new zc;Object.assign(W,J),yield yield yn(W)}}catch($){S={error:$}}finally{try{!M&&!T&&(R=z.return)&&(yield yn(R.call(z)))}finally{if(S)throw S.error}}})})}else{const h=wT(this.apiClient,e);l=Ke("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const p=this.apiClient;return o=p.requestStream({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}),o.then(function(g){return vf(this,arguments,function*(){var T,S,R,b;try{for(var M=!0,z=Vp(g),q;q=yield yn(z.next()),T=q.done,!T;M=!0){b=q.value,M=!1;const J=IT(p,b),W=new zc;Object.assign(W,J),yield yield yn(W)}}catch($){S={error:$}}finally{try{!M&&!T&&(R=z.return)&&(yield yn(R.call(z)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=XD(this.apiClient,e);return l=Ke("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>{const g=RM(this.apiClient,p),T=new vT;return Object.assign(T,g),T})}else{const h=RD(this.apiClient,e);return l=Ke("{model}:batchEmbedContents",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>{const g=cM(this.apiClient,p),T=new vT;return Object.assign(T,g),T})}}async generateImagesInternal(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=WD(this.apiClient,e);return l=Ke("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>{const g=DM(this.apiClient,p),T=new TT;return Object.assign(T,g),T})}else{const h=bD(this.apiClient,e);return l=Ke("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>{const g=dM(this.apiClient,p),T=new TT;return Object.assign(T,g),T})}}async get(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=JD(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>xM(this.apiClient,p))}else{const h=DD(this.apiClient,e);return l=Ke("{name}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>mM(this.apiClient,p))}}async countTokens(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=eM(this.apiClient,e);return l=Ke("{model}:countTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>{const g=PM(this.apiClient,p),T=new ET;return Object.assign(T,g),T})}else{const h=ND(this.apiClient,e);return l=Ke("{model}:countTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>{const g=gM(this.apiClient,p),T=new ET;return Object.assign(T,g),T})}}async computeTokens(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=tM(this.apiClient,e);return o=Ke("{model}:computeTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(h=>{const p=VM(this.apiClient,h),g=new Hb;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=rM(this.apiClient,e);return l=Ke("{model}:predictLongRunning",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>UM(this.apiClient,p))}else{const h=VD(this.apiClient,e);return l=Ke("{model}:predictLongRunning",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>vM(this.apiClient,p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A1(n,e){const t={},r=_(e,["operationName"]);r!=null&&y(t,["_url","operationName"],r);const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function S1(n,e){const t={},r=_(e,["operationName"]);r!=null&&y(t,["_url","operationName"],r);const o=_(e,["config"]);return o!=null&&y(t,["config"],o),t}function C1(n,e){const t={},r=_(e,["operationName"]);r!=null&&y(t,["operationName"],r);const o=_(e,["resourceName"]);o!=null&&y(t,["_url","resourceName"],o);const l=_(e,["config"]);return l!=null&&y(t,["config"],l),t}function w1(n,e){const t={},r=_(e,["video","uri"]);r!=null&&y(t,["uri"],r);const o=_(e,["video","encodedVideo"]);o!=null&&y(t,["videoBytes"],ls(n,o));const l=_(e,["encoding"]);return l!=null&&y(t,["mimeType"],l),t}function R1(n,e){const t={},r=_(e,["_self"]);return r!=null&&y(t,["video"],w1(n,r)),t}function NT(n,e){const t={},r=_(e,["generatedSamples"]);r!=null&&(Array.isArray(r)?y(t,["generatedVideos"],r.map(c=>R1(n,c))):y(t,["generatedVideos"],r));const o=_(e,["raiMediaFilteredCount"]);o!=null&&y(t,["raiMediaFilteredCount"],o);const l=_(e,["raiMediaFilteredReasons"]);return l!=null&&y(t,["raiMediaFilteredReasons"],l),t}function I1(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["metadata"]);o!=null&&y(t,["metadata"],o);const l=_(e,["done"]);l!=null&&y(t,["done"],l);const c=_(e,["error"]);c!=null&&y(t,["error"],c);const h=_(e,["response","generateVideoResponse"]);h!=null&&y(t,["response"],NT(n,h));const p=_(e,["response","generateVideoResponse"]);return p!=null&&y(t,["result"],NT(n,p)),t}function b1(n,e){const t={},r=_(e,["gcsUri"]);r!=null&&y(t,["uri"],r);const o=_(e,["bytesBase64Encoded"]);o!=null&&y(t,["videoBytes"],ls(n,o));const l=_(e,["mimeType"]);return l!=null&&y(t,["mimeType"],l),t}function D1(n,e){const t={},r=_(e,["_self"]);return r!=null&&y(t,["video"],b1(n,r)),t}function xT(n,e){const t={},r=_(e,["videos"]);r!=null&&(Array.isArray(r)?y(t,["generatedVideos"],r.map(c=>D1(n,c))):y(t,["generatedVideos"],r));const o=_(e,["raiMediaFilteredCount"]);o!=null&&y(t,["raiMediaFilteredCount"],o);const l=_(e,["raiMediaFilteredReasons"]);return l!=null&&y(t,["raiMediaFilteredReasons"],l),t}function PT(n,e){const t={},r=_(e,["name"]);r!=null&&y(t,["name"],r);const o=_(e,["metadata"]);o!=null&&y(t,["metadata"],o);const l=_(e,["done"]);l!=null&&y(t,["done"],l);const c=_(e,["error"]);c!=null&&y(t,["error"],c);const h=_(e,["response"]);h!=null&&y(t,["response"],xT(n,h));const p=_(e,["response"]);return p!=null&&y(t,["result"],xT(n,p)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M1 extends Hf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=t.name.split("/operations/")[0];var o=void 0;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:l,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=S1(this.apiClient,e);return l=Ke("{operationName}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(p=>p.json()),o.then(p=>PT(this.apiClient,p))}else{const h=A1(this.apiClient,e);return l=Ke("{operationName}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(p=>p.json()),o.then(p=>I1(this.apiClient,p))}}async fetchPredictVideosOperationInternal(e){var t;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=C1(this.apiClient,e);return o=Ke("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(h=>h.json()),r.then(h=>PT(this.apiClient,h))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1="Content-Type",x1="X-Server-Timeout",P1="User-Agent",V1="x-goog-api-client",O1="0.8.0",k1=`google-genai-sdk/${O1}`,U1="v1beta1",L1="v1beta",VT=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class q1 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class OT extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class B1{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:U1,this.getProject()||this.getLocation()?(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(o.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:L1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const o=[this.getRequestUrlInternal(t)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))o.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?r[o]=Object.assign(Object.assign({},r[o]),l):l!==void 0&&(r[o]=l);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t){if(t&&t.timeout&&t.timeout>0){const r=new AbortController,o=r.signal;setTimeout(()=>r.abort(),t.timeout),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await kT(o),new Q0(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async o=>(await kT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return vf(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:p}=yield yn(o.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=l.decode(p);c+=g;let T=c.match(VT);for(;T;){const S=T[1];try{const R=JSON.parse(S);yield yield yn(R),c=c.slice(T[0].length),T=c.match(VT)}catch(R){throw new Error(`exception parsing stream chunk ${S}. ${R}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=k1+" "+this.clientOptions.userAgentExtra;return e[P1]=t,e[V1]=t,e[N1]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))t.append(r,o);e.timeout&&e.timeout>0&&t.append(x1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const h=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async fetchUploadUrl(e,t){var r;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:Ke("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function kT(n){var e;if(n===void 0)throw new OT("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:"exception parsing response",code:n.status,status:n.statusText}};const l=`got status: ${t} ${r}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new q1(l):t>=500&&t<600?new OT(l):new Error(l)}}const F1=1024*1024*8;async function z1(n,e,t){var r,o;let l=0,c=0,h=new Q0(new Response),p="upload";for(l=n.size;c<l;){const T=Math.min(F1,l-c),S=n.slice(c,c+T);if(c+T>=l&&(p+=", finalize"),h=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(T)}}}),c+=T,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=await(h==null?void 0:h.json());if(((o=h==null?void 0:h.headers)===null||o===void 0?void 0:o["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file}async function H1(n){return{size:n.size,type:n.type}}class G1{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await z1(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await H1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K1{create(e,t,r){return new Y1(e,t,r)}}class Y1{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UT="x-goog-api-key";class $1{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(UT)===null&&e.append(UT,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q1="gl-node/";class nA{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey,this.apiVersion=e.apiVersion;const r=new $1(this.apiKey);this.apiClient=new B1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Q1+"web",uploader:new G1}),this.models=new E1(this.apiClient),this.live=new g1(this.apiClient,r,new K1),this.chats=new Wb(this.models,this.apiClient),this.caches=new $b(this.apiClient),this.files=new cD(this.apiClient),this.operations=new M1(this.apiClient)}}const X1=()=>{};var LT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},j1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,T=l>>2,S=(l&3)<<4|h>>4;let R=(h&15)<<2|g>>6,b=g&63;p||(b=64,c||(R=64)),r.push(t[T],t[S],t[R],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):j1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const S=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||g==null||S==null)throw new W1;const R=l<<2|h>>4;if(r.push(R),g!==64){const b=h<<4&240|g>>2;if(r.push(b),S!==64){const M=g<<6&192|S;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class W1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J1=function(n){const e=iA(n);return rA.encodeByteArray(e,!0)},Tf=function(n){return J1(n).replace(/\./g,"")},sA=function(n){try{return rA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=()=>Z1().__FIREBASE_DEFAULTS__,tN=()=>{if(typeof process>"u"||typeof LT>"u")return;const n=LT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sA(n[1]);return e&&JSON.parse(e)},Gf=()=>{try{return X1()||eN()||tN()||nN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oA=n=>{var e,t;return(t=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},iN=n=>{const e=oA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aA=()=>{var n;return(n=Gf())===null||n===void 0?void 0:n.config},lA=n=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Tf(JSON.stringify(t)),Tf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function aN(){var n;const e=(n=Gf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cN(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fN(){return!aN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cA(){try{return typeof indexedDB=="object"}catch{return!1}}function fA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function hN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="FirebaseError";class ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dN,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?pN(l,r):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new ni(o,h,r)}}function pN(n,e){return n.replace(mN,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const mN=/\{\$([^}]+)}/g;function gN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=n[o],c=e[o];if(qT(l)&&qT(c)){if(!Zr(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function qT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yN(n,e){const t=new _N(n,e);return t.subscribe.bind(t)}class _N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=yp),o.error===void 0&&(o.error=yp),o.complete===void 0&&(o.complete=yp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1e3,EN=2,AN=4*60*60*1e3,SN=.5;function BT(n,e=TN,t=EN){const r=e*Math.pow(t,n),o=Math.round(SN*r*(Math.random()-.5)*2);return Math.min(AN,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class ei{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new rN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RN(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wN(n){return n===Gs?void 0:n}function RN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const bN={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},DN=Ue.INFO,MN={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},NN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=MN[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=DN,this._logHandler=NN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const xN=(n,e)=>e.some(t=>n instanceof t);let FT,zT;function PN(){return FT||(FT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VN(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hA=new WeakMap,kp=new WeakMap,dA=new WeakMap,_p=new WeakMap,ym=new WeakMap;function ON(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Qr(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&hA.set(t,n)}).catch(()=>{}),ym.set(e,n),e}function kN(n){if(kp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});kp.set(n,e)}let Up={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UN(n){Up=n(Up)}function LN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(vp(this),e,...t);return dA.set(r,e.sort?e.sort():[e]),Qr(r)}:VN().includes(n)?function(...e){return n.apply(vp(this),e),Qr(hA.get(this))}:function(...e){return Qr(n.apply(vp(this),e))}}function qN(n){return typeof n=="function"?LN(n):(n instanceof IDBTransaction&&kN(n),xN(n,PN())?new Proxy(n,Up):n)}function Qr(n){if(n instanceof IDBRequest)return ON(n);if(_p.has(n))return _p.get(n);const e=qN(n);return e!==n&&(_p.set(n,e),ym.set(e,n)),e}const vp=n=>ym.get(n);function pA(n,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=Qr(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Qr(c.result),p.oldVersion,p.newVersion,Qr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const BN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],Tp=new Map;function HT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=FN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||BN.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),o&&p.done]))[0]};return Tp.set(e,l),l}UN(n=>({...n,get:(e,t,r)=>HT(e,t)||n.get(e,t,r),has:(e,t)=>!!HT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lp="@firebase/app",GT="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Kf("@firebase/app"),GN="@firebase/app-compat",KN="@firebase/analytics-compat",YN="@firebase/analytics",$N="@firebase/app-check-compat",QN="@firebase/app-check",XN="@firebase/auth",jN="@firebase/auth-compat",WN="@firebase/database",JN="@firebase/data-connect",ZN="@firebase/database-compat",ex="@firebase/functions",tx="@firebase/functions-compat",nx="@firebase/installations",ix="@firebase/installations-compat",rx="@firebase/messaging",sx="@firebase/messaging-compat",ox="@firebase/performance",ax="@firebase/performance-compat",lx="@firebase/remote-config",ux="@firebase/remote-config-compat",cx="@firebase/storage",fx="@firebase/storage-compat",hx="@firebase/firestore",dx="@firebase/vertexai",px="@firebase/firestore-compat",mx="firebase",gx="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",yx={[Lp]:"fire-core",[GN]:"fire-core-compat",[YN]:"fire-analytics",[KN]:"fire-analytics-compat",[QN]:"fire-app-check",[$N]:"fire-app-check-compat",[XN]:"fire-auth",[jN]:"fire-auth-compat",[WN]:"fire-rtdb",[JN]:"fire-data-connect",[ZN]:"fire-rtdb-compat",[ex]:"fire-fn",[tx]:"fire-fn-compat",[nx]:"fire-iid",[ix]:"fire-iid-compat",[rx]:"fire-fcm",[sx]:"fire-fcm-compat",[ox]:"fire-perf",[ax]:"fire-perf-compat",[lx]:"fire-rc",[ux]:"fire-rc-compat",[cx]:"fire-gcs",[fx]:"fire-gcs-compat",[hx]:"fire-fst",[px]:"fire-fst-compat",[dx]:"fire-vertex","fire-js":"fire-js",[mx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new Map,_x=new Map,Bp=new Map;function KT(n,e){try{n.container.addComponent(e)}catch(t){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ii(n){const e=n.name;if(Bp.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,n);for(const t of Ef.values())KT(t,n);for(const t of _x.values())KT(t,n);return!0}function to(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ti(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new eo("app","Firebase",vx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=gx;function mA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qp,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Xr.create("bad-app-name",{appName:String(o)});if(t||(t=aA()),!t)throw Xr.create("no-options");const l=Ef.get(o);if(l){if(Zr(t,l.options)&&Zr(r,l.config))return l;throw Xr.create("duplicate-app",{appName:o})}const c=new IN(o);for(const p of Bp.values())c.addComponent(p);const h=new Tx(t,r,c);return Ef.set(o,h),h}function _m(n=qp){const e=Ef.get(n);if(!e&&n===qp&&aA())return mA();if(!e)throw Xr.create("no-app",{appName:n});return e}function Gn(n,e,t){var r;let o=(r=yx[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(h.join(" "));return}Ii(new ei(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firebase-heartbeat-database",Ax=1,jl="firebase-heartbeat-store";let Ep=null;function gA(){return Ep||(Ep=pA(Ex,Ax,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xr.create("idb-open",{originalErrorMessage:n.message})})),Ep}async function Sx(n){try{const t=(await gA()).transaction(jl),r=await t.objectStore(jl).get(yA(n));return await t.done,r}catch(e){if(e instanceof ni)ar.warn(e.message);else{const t=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(t.message)}}}async function YT(n,e){try{const r=(await gA()).transaction(jl,"readwrite");await r.objectStore(jl).put(e,yA(n)),await r.done}catch(t){if(t instanceof ni)ar.warn(t.message);else{const r=Xr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ar.warn(r.message)}}}function yA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=1024,wx=30;class Rx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$T();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>wx){const c=Dx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$T(),{heartbeatsToSend:r,unsentEntries:o}=Ix(this._heartbeatsCache.heartbeats),l=Tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ar.warn(t),""}}}function $T(){return new Date().toISOString().substring(0,10)}function Ix(n,e=Cx){const t=[];let r=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),QT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),QT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cA()?fA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Sx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return YT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return YT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function QT(n){return Tf(JSON.stringify({version:2,heartbeats:n})).length}function Dx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){Ii(new ei("platform-logger",e=>new zN(e),"PRIVATE")),Ii(new ei("heartbeat",e=>new Rx(e),"PRIVATE")),Gn(Lp,GT,n),Gn(Lp,GT,"esm2017"),Gn("fire-js","")}Mx("");var Nx="firebase",xx="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(Nx,xx,"app");const _A="@firebase/installations",vm="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=1e4,TA=`w:${vm}`,EA="FIS_v2",Px="https://firebaseinstallations.googleapis.com/v1",Vx=60*60*1e3,Ox="installations",kx="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qs=new eo(Ox,kx,Ux);function AA(n){return n instanceof ni&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA({projectId:n}){return`${Px}/projects/${n}/installations`}function CA(n){return{token:n.token,requestStatus:2,expiresIn:qx(n.expiresIn),creationTime:Date.now()}}async function wA(n,e){const r=(await e.json()).error;return Qs.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function RA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Lx(n,{refreshToken:e}){const t=RA(n);return t.append("Authorization",Bx(e)),t}async function IA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function qx(n){return Number(n.replace("s","000"))}function Bx(n){return`${EA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=SA(n),o=RA(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const c={fid:t,authVersion:EA,appId:n.appId,sdkVersion:TA},h={method:"POST",headers:o,body:JSON.stringify(c)},p=await IA(()=>fetch(r,h));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:CA(g.authToken)}}else throw await wA("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=/^[cdef][\w-]{21}$/,Fp="";function Gx(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Kx(n);return Hx.test(t)?t:Fp}catch{return Fp}}function Kx(n){return zx(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new Map;function MA(n,e){const t=Yf(n);NA(t,e),Yx(t,e)}function NA(n,e){const t=DA.get(n);if(t)for(const r of t)r(e)}function Yx(n,e){const t=$x();t&&t.postMessage({key:n,fid:e}),Qx()}let Ks=null;function $x(){return!Ks&&"BroadcastChannel"in self&&(Ks=new BroadcastChannel("[Firebase] FID Change"),Ks.onmessage=n=>{NA(n.data.key,n.data.fid)}),Ks}function Qx(){DA.size===0&&Ks&&(Ks.close(),Ks=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebase-installations-database",jx=1,Xs="firebase-installations-store";let Ap=null;function Tm(){return Ap||(Ap=pA(Xx,jx,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Xs)}}})),Ap}async function Af(n,e){const t=Yf(n),o=(await Tm()).transaction(Xs,"readwrite"),l=o.objectStore(Xs),c=await l.get(t);return await l.put(e,t),await o.done,(!c||c.fid!==e.fid)&&MA(n,e.fid),e}async function xA(n){const e=Yf(n),r=(await Tm()).transaction(Xs,"readwrite");await r.objectStore(Xs).delete(e),await r.done}async function $f(n,e){const t=Yf(n),o=(await Tm()).transaction(Xs,"readwrite"),l=o.objectStore(Xs),c=await l.get(t),h=e(c);return h===void 0?await l.delete(t):await l.put(h,t),await o.done,h&&(!c||c.fid!==h.fid)&&MA(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(n){let e;const t=await $f(n.appConfig,r=>{const o=Wx(r),l=Jx(n,o);return e=l.registrationPromise,l.installationEntry});return t.fid===Fp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Wx(n){const e=n||{fid:Gx(),registrationStatus:0};return PA(e)}function Jx(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Qs.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Zx(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eP(n)}:{installationEntry:e}}async function Zx(n,e){try{const t=await Fx(n,e);return Af(n.appConfig,t)}catch(t){throw AA(t)&&t.customData.serverCode===409?await xA(n.appConfig):await Af(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function eP(n){let e=await XT(n.appConfig);for(;e.registrationStatus===1;)await bA(100),e=await XT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Em(n);return r||t}return e}function XT(n){return $f(n,e=>{if(!e)throw Qs.create("installation-not-found");return PA(e)})}function PA(n){return tP(n)?{fid:n.fid,registrationStatus:0}:n}function tP(n){return n.registrationStatus===1&&n.registrationTime+vA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP({appConfig:n,heartbeatServiceProvider:e},t){const r=iP(n,t),o=Lx(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const c={installation:{sdkVersion:TA,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(c)},p=await IA(()=>fetch(r,h));if(p.ok){const g=await p.json();return CA(g)}else throw await wA("Generate Auth Token",p)}function iP(n,{fid:e}){return`${SA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(n,e=!1){let t;const r=await $f(n.appConfig,l=>{if(!VA(l))throw Qs.create("not-registered");const c=l.authToken;if(!e&&oP(c))return l;if(c.requestStatus===1)return t=rP(n,e),l;{if(!navigator.onLine)throw Qs.create("app-offline");const h=lP(l);return t=sP(n,h),h}});return t?await t:r.authToken}async function rP(n,e){let t=await jT(n.appConfig);for(;t.authToken.requestStatus===1;)await bA(100),t=await jT(n.appConfig);const r=t.authToken;return r.requestStatus===0?Am(n,e):r}function jT(n){return $f(n,e=>{if(!VA(e))throw Qs.create("not-registered");const t=e.authToken;return uP(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sP(n,e){try{const t=await nP(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Af(n.appConfig,r),t}catch(t){if(AA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await xA(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Af(n.appConfig,r)}throw t}}function VA(n){return n!==void 0&&n.registrationStatus===2}function oP(n){return n.requestStatus===2&&!aP(n)}function aP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Vx}function lP(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function uP(n){return n.requestStatus===1&&n.requestTime+vA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n){const e=n,{installationEntry:t,registrationPromise:r}=await Em(e);return r?r.catch(console.error):Am(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(n,e=!1){const t=n;return await hP(t),(await Am(t,e)).token}async function hP(n){const{registrationPromise:e}=await Em(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){if(!n||!n.options)throw Sp("App Configuration");if(!n.name)throw Sp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Sp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Sp(n){return Qs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="installations",pP="installations-internal",mP=n=>{const e=n.getProvider("app").getImmediate(),t=dP(e),r=to(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gP=n=>{const e=n.getProvider("app").getImmediate(),t=to(e,OA).getImmediate();return{getId:()=>cP(t),getToken:o=>fP(t,o)}};function yP(){Ii(new ei(OA,mP,"PUBLIC")),Ii(new ei(pP,gP,"PRIVATE"))}yP();Gn(_A,vm);Gn(_A,vm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="analytics",_P="firebase_id",vP="origin",TP=60*1e3,EP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Kf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dn=new eo("analytics","Analytics",AP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){if(!n.startsWith(Sm)){const e=Dn.create("invalid-gtag-resource",{gtagURL:n});return _n.warn(e.message),""}return n}function kA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function CP(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function wP(n,e){const t=CP("firebase-js-sdk-policy",{createScriptURL:SP}),r=document.createElement("script"),o=`${Sm}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function RP(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function IP(n,e,t,r,o,l){const c=r[o];try{if(c)await e[c];else{const p=(await kA(t)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(h){_n.error(h)}n("config",o,l)}async function bP(n,e,t,r,o){try{let l=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const h=await kA(t);for(const p of c){const g=h.find(S=>S.measurementId===p),T=g&&e[g.appId];if(T)l.push(T);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",r,o||{})}catch(l){_n.error(l)}}function DP(n,e,t,r){async function o(l,...c){try{if(l==="event"){const[h,p]=c;await bP(n,e,t,h,p)}else if(l==="config"){const[h,p]=c;await IP(n,e,t,r,h,p)}else if(l==="consent"){const[h,p]=c;n("consent",h,p)}else if(l==="get"){const[h,p,g]=c;n("get",h,p,g)}else if(l==="set"){const[h]=c;n("set",h)}else n(l,...c)}catch(h){_n.error(h)}}return o}function MP(n,e,t,r,o){let l=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=DP(l,n,e,t),{gtagCore:l,wrappedGtag:window[o]}}function NP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Sm)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=30,PP=1e3;class VP{constructor(e={},t=PP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const UA=new VP;function OP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function kP(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:OP(r)},l=EP.replace("{app-id}",t),c=await fetch(l,o);if(c.status!==200&&c.status!==304){let h="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(h=p.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:h})}return c.json()}async function UP(n,e=UA,t){const{appId:r,apiKey:o,measurementId:l}=n.options;if(!r)throw Dn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:r};throw Dn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new BP;return setTimeout(async()=>{h.abort()},TP),LA({appId:r,apiKey:o,measurementId:l},c,h,e)}async function LA(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=UA){var l;const{appId:c,measurementId:h}=n;try{await LP(r,e)}catch(p){if(h)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:c,measurementId:h};throw p}try{const p=await kP(n);return o.deleteThrottleMetadata(c),p}catch(p){const g=p;if(!qP(g)){if(o.deleteThrottleMetadata(c),h)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:h};throw p}const T=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?BT(t,o.intervalMillis,xP):BT(t,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+T,backoffCount:t+1};return o.setThrottleMetadata(c,S),_n.debug(`Calling attemptFetch again in ${T} millis`),LA(n,S,r,o)}}function LP(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(l),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function qP(n){if(!(n instanceof ni)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class BP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FP(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const l=await e,c=Object.assign(Object.assign({},r),{send_to:l});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(){if(cA())try{await fA()}catch(n){return _n.warn(Dn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return _n.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function HP(n,e,t,r,o,l,c){var h;const p=UP(n);p.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>_n.error(b)),e.push(p);const g=zP().then(b=>{if(b)return r.getId()}),[T,S]=await Promise.all([p,g]);NP(l)||wP(l,T.measurementId),o("js",new Date);const R=(h=c==null?void 0:c.config)!==null&&h!==void 0?h:{};return R[vP]="firebase",R.update=!0,S!=null&&(R[_P]=S),o("config",T.measurementId,R),T.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.app=e}_delete(){return delete zl[this.app.options.appId],Promise.resolve()}}let zl={},WT=[];const JT={};let Cp="dataLayer",KP="gtag",ZT,qA,eE=!1;function YP(){const n=[];if(uA()&&n.push("This is a browser extension environment."),hN()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Dn.create("invalid-analytics-context",{errorInfo:e});_n.warn(t.message)}}function $P(n,e,t){YP();const r=n.options.appId;if(!r)throw Dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(zl[r]!=null)throw Dn.create("already-exists",{id:r});if(!eE){RP(Cp);const{wrappedGtag:l,gtagCore:c}=MP(zl,WT,JT,Cp,KP);qA=l,ZT=c,eE=!0}return zl[r]=HP(n,WT,JT,e,ZT,Cp,t),new GP(n)}function QP(n=_m()){n=vn(n);const e=to(n,Sf);return e.isInitialized()?e.getImmediate():XP(n)}function XP(n,e={}){const t=to(n,Sf);if(t.isInitialized()){const o=t.getImmediate();if(Zr(e,t.getOptions()))return o;throw Dn.create("already-initialized")}return t.initialize({options:e})}function jP(n,e,t,r){n=vn(n),FP(qA,zl[n.app.options.appId],e,t,r).catch(o=>_n.error(o))}const tE="@firebase/analytics",nE="0.10.12";function WP(){Ii(new ei(Sf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return $P(r,o,t)},"PUBLIC")),Ii(new ei("analytics-internal",n,"PRIVATE")),Gn(tE,nE),Gn(tE,nE,"esm2017");function n(e){try{const t=e.getProvider(Sf).getImmediate();return{logEvent:(r,o,l)=>jP(t,r,o,l)}}catch(t){throw Dn.create("interop-component-reg-failed",{reason:t})}}}WP();var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,BA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function D(){}D.prototype=I.prototype,P.D=I.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(V,U,L){for(var x=Array(arguments.length-2),We=2;We<arguments.length;We++)x[We-2]=arguments[We];return I.prototype[U].apply(V,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,D){D||(D=0);var V=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)V[U]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(U=0;16>U;++U)V[U]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=P.g[0],D=P.g[1],U=P.g[2];var L=P.g[3],x=I+(L^D&(U^L))+V[0]+3614090360&4294967295;I=D+(x<<7&4294967295|x>>>25),x=L+(U^I&(D^U))+V[1]+3905402710&4294967295,L=I+(x<<12&4294967295|x>>>20),x=U+(D^L&(I^D))+V[2]+606105819&4294967295,U=L+(x<<17&4294967295|x>>>15),x=D+(I^U&(L^I))+V[3]+3250441966&4294967295,D=U+(x<<22&4294967295|x>>>10),x=I+(L^D&(U^L))+V[4]+4118548399&4294967295,I=D+(x<<7&4294967295|x>>>25),x=L+(U^I&(D^U))+V[5]+1200080426&4294967295,L=I+(x<<12&4294967295|x>>>20),x=U+(D^L&(I^D))+V[6]+2821735955&4294967295,U=L+(x<<17&4294967295|x>>>15),x=D+(I^U&(L^I))+V[7]+4249261313&4294967295,D=U+(x<<22&4294967295|x>>>10),x=I+(L^D&(U^L))+V[8]+1770035416&4294967295,I=D+(x<<7&4294967295|x>>>25),x=L+(U^I&(D^U))+V[9]+2336552879&4294967295,L=I+(x<<12&4294967295|x>>>20),x=U+(D^L&(I^D))+V[10]+4294925233&4294967295,U=L+(x<<17&4294967295|x>>>15),x=D+(I^U&(L^I))+V[11]+2304563134&4294967295,D=U+(x<<22&4294967295|x>>>10),x=I+(L^D&(U^L))+V[12]+1804603682&4294967295,I=D+(x<<7&4294967295|x>>>25),x=L+(U^I&(D^U))+V[13]+4254626195&4294967295,L=I+(x<<12&4294967295|x>>>20),x=U+(D^L&(I^D))+V[14]+2792965006&4294967295,U=L+(x<<17&4294967295|x>>>15),x=D+(I^U&(L^I))+V[15]+1236535329&4294967295,D=U+(x<<22&4294967295|x>>>10),x=I+(U^L&(D^U))+V[1]+4129170786&4294967295,I=D+(x<<5&4294967295|x>>>27),x=L+(D^U&(I^D))+V[6]+3225465664&4294967295,L=I+(x<<9&4294967295|x>>>23),x=U+(I^D&(L^I))+V[11]+643717713&4294967295,U=L+(x<<14&4294967295|x>>>18),x=D+(L^I&(U^L))+V[0]+3921069994&4294967295,D=U+(x<<20&4294967295|x>>>12),x=I+(U^L&(D^U))+V[5]+3593408605&4294967295,I=D+(x<<5&4294967295|x>>>27),x=L+(D^U&(I^D))+V[10]+38016083&4294967295,L=I+(x<<9&4294967295|x>>>23),x=U+(I^D&(L^I))+V[15]+3634488961&4294967295,U=L+(x<<14&4294967295|x>>>18),x=D+(L^I&(U^L))+V[4]+3889429448&4294967295,D=U+(x<<20&4294967295|x>>>12),x=I+(U^L&(D^U))+V[9]+568446438&4294967295,I=D+(x<<5&4294967295|x>>>27),x=L+(D^U&(I^D))+V[14]+3275163606&4294967295,L=I+(x<<9&4294967295|x>>>23),x=U+(I^D&(L^I))+V[3]+4107603335&4294967295,U=L+(x<<14&4294967295|x>>>18),x=D+(L^I&(U^L))+V[8]+1163531501&4294967295,D=U+(x<<20&4294967295|x>>>12),x=I+(U^L&(D^U))+V[13]+2850285829&4294967295,I=D+(x<<5&4294967295|x>>>27),x=L+(D^U&(I^D))+V[2]+4243563512&4294967295,L=I+(x<<9&4294967295|x>>>23),x=U+(I^D&(L^I))+V[7]+1735328473&4294967295,U=L+(x<<14&4294967295|x>>>18),x=D+(L^I&(U^L))+V[12]+2368359562&4294967295,D=U+(x<<20&4294967295|x>>>12),x=I+(D^U^L)+V[5]+4294588738&4294967295,I=D+(x<<4&4294967295|x>>>28),x=L+(I^D^U)+V[8]+2272392833&4294967295,L=I+(x<<11&4294967295|x>>>21),x=U+(L^I^D)+V[11]+1839030562&4294967295,U=L+(x<<16&4294967295|x>>>16),x=D+(U^L^I)+V[14]+4259657740&4294967295,D=U+(x<<23&4294967295|x>>>9),x=I+(D^U^L)+V[1]+2763975236&4294967295,I=D+(x<<4&4294967295|x>>>28),x=L+(I^D^U)+V[4]+1272893353&4294967295,L=I+(x<<11&4294967295|x>>>21),x=U+(L^I^D)+V[7]+4139469664&4294967295,U=L+(x<<16&4294967295|x>>>16),x=D+(U^L^I)+V[10]+3200236656&4294967295,D=U+(x<<23&4294967295|x>>>9),x=I+(D^U^L)+V[13]+681279174&4294967295,I=D+(x<<4&4294967295|x>>>28),x=L+(I^D^U)+V[0]+3936430074&4294967295,L=I+(x<<11&4294967295|x>>>21),x=U+(L^I^D)+V[3]+3572445317&4294967295,U=L+(x<<16&4294967295|x>>>16),x=D+(U^L^I)+V[6]+76029189&4294967295,D=U+(x<<23&4294967295|x>>>9),x=I+(D^U^L)+V[9]+3654602809&4294967295,I=D+(x<<4&4294967295|x>>>28),x=L+(I^D^U)+V[12]+3873151461&4294967295,L=I+(x<<11&4294967295|x>>>21),x=U+(L^I^D)+V[15]+530742520&4294967295,U=L+(x<<16&4294967295|x>>>16),x=D+(U^L^I)+V[2]+3299628645&4294967295,D=U+(x<<23&4294967295|x>>>9),x=I+(U^(D|~L))+V[0]+4096336452&4294967295,I=D+(x<<6&4294967295|x>>>26),x=L+(D^(I|~U))+V[7]+1126891415&4294967295,L=I+(x<<10&4294967295|x>>>22),x=U+(I^(L|~D))+V[14]+2878612391&4294967295,U=L+(x<<15&4294967295|x>>>17),x=D+(L^(U|~I))+V[5]+4237533241&4294967295,D=U+(x<<21&4294967295|x>>>11),x=I+(U^(D|~L))+V[12]+1700485571&4294967295,I=D+(x<<6&4294967295|x>>>26),x=L+(D^(I|~U))+V[3]+2399980690&4294967295,L=I+(x<<10&4294967295|x>>>22),x=U+(I^(L|~D))+V[10]+4293915773&4294967295,U=L+(x<<15&4294967295|x>>>17),x=D+(L^(U|~I))+V[1]+2240044497&4294967295,D=U+(x<<21&4294967295|x>>>11),x=I+(U^(D|~L))+V[8]+1873313359&4294967295,I=D+(x<<6&4294967295|x>>>26),x=L+(D^(I|~U))+V[15]+4264355552&4294967295,L=I+(x<<10&4294967295|x>>>22),x=U+(I^(L|~D))+V[6]+2734768916&4294967295,U=L+(x<<15&4294967295|x>>>17),x=D+(L^(U|~I))+V[13]+1309151649&4294967295,D=U+(x<<21&4294967295|x>>>11),x=I+(U^(D|~L))+V[4]+4149444226&4294967295,I=D+(x<<6&4294967295|x>>>26),x=L+(D^(I|~U))+V[11]+3174756917&4294967295,L=I+(x<<10&4294967295|x>>>22),x=U+(I^(L|~D))+V[2]+718787259&4294967295,U=L+(x<<15&4294967295|x>>>17),x=D+(L^(U|~I))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(U+(x<<21&4294967295|x>>>11))&4294967295,P.g[2]=P.g[2]+U&4294967295,P.g[3]=P.g[3]+L&4294967295}r.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var D=I-this.blockSize,V=this.B,U=this.h,L=0;L<I;){if(U==0)for(;L<=D;)o(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<I;)if(V[U++]=P.charCodeAt(L++),U==this.blockSize){o(this,V),U=0;break}}else for(;L<I;)if(V[U++]=P[L++],U==this.blockSize){o(this,V),U=0;break}}this.h=U,this.o+=I},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var D=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=D&255,D/=256;for(this.u(P),P=Array(16),I=D=0;4>I;++I)for(var V=0;32>V;V+=8)P[D++]=this.g[I]>>>V&255;return P};function l(P,I){var D=h;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=I(P)}function c(P,I){this.h=I;for(var D=[],V=!0,U=P.length-1;0<=U;U--){var L=P[U]|0;V&&L==I||(D[U]=L,V=!1)}this.g=D}var h={};function p(P){return-128<=P&&128>P?l(P,function(I){return new c([I|0],0>I?-1:0)}):new c([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return S;if(0>P)return q(g(-P));for(var I=[],D=1,V=0;P>=D;V++)I[V]=P/D|0,D*=4294967296;return new c(I,0)}function T(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return q(T(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(I,8)),V=S,U=0;U<P.length;U+=8){var L=Math.min(8,P.length-U),x=parseInt(P.substring(U,U+L),I);8>L?(L=g(Math.pow(I,L)),V=V.j(L).add(g(x))):(V=V.j(D),V=V.add(g(x)))}return V}var S=p(0),R=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-q(this).m();for(var P=0,I=1,D=0;D<this.g.length;D++){var V=this.i(D);P+=(0<=V?V:4294967296+V)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(z(this))return"-"+q(this).toString(P);for(var I=g(Math.pow(P,6)),D=this,V="";;){var U=le(D,I).g;D=$(D,U.j(I));var L=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=U,M(D))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function z(P){return P.h==-1}n.l=function(P){return P=$(this,P),z(P)?-1:M(P)?0:1};function q(P){for(var I=P.g.length,D=[],V=0;V<I;V++)D[V]=~P.g[V];return new c(D,~P.h).add(R)}n.abs=function(){return z(this)?q(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],V=0,U=0;U<=I;U++){var L=V+(this.i(U)&65535)+(P.i(U)&65535),x=(L>>>16)+(this.i(U)>>>16)+(P.i(U)>>>16);V=x>>>16,L&=65535,x&=65535,D[U]=x<<16|L}return new c(D,D[D.length-1]&-2147483648?-1:0)};function $(P,I){return P.add(q(I))}n.j=function(P){if(M(this)||M(P))return S;if(z(this))return z(P)?q(this).j(q(P)):q(q(this).j(P));if(z(P))return q(this.j(q(P)));if(0>this.l(b)&&0>P.l(b))return g(this.m()*P.m());for(var I=this.g.length+P.g.length,D=[],V=0;V<2*I;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<P.g.length;U++){var L=this.i(V)>>>16,x=this.i(V)&65535,We=P.i(U)>>>16,Ye=P.i(U)&65535;D[2*V+2*U]+=x*Ye,J(D,2*V+2*U),D[2*V+2*U+1]+=L*Ye,J(D,2*V+2*U+1),D[2*V+2*U+1]+=x*We,J(D,2*V+2*U+1),D[2*V+2*U+2]+=L*We,J(D,2*V+2*U+2)}for(V=0;V<I;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=I;V<2*I;V++)D[V]=0;return new c(D,0)};function J(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function W(P,I){this.g=P,this.h=I}function le(P,I){if(M(I))throw Error("division by zero");if(M(P))return new W(S,S);if(z(P))return I=le(q(P),I),new W(q(I.g),q(I.h));if(z(I))return I=le(P,q(I)),new W(q(I.g),I.h);if(30<P.g.length){if(z(P)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var D=R,V=I;0>=V.l(P);)D=ce(D),V=ce(V);var U=ge(D,1),L=ge(V,1);for(V=ge(V,2),D=ge(D,2);!M(V);){var x=L.add(V);0>=x.l(P)&&(U=U.add(D),L=x),V=ge(V,1),D=ge(D,1)}return I=$(P,U.j(I)),new W(U,I)}for(U=S;0<=P.l(I);){for(D=Math.max(1,Math.floor(P.m()/I.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=g(D),x=L.j(I);z(x)||0<x.l(P);)D-=V,L=g(D),x=L.j(I);M(L)&&(L=R),U=U.add(L),P=$(P,x)}return new W(U,P)}n.A=function(P){return le(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)&P.i(V);return new c(D,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)|P.i(V);return new c(D,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)^P.i(V);return new c(D,this.h^P.h)};function ce(P){for(var I=P.g.length+1,D=[],V=0;V<I;V++)D[V]=P.i(V)<<1|P.i(V-1)>>>31;return new c(D,P.h)}function ge(P,I){var D=I>>5;I%=32;for(var V=P.g.length-D,U=[],L=0;L<V;L++)U[L]=0<I?P.i(L+D)>>>I|P.i(L+D+1)<<32-I:P.i(L+D);return new c(U,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=T,jr=c}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FA,Ll,zA,of,zp,HA,GA,KA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,E){return f==Array.prototype||f==Object.prototype||(f[v]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var v=0;v<f.length;++v){var E=f[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(f,v){if(v)e:{var E=r;f=f.split(".");for(var w=0;w<f.length-1;w++){var F=f[w];if(!(F in E))break e;E=E[F]}f=f[f.length-1],w=E[f],v=v(w),v!=w&&v!=null&&e(E,f,{configurable:!0,writable:!0,value:v})}}function l(f,v){f instanceof String&&(f+="");var E=0,w=!1,F={next:function(){if(!w&&E<f.length){var X=E++;return{value:v(X,f[X]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(f){return f||function(){return l(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function g(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function T(f,v,E){return f.call.apply(f.bind,arguments)}function S(f,v,E){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),f.apply(v,F)}}return function(){return f.apply(v,arguments)}}function R(f,v,E){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:S,R.apply(null,arguments)}function b(f,v){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function M(f,v){function E(){}E.prototype=v.prototype,f.aa=v.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(w,F,X){for(var oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)oe[Fe-2]=arguments[Fe];return v.prototype[F].apply(w,oe)}}function z(f){const v=f.length;if(0<v){const E=Array(v);for(let w=0;w<v;w++)E[w]=f[w];return E}return[]}function q(f,v){for(let E=1;E<arguments.length;E++){const w=arguments[E];if(p(w)){const F=f.length||0,X=w.length||0;f.length=F+X;for(let oe=0;oe<X;oe++)f[F+oe]=w[oe]}else f.push(w)}}class ${constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(f){return/^[\s\xa0]*$/.test(f)}function W(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function le(f){return le[" "](f),f}le[" "]=function(){};var ce=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ge(f,v,E){for(const w in f)v.call(E,f[w],w,f)}function P(f,v){for(const E in f)v.call(void 0,f[E],E,f)}function I(f){const v={};for(const E in f)v[E]=f[E];return v}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,v){let E,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(E in w)f[E]=w[E];for(let X=0;X<D.length;X++)E=D[X],Object.prototype.hasOwnProperty.call(w,E)&&(f[E]=w[E])}}function U(f){var v=1;f=f.split(":");const E=[];for(;0<v&&f.length;)E.push(f.shift()),v--;return f.length&&E.push(f.join(":")),E}function L(f){h.setTimeout(()=>{throw f},0)}function x(){var f=qe;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class We{constructor(){this.h=this.g=null}add(v,E){const w=Ye.get();w.set(v,E),this.h?this.h.next=w:this.g=w,this.h=w}}var Ye=new $(()=>new j,f=>f.reset());class j{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ye=!1,qe=new We,O=()=>{const f=h.Promise.resolve(void 0);ue=()=>{f.then(re)}};var re=()=>{for(var f;f=x();){try{f.h.call(f.g)}catch(E){L(E)}var v=Ye;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}ye=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};h.addEventListener("test",E,v),h.removeEventListener("test",E,v)}catch{}return f}();function Me(f,v){if(se.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(ce){e:{try{le(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else E=="mouseover"?v=f.fromElement:E=="mouseout"&&(v=f.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Me.aa.h.call(this)}}M(Me,se);var Ce={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Be(f,v,E,w,F){this.listener=f,this.proxy=null,this.src=v,this.type=E,this.capture=!!w,this.ha=F,this.key=++ve,this.da=this.fa=!1}function Qe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Xe(f){this.src=f,this.g={},this.h=0}Xe.prototype.add=function(f,v,E,w,F){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var oe=hn(f,v,w,F);return-1<oe?(v=f[oe],E||(v.fa=!1)):(v=new Be(v,this.src,X,!!w,F),v.fa=E,f.push(v)),v};function kt(f,v){var E=v.type;if(E in f.g){var w=f.g[E],F=Array.prototype.indexOf.call(w,v,void 0),X;(X=0<=F)&&Array.prototype.splice.call(w,F,1),X&&(Qe(v),f.g[E].length==0&&(delete f.g[E],f.h--))}}function hn(f,v,E,w){for(var F=0;F<f.length;++F){var X=f[F];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==w)return F}return-1}var Wt="closure_lm_"+(1e6*Math.random()|0),dr={};function us(f,v,E,w,F){if(Array.isArray(v)){for(var X=0;X<v.length;X++)us(f,v[X],E,w,F);return null}return E=_u(E),f&&f[ae]?f.K(v,E,g(w)?!!w.capture:!1,F):an(f,v,E,!1,w,F)}function an(f,v,E,w,F,X){if(!v)throw Error("Invalid event type");var oe=g(F)?!!F.capture:!!F,Fe=uo(f);if(Fe||(f[Wt]=Fe=new Xe(f)),E=Fe.add(v,E,w,oe,X),E.proxy)return E;if(w=ao(),E.proxy=w,w.src=f,w.listener=E,f.addEventListener)_e||(F=oe),F===void 0&&(F=!1),f.addEventListener(v.toString(),w,F);else if(f.attachEvent)f.attachEvent(cs(v.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ao(){function f(E){return v.call(f.src,f.listener,E)}const v=ch;return f}function Mi(f,v,E,w,F){if(Array.isArray(v))for(var X=0;X<v.length;X++)Mi(f,v[X],E,w,F);else w=g(w)?!!w.capture:!!w,E=_u(E),f&&f[ae]?(f=f.i,v=String(v).toString(),v in f.g&&(X=f.g[v],E=hn(X,E,w,F),-1<E&&(Qe(X[E]),Array.prototype.splice.call(X,E,1),X.length==0&&(delete f.g[v],f.h--)))):f&&(f=uo(f))&&(v=f.g[v.toString()],f=-1,v&&(f=hn(v,E,w,F)),(E=-1<f?v[f]:null)&&lo(E))}function lo(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[ae])kt(v.i,f);else{var E=f.type,w=f.proxy;v.removeEventListener?v.removeEventListener(E,w,f.capture):v.detachEvent?v.detachEvent(cs(E),w):v.addListener&&v.removeListener&&v.removeListener(w),(E=uo(v))?(kt(E,f),E.h==0&&(E.src=null,v[Wt]=null)):Qe(f)}}}function cs(f){return f in dr?dr[f]:dr[f]="on"+f}function ch(f,v){if(f.da)f=!0;else{v=new Me(v,this);var E=f.listener,w=f.ha||f.src;f.fa&&lo(f),f=E.call(w,v)}return f}function uo(f){return f=f[Wt],f instanceof Xe?f:null}var ba="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(f){return typeof f=="function"?f:(f[ba]||(f[ba]=function(v){return f.handleEvent(v)}),f[ba])}function mt(){fe.call(this),this.i=new Xe(this),this.M=this,this.F=null}M(mt,fe),mt.prototype[ae]=!0,mt.prototype.removeEventListener=function(f,v,E,w){Mi(this,f,v,E,w)};function et(f,v){var E,w=f.F;if(w)for(E=[];w;w=w.F)E.push(w);if(f=f.M,w=v.type||v,typeof v=="string")v=new se(v,f);else if(v instanceof se)v.target=v.target||f;else{var F=v;v=new se(w,f),V(v,F)}if(F=!0,E)for(var X=E.length-1;0<=X;X--){var oe=v.g=E[X];F=Tn(oe,w,!0,v)&&F}if(oe=v.g=f,F=Tn(oe,w,!0,v)&&F,F=Tn(oe,w,!1,v)&&F,E)for(X=0;X<E.length;X++)oe=v.g=E[X],F=Tn(oe,w,!1,v)&&F}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var E=f.g[v],w=0;w<E.length;w++)Qe(E[w]);delete f.g[v],f.h--}}this.F=null},mt.prototype.K=function(f,v,E,w){return this.i.add(String(f),v,!1,E,w)},mt.prototype.L=function(f,v,E,w){return this.i.add(String(f),v,!0,E,w)};function Tn(f,v,E,w){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,X=0;X<v.length;++X){var oe=v[X];if(oe&&!oe.da&&oe.capture==E){var Fe=oe.listener,Mt=oe.ha||oe.src;oe.fa&&kt(f.i,oe),F=Fe.call(Mt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Jt(f,v,E){if(typeof f=="function")E&&(f=R(f,E));else if(f&&typeof f.handleEvent=="function")f=R(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(f,v||0)}function vu(f){f.g=Jt(()=>{f.g=null,f.i&&(f.i=!1,vu(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class fh extends fe{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(f){fe.call(this),this.h=f,this.g={}}M(fs,fe);var hs=[];function ds(f){ge(f.g,function(v,E){this.g.hasOwnProperty(E)&&lo(v)},f),f.g={}}fs.prototype.N=function(){fs.aa.N.call(this),ds(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=h.JSON.stringify,co=h.JSON.parse,ps=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Da(){}Da.prototype.h=null;function Ma(f){return f.h||(f.h=f.i())}function Na(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xi(){se.call(this,"d")}M(xi,se);function xa(){se.call(this,"c")}M(xa,se);var ii={},Pa=null;function pr(){return Pa=Pa||new mt}ii.La="serverreachability";function fo(f){se.call(this,ii.La,f)}M(fo,se);function mr(f){const v=pr();et(v,new fo(v))}ii.STAT_EVENT="statevent";function Tu(f,v){se.call(this,ii.STAT_EVENT,f),this.stat=v}M(Tu,se);function ct(f){const v=pr();et(v,new Tu(v,f))}ii.Ma="timingevent";function Dt(f,v){se.call(this,ii.Ma,f),this.size=v}M(Dt,se);function St(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},v)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function Va(f,v,E,w,F,X){f.info(function(){if(f.g)if(X)for(var oe="",Fe=X.split("&"),Mt=0;Mt<Fe.length;Mt++){var ze=Fe[Mt].split("=");if(1<ze.length){var Lt=ze[0];ze=ze[1];var Nt=Lt.split("_");oe=2<=Nt.length&&Nt[1]=="type"?oe+(Lt+"="+ze+"&"):oe+(Lt+"=redacted&")}}else oe=null;else oe=X;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+v+`
`+E+`
`+oe})}function hh(f,v,E,w,F,X,oe){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+v+`
`+E+`
`+X+" "+oe})}function gr(f,v,E,w){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+ms(f,E)+(w?" "+w:"")})}function Eu(f,v){f.info(function(){return"TIMEOUT: "+v})}Mn.prototype.info=function(){};function ms(f,v){if(!f.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var w=E[f];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var oe=1;oe<F.length;oe++)F[oe]=""}}}}return Yn(E)}catch{return v}}var yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function si(){}M(si,Da),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ri=new si;function ln(f,v,E,w){this.j=f,this.i=v,this.l=E,this.R=w||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var Oa={},ho={};function $n(f,v,E){f.L=1,f.v=Ts(En(v)),f.m=E,f.P=!0,Vi(f,null)}function Vi(f,v){f.F=Date.now(),gs(f),f.A=En(f.v);var E=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),Fa(E.i,"t",w),f.C=0,E=f.j.J,f.h=new vt,f.g=Uu(f.j,E?v:null,!f.m),0<f.O&&(f.M=new fh(R(f.Y,f,f.g),f.O)),v=f.U,E=f.g,w=f.ca;var F="readystatechange";Array.isArray(F)||(F&&(hs[0]=F.toString()),F=hs);for(var X=0;X<F.length;X++){var oe=us(E,F[X],w||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),mr(),Va(f.i,f.u,f.A,f.l,f.R,f.m)}ln.prototype.ca=function(f){f=f.target;const v=this.M;v&&Vn(f)==3?v.j():this.Y(f)},ln.prototype.Y=function(f){try{if(f==this.g)e:{const Nt=Vn(this.g);var v=this.g.Ba();const zi=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Du(this.g)))){this.J||Nt!=4||v==7||(v==8||0>=zi?mr(3):mr(2)),_r(this);var E=this.g.Z();this.X=E;t:if(Au(this)){var w=Du(this.g);f="";var F=w.length,X=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ht(this),oi(this);var oe="";break t}this.h.i=new h.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,f+=this.h.i.decode(w[v],{stream:!(X&&v==F-1)});w.length=0,this.h.g+=f,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=E==200,hh(this.i,this.u,this.A,this.l,this.R,Nt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Mt=this.g;if((Fe=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Fe)){var ze=Fe;break t}}ze=null}if(E=ze)gr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,E);else{this.o=!1,this.s=3,ct(12),Ht(this),oi(this);break e}}if(this.P){E=!0;let Gt;for(;!this.J&&this.C<oe.length;)if(Gt=Su(this,oe),Gt==ho){Nt==4&&(this.s=4,ct(14),E=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Oa){this.s=4,ct(15),gr(this.i,this.l,oe,"[Invalid Chunk]"),E=!1;break}else gr(this.i,this.l,Gt,null),ys(this,Gt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||oe.length!=0||this.h.h||(this.s=1,ct(16),E=!1),this.o=this.o&&E,!E)gr(this.i,this.l,oe,"[Invalid Chunked Response]"),Ht(this),oi(this);else if(0<oe.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),bs(Lt),Lt.M=!0,ct(11))}}else gr(this.i,this.l,oe,null),ys(this,oe);Nt==4&&Ht(this),this.o&&!this.J&&(Nt==4?Vu(this.j,this):(this.o=!1,gs(this)))}else yh(this.g),E==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Ht(this),oi(this)}}}catch{}finally{}};function Au(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Su(f,v){var E=f.C,w=v.indexOf(`
`,E);return w==-1?ho:(E=Number(v.substring(E,w)),isNaN(E)?Oa:(w+=1,w+E>v.length?ho:(v=v.slice(w,w+E),f.C=w+E,v)))}ln.prototype.cancel=function(){this.J=!0,Ht(this)};function gs(f){f.S=Date.now()+f.I,Cu(f,f.I)}function Cu(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=St(R(f.ba,f),v)}function _r(f){f.B&&(h.clearTimeout(f.B),f.B=null)}ln.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Eu(this.i,this.A),this.L!=2&&(mr(),ct(17)),Ht(this),this.s=2,oi(this)):Cu(this,this.S-f)};function oi(f){f.j.G==0||f.J||Vu(f.j,f)}function Ht(f){_r(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,ds(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function ys(f,v){try{var E=f.j;if(E.G!=0&&(E.g==f||ka(E.h,f))){if(!f.K&&ka(E.h,f)&&E.G==3){try{var w=E.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)wo(E),So(E);else break e;Ya(E),ct(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=St(R(E.Za,E),6e3));if(1>=mo(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Fi(E,11)}else if((f.K||E.g==f)&&wo(E),!J(v))for(F=E.Da.g.parse(v),v=0;v<F.length;v++){let ze=F[v];if(E.T=ze[0],ze=ze[1],E.G==2)if(ze[0]=="c"){E.K=ze[1],E.ia=ze[2];const Lt=ze[3];Lt!=null&&(E.la=Lt,E.j.info("VER="+E.la));const Nt=ze[4];Nt!=null&&(E.Aa=Nt,E.j.info("SVER="+E.Aa));const zi=ze[5];zi!=null&&typeof zi=="number"&&0<zi&&(w=1.5*zi,E.L=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const Gt=f.g;if(Gt){const di=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var X=w.h;X.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(go(X,X.h),X.h=null))}if(w.D){const Qa=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Qa&&(w.ya=Qa,it(w.I,w.D,Qa))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),w=E;var oe=f;if(w.qa=ku(w,w.J?w.ia:null,w.W),oe.K){un(w.h,oe);var Fe=oe,Mt=w.L;Mt&&(Fe.I=Mt),Fe.B&&(_r(Fe),gs(Fe)),w.g=oe}else xu(w);0<E.i.length&&Co(E)}else ze[0]!="stop"&&ze[0]!="close"||Fi(E,7);else E.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Fi(E,7):Ga(E):ze[0]!="noop"&&E.l&&E.l.ta(ze),E.v=0)}}mr(4)}catch{}}var wu=class{constructor(f,v){this.g=f,this.map=v}};function Oi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function po(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function mo(f){return f.h?1:f.g?f.g.size:0}function ka(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function go(f,v){f.g?f.g.add(v):f.h=v}function un(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}Oi.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ua(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const E of f.g.values())v=v.concat(E.D);return v}return z(f.i)}function dh(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var v=[],E=f.length,w=0;w<E;w++)v.push(f[w]);return v}v=[],E=0;for(w in f)v[E++]=f[w];return v}function yo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var v=[];f=f.length;for(var E=0;E<f;E++)v.push(E);return v}v=[],E=0;for(const w in f)v[E++]=w;return v}}}function La(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var E=yo(f),w=dh(f),F=w.length,X=0;X<F;X++)v.call(void 0,w[X],E&&E[X],f)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ph(f,v){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var w=f[E].indexOf("="),F=null;if(0<=w){var X=f[E].substring(0,w);F=f[E].substring(w+1)}else X=f[E];v(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ct(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ct){this.h=f.h,vs(this,f.j),this.o=f.o,this.g=f.g,vr(this,f.s),this.l=f.l;var v=f.i,E=new Ui;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),ki(this,E),this.m=f.m}else f&&(v=String(f).match(_s))?(this.h=!1,vs(this,v[1]||"",!0),this.o=Nn(v[2]||""),this.g=Nn(v[3]||"",!0),vr(this,v[4]),this.l=Nn(v[5]||"",!0),ki(this,v[6]||"",!0),this.m=Nn(v[7]||"")):(this.h=!1,this.i=new Ui(null,this.h))}Ct.prototype.toString=function(){var f=[],v=this.j;v&&f.push(Es(v,qa,!0),":");var E=this.g;return(E||v=="file")&&(f.push("//"),(v=this.o)&&f.push(Es(v,qa,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Es(E,E.charAt(0)=="/"?mh:Ba,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Es(E,_o)),f.join("")};function En(f){return new Ct(f)}function vs(f,v,E){f.j=E?Nn(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function vr(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function ki(f,v,E){v instanceof Ui?(f.i=v,Iu(f.i,f.h)):(E||(v=Es(v,gh)),f.i=new Ui(v,f.h))}function it(f,v,E){f.i.set(v,E)}function Ts(f){return it(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Nn(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Es(f,v,E){return typeof f=="string"?(f=encodeURI(f).replace(v,Ru),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ru(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var qa=/[#\/\?@]/g,Ba=/[#\?:]/g,mh=/[#\?]/g,gh=/[#\?@]/g,_o=/#/g;function Ui(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function xn(f){f.g||(f.g=new Map,f.h=0,f.i&&ph(f.i,function(v,E){f.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Ui.prototype,n.add=function(f,v){xn(this),this.i=null,f=ai(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(v),this.h+=1,this};function Li(f,v){xn(f),v=ai(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function qi(f,v){return xn(f),v=ai(f,v),f.g.has(v)}n.forEach=function(f,v){xn(this),this.g.forEach(function(E,w){E.forEach(function(F){f.call(v,F,w,this)},this)},this)},n.na=function(){xn(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let w=0;w<v.length;w++){const F=f[w];for(let X=0;X<F.length;X++)E.push(v[w])}return E},n.V=function(f){xn(this);let v=[];if(typeof f=="string")qi(this,f)&&(v=v.concat(this.g.get(ai(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)v=v.concat(f[E])}return v},n.set=function(f,v){return xn(this),this.i=null,f=ai(this,f),qi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function Fa(f,v,E){Li(f,v),0<E.length&&(f.i=null,f.g.set(ai(f,v),z(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var w=v[E];const X=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var F=X;oe[w]!==""&&(F+="="+encodeURIComponent(String(oe[w]))),f.push(F)}}return this.i=f.join("&")};function ai(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function Iu(f,v){v&&!f.j&&(xn(f),f.i=null,f.g.forEach(function(E,w){var F=w.toLowerCase();w!=F&&(Li(this,w),Fa(this,F,E))},f)),f.j=v}function As(f,v){const E=new Mn;if(h.Image){const w=new Image;w.onload=b(Pn,E,"TestLoadImage: loaded",!0,v,w),w.onerror=b(Pn,E,"TestLoadImage: error",!1,v,w),w.onabort=b(Pn,E,"TestLoadImage: abort",!1,v,w),w.ontimeout=b(Pn,E,"TestLoadImage: timeout",!1,v,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else v(!1)}function Qn(f,v){const E=new Mn,w=new AbortController,F=setTimeout(()=>{w.abort(),Pn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:w.signal}).then(X=>{clearTimeout(F),X.ok?Pn(E,"TestPingServer: ok",!0,v):Pn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Pn(E,"TestPingServer: error",!1,v)})}function Pn(f,v,E,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(E)}catch{}}function Ss(){this.g=new ps}function li(f,v,E){const w=E||"";try{La(f,function(F,X){let oe=F;g(F)&&(oe=Yn(F)),v.push(w+X+"="+encodeURIComponent(oe))})}catch(F){throw v.push(w+"type="+encodeURIComponent("_badmap")),F}}function Tr(f){this.l=f.Ub||null,this.j=f.eb||!1}M(Tr,Da),Tr.prototype.g=function(){return new Bi(this.l,this.j)},Tr.prototype.i=function(f){return function(){return f}}({});function Bi(f,v){mt.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Bi,mt),n=Bi.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,ci(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;za(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function za(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?ui(this):ci(this),this.readyState==3&&za(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,ui(this))},n.Qa=function(f){this.g&&(this.response=f,ui(this))},n.ga=function(){this.g&&ui(this)};function ui(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ci(f)}n.setRequestHeader=function(f,v){this.u.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=v.next();return f.join(`\r
`)};function ci(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ha(f){let v="";return ge(f,function(E,w){v+=w,v+=":",v+=E,v+=`\r
`}),v}function Ut(f,v,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Ha(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):it(f,v,E))}function Je(f){mt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Je,mt);var vo=/^https?$/i,Cs=["POST","PUT"];n=Je.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,v,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?Ma(this.o):Ma(ri),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(X){bu(this,X);return}if(f=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)E.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())E.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Cs,v,void 0))||w||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of E)this.g.setRequestHeader(X,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ws(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){bu(this,X)}};function bu(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,To(f),fi(f)}function To(f){f.A||(f.A=!0,et(f,"complete"),et(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,et(this,"complete"),et(this,"abort"),fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Eo(this):this.bb())},n.bb=function(){Eo(this)};function Eo(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Vn(f)!=4||f.Z()!=2)){if(f.u&&Vn(f)==4)Jt(f.Ea,0,f);else if(et(f,"readystatechange"),Vn(f)==4){f.h=!1;try{const oe=f.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var w;if(w=oe===0){var F=String(f.D).match(_s)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),w=!vo.test(F?F.toLowerCase():"")}E=w}if(E)et(f,"complete"),et(f,"success");else{f.m=6;try{var X=2<Vn(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",To(f)}}finally{fi(f)}}}}function fi(f,v){if(f.g){ws(f);const E=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||et(f,"ready");try{E.onreadystatechange=w}catch{}}}function ws(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Vn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),co(v)}};function Du(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function yh(f){const v={};f=(f.g&&2<=Vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(J(f[w]))continue;var E=U(f[w]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[F]||[];v[F]=X,X.push(E)}P(v,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(f,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||v}function Ao(f){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rs("baseRetryDelayMs",5e3,f),this.cb=Rs("retryDelaySeedMs",1e4,f),this.Wa=Rs("forwardChannelMaxRetries",2,f),this.wa=Rs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Oi(f&&f.concurrentRequestLimit),this.Da=new Ss,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ao.prototype,n.la=8,n.G=1,n.connect=function(f,v,E,w){ct(0),this.W=f,this.H=v||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.I=ku(this,null,this.W),Co(this)};function Ga(f){if(Mu(f),f.G==3){var v=f.U++,E=En(f.I);if(it(E,"SID",f.K),it(E,"RID",v),it(E,"TYPE","terminate"),Is(f,E),v=new ln(f,f.j,v),v.L=2,v.v=Ts(En(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=v.v,E=!0),E||(v.g=Uu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),gs(v)}Ou(f)}function So(f){f.g&&(bs(f),f.g.cancel(),f.g=null)}function Mu(f){So(f),f.u&&(h.clearTimeout(f.u),f.u=null),wo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Co(f){if(!po(f.h)&&!f.s){f.s=!0;var v=f.Ga;ue||O(),ye||(ue(),ye=!0),qe.add(v,f),f.B=0}}function _h(f,v){return mo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=St(R(f.Ga,f,v),$a(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const F=new ln(this,this.j,f);let X=this.o;if(this.S&&(X?(X=I(X),V(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Nu(this,F,v),E=En(this.I),it(E,"RID",f),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),Is(this,E),X&&(this.O?v="headers="+encodeURIComponent(String(Ha(X)))+"&"+v:this.m&&Ut(E,this.m,X)),go(this.h,F),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",v),it(E,"SID","null"),F.T=!0,$n(F,E,null)):$n(F,E,v),this.G=2}}else this.G==3&&(f?Ka(this,f):this.i.length==0||po(this.h)||Ka(this))};function Ka(f,v){var E;v?E=v.l:E=f.U++;const w=En(f.I);it(w,"SID",f.K),it(w,"RID",E),it(w,"AID",f.T),Is(f,w),f.m&&f.o&&Ut(w,f.m,f.o),E=new ln(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),v&&(f.i=v.D.concat(f.i)),v=Nu(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),go(f.h,E),$n(E,w,v)}function Is(f,v){f.H&&ge(f.H,function(E,w){it(v,w,E)}),f.l&&La({},function(E,w){it(v,w,E)})}function Nu(f,v,E){E=Math.min(f.i.length,E);var w=f.l?R(f.l.Na,f.l,f):null;e:{var F=f.i;let X=-1;for(;;){const oe=["count="+E];X==-1?0<E?(X=F[0].g,oe.push("ofs="+X)):X=0:oe.push("ofs="+X);let Fe=!0;for(let Mt=0;Mt<E;Mt++){let ze=F[Mt].g;const Lt=F[Mt].map;if(ze-=X,0>ze)X=Math.max(0,F[Mt].g-100),Fe=!1;else try{li(Lt,oe,"req"+ze+"_")}catch{w&&w(Lt)}}if(Fe){w=oe.join("&");break e}}}return f=f.i.splice(0,E),v.D=f,w}function xu(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;ue||O(),ye||(ue(),ye=!0),qe.add(v,f),f.v=0}}function Ya(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=St(R(f.Fa,f),$a(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=St(R(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),So(this),Pu(this))};function bs(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Pu(f){f.g=new ln(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=En(f.qa);it(v,"RID","rpc"),it(v,"SID",f.K),it(v,"AID",f.T),it(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&it(v,"TO",f.ja),it(v,"TYPE","xmlhttp"),Is(f,v),f.m&&f.o&&Ut(v,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Ts(En(v)),E.m=null,E.P=!0,Vi(E,f)}n.Za=function(){this.C!=null&&(this.C=null,So(this),Ya(this),ct(19))};function wo(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Vu(f,v){var E=null;if(f.g==v){wo(f),bs(f),f.g=null;var w=2}else if(ka(f.h,v))E=v.D,un(f.h,v),w=1;else return;if(f.G!=0){if(v.o)if(w==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var F=f.B;w=pr(),et(w,new Dt(w,E)),Co(f)}else xu(f);else if(F=v.s,F==3||F==0&&0<v.X||!(w==1&&_h(f,v)||w==2&&Ya(f)))switch(E&&0<E.length&&(v=f.h,v.i=v.i.concat(E)),F){case 1:Fi(f,5);break;case 4:Fi(f,10);break;case 3:Fi(f,6);break;default:Fi(f,2)}}}function $a(f,v){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*v}function Fi(f,v){if(f.j.info("Error code "+v),v==2){var E=R(f.fb,f),w=f.Xa;const F=!w;w=new Ct(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||vs(w,"https"),Ts(w),F?As(w.toString(),E):Qn(w.toString(),E)}else ct(2);f.G=0,f.l&&f.l.sa(v),Ou(f),Mu(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Ou(f){if(f.G=0,f.ka=[],f.l){const v=Ua(f.h);(v.length!=0||f.i.length!=0)&&(q(f.ka,v),q(f.ka,f.i),f.h.i.length=0,z(f.i),f.i.length=0),f.l.ra()}}function ku(f,v,E){var w=E instanceof Ct?En(E):new Ct(E);if(w.g!="")v&&(w.g=v+"."+w.g),vr(w,w.s);else{var F=h.location;w=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var X=new Ct(null);w&&vs(X,w),v&&(X.g=v),F&&vr(X,F),E&&(X.l=E),w=X}return E=f.D,v=f.ya,E&&v&&it(w,E,v),it(w,"VER",f.la),Is(f,w),w}function Uu(f,v,E){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new Je(new Tr({eb:E})):new Je(f.pa),v.Ha(f.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}n=Lu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ro(){}Ro.prototype.g=function(f,v){return new cn(f,v)};function cn(f,v){mt.call(this),this.g=new Ao(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!J(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!J(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new hi(this)}M(cn,mt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ga(this.g)},cn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Yn(f),f=E);v.i.push(new wu(v.Ya++,f)),v.G==3&&Co(v)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ga(this.g),delete this.g,cn.aa.N.call(this)};function qu(f){xi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const E in v){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}M(qu,xi);function Bu(){xa.call(this),this.status=1}M(Bu,xa);function hi(f){this.g=f}M(hi,Lu),hi.prototype.ua=function(){et(this.g,"a")},hi.prototype.ta=function(f){et(this.g,new qu(f))},hi.prototype.sa=function(f){et(this.g,new Bu)},hi.prototype.ra=function(){et(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,KA=function(){return new Ro},GA=function(){return pr()},HA=ii,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,of=yr,Pi.COMPLETE="complete",zA=Pi,Na.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ll=Na,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,FA=Je}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const rE="@firebase/firestore",sE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Kf("@firebase/firestore");function ta(){return js.logLevel}function de(n,...e){if(js.logLevel<=Ue.DEBUG){const t=e.map(Cm);js.debug(`Firestore (${Aa}): ${n}`,...t)}}function lr(n,...e){if(js.logLevel<=Ue.ERROR){const t=e.map(Cm);js.error(`Firestore (${Aa}): ${n}`,...t)}}function fa(n,...e){if(js.logLevel<=Ue.WARN){const t=e.map(Cm);js.warn(`Firestore (${Aa}): ${n}`,...t)}}function Cm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function Ze(n,e){n||Re()}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class ZP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eV{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string"),new YA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new nn(e)}}class tV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class nV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new tV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ti(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0);const r=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new oE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze(typeof t.token=="string"),this.R=t.token,new oE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=rV(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function Hp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Pe(r,o);{const l=$A(),c=sV(l.encode(aE(n,t)),l.encode(aE(e,t)));return c!==0?c:Pe(r,o)}}t+=r>65535?2:1}return Pe(n.length,e.length)}function aE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function sV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function ha(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=-62135596800,uE=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uE);return new Vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lE)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uE}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Vt(0,0))}static max(){return new be(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__name__";class vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=vi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const r=vi.isNumericId(e),o=vi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?vi.extractNumericId(e).compare(vi.extractNumericId(t)):Hp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class ut extends vi{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ut(t)}static emptyPath(){return new ut([])}}const oV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends vi{construct(e,t,r){return new Xt(e,t,r)}static isValidIdentifier(e){return oV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cE}static keyField(){return new Xt([cE])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(r+=h,o++):(l(),o++)}if(l(),c)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=-1;function aV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(r===1e9?new Vt(t+1,0):new Vt(t,r));return new es(o,Ee.empty(),e)}function lV(n){return new es(n.readTime,n.key,Wl)}class es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new es(be.min(),Ee.empty(),Wl)}static max(){return new es(be.max(),Ee.empty(),Wl)}}function uV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==cV)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,l=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++l,c&&l===o&&t()},p=>r(p))}),c=!0,l===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(T=>{c[g]=T,++h,h===l&&r(c)},T=>o(T))}})}static doWhile(e,t){return new ne((r,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):r()};l()})}}function hV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ca(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-1;function Xf(n){return n==null}function Cf(n){return n===0&&1/n==-1/0}function dV(n){return typeof n=="number"&&Number.isInteger(n)&&!Cf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="";function pV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fE(e)),e=mV(n.get(t),e);return fE(e)}function mV(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case XA:t+="";break;default:t+=l}}return t}function fE(n){return n+XA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function no(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Qt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,o,l){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Ot(Xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new WA("Invalid base64 string: "+l):l}}(e);return new jt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const gV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(n){if(Ze(!!n),typeof n=="string"){let e=0;const t=gV.exec(n);if(Ze(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ns(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="server_timestamp",ZA="__type__",eS="__previous_value__",tS="__local_write_time__";function Rm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZA])===null||t===void 0?void 0:t.stringValue)===JA}function jf(n){const e=n.mapValue.fields[eS];return Rm(e)?jf(e):e}function Jl(n){const e=ts(n.mapValue.fields[tS].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,t,r,o,l,c,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g}}const wf="(default)";class Zl{constructor(e,t){this.projectId=e,this.database=t||wf}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="__type__",_V="__max__",$c={mapValue:{}},iS="__vector__",Rf="value";function is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rm(n)?4:TV(n)?9007199254740991:vV(n)?10:11:Re()}function bi(n,e){if(n===e)return!0;const t=is(n);if(t!==is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ts(o.timestampValue),h=ts(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return ns(o.bytesValue).isEqual(ns(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=At(o.doubleValue),h=At(l.doubleValue);return c===h?Cf(c)===Cf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ha(n.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(hE(c)!==hE(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!bi(c[p],h[p])))return!1;return!0}(n,e);default:return Re()}}function eu(n,e){return(n.values||[]).find(t=>bi(t,e))!==void 0}function da(n,e){if(n===e)return 0;const t=is(n),r=is(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const h=At(l.integerValue||l.doubleValue),p=At(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return pE(n.timestampValue,e.timestampValue);case 4:return pE(Jl(n),Jl(e));case 5:return Hp(n.stringValue,e.stringValue);case 6:return function(l,c){const h=ns(l),p=ns(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const T=Pe(h[g],p[g]);if(T!==0)return T}return Pe(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const h=Pe(At(l.latitude),At(c.latitude));return h!==0?h:Pe(At(l.longitude),At(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mE(n.arrayValue,e.arrayValue);case 10:return function(l,c){var h,p,g,T;const S=l.fields||{},R=c.fields||{},b=(h=S[Rf])===null||h===void 0?void 0:h.arrayValue,M=(p=R[Rf])===null||p===void 0?void 0:p.arrayValue,z=Pe(((g=b==null?void 0:b.values)===null||g===void 0?void 0:g.length)||0,((T=M==null?void 0:M.values)===null||T===void 0?void 0:T.length)||0);return z!==0?z:mE(b,M)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===$c.mapValue&&c===$c.mapValue)return 0;if(l===$c.mapValue)return 1;if(c===$c.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),g=c.fields||{},T=Object.keys(g);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const R=Hp(p[S],T[S]);if(R!==0)return R;const b=da(h[p[S]],g[T[S]]);if(b!==0)return b}return Pe(p.length,T.length)}(n.mapValue,e.mapValue);default:throw Re()}}function pE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=ts(n),r=ts(e),o=Pe(t.seconds,r.seconds);return o!==0?o:Pe(t.nanos,r.nanos)}function mE(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=da(t[o],r[o]);if(l)return l}return Pe(t.length,r.length)}function pa(n){return Gp(n)}function Gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ts(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ns(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Gp(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${Gp(t.fields[c])}`;return o+"}"}(n.mapValue):Re()}function af(n){switch(is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(n);return e?16+af(e):16;case 5:return 2*n.stringValue.length;case 6:return ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+af(l),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return no(r.fields,(l,c)=>{o+=l.length+af(c)}),o}(n.mapValue);default:throw Re()}}function gE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kp(n){return!!n&&"integerValue"in n}function Im(n){return!!n&&"arrayValue"in n}function yE(n){return!!n&&"nullValue"in n}function _E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lf(n){return!!n&&"mapValue"in n}function vV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nS])===null||t===void 0?void 0:t.stringValue)===iS}function Hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return no(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_V}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(t)}setAll(e){let t=Xt.emptyPath(),r={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=h.popLast()}c?r[h.lastSegment()]=Hl(c):o.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];lf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){no(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new zn(Hl(this.value))}}function rS(n){const e=[];return no(n.fields,(t,r)=>{const o=new Xt([t]);if(lf(r)){const l=rS(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,r,o,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new rn(e,0,be.min(),be.min(),be.min(),zn.empty(),0)}static newFoundDocument(e,t,r,o){return new rn(e,1,t,be.min(),r,o,0)}static newNoDocument(e,t){return new rn(e,2,t,be.min(),be.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,be.min(),be.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t){this.position=e,this.inclusive=t}}function vE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?r=Ee.comparator(Ee.fromName(c.referenceValue),t.key):r=da(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function EV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{}class bt extends sS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SV(e,t,r):t==="array-contains"?new RV(e,r):t==="in"?new IV(e,r):t==="not-in"?new bV(e,r):t==="array-contains-any"?new DV(e,r):new bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CV(e,r):new wV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(da(t,this.value)):t!==null&&is(this.value)===is(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends sS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ti(e,t)}matches(e){return oS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function oS(n){return n.op==="and"}function aS(n){return AV(n)&&oS(n)}function AV(n){for(const e of n.filters)if(e instanceof ti)return!1;return!0}function Yp(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+pa(n.value);if(aS(n))return n.filters.map(e=>Yp(e)).join(",");{const e=n.filters.map(t=>Yp(t)).join(",");return`${n.op}(${e})`}}function lS(n,e){return n instanceof bt?function(r,o){return o instanceof bt&&r.op===o.op&&r.field.isEqual(o.field)&&bi(r.value,o.value)}(n,e):n instanceof ti?function(r,o){return o instanceof ti&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,c,h)=>l&&lS(c,o.filters[h]),!0):!1}(n,e):void Re()}function uS(n){return n instanceof bt?function(t){return`${t.field.canonicalString()} ${t.op} ${pa(t.value)}`}(n):n instanceof ti?function(t){return t.op.toString()+" {"+t.getFilters().map(uS).join(" ,")+"}"}(n):"Filter"}class SV extends bt{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class CV extends bt{constructor(e,t){super(e,"in",t),this.keys=cS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wV extends bt{constructor(e,t){super(e,"not-in",t),this.keys=cS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class RV extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Im(t)&&eu(t.arrayValue,this.value)}}class IV extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&eu(this.value.arrayValue,t)}}class bV extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!eu(this.value.arrayValue,t)}}class DV extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Im(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>eu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t=null,r=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.le=null}}function EE(n,e=null,t=[],r=[],o=null,l=null,c=null){return new MV(n,e,t,r,o,l,c)}function bm(n){const e=De(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pa(r)).join(",")),e.le=t}return e.le}function Dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TE(n.startAt,e.startAt)&&TE(n.endAt,e.endAt)}function $p(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,t=null,r=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function NV(n,e,t,r,o,l,c,h){return new wa(n,e,t,r,o,l,c,h)}function fS(n){return new wa(n)}function AE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hS(n){return n.collectionGroup!==null}function Gl(n){const e=De(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ot(Xt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new tu(l,r))}),t.has(Xt.keyField().canonicalString())||e.he.push(new tu(Xt.keyField(),r))}return e.he}function Ei(n){const e=De(n);return e.Pe||(e.Pe=xV(e,Gl(n))),e.Pe}function xV(n,e){if(n.limitType==="F")return EE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new tu(o.field,l)});const t=n.endAt?new If(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new If(n.startAt.position,n.startAt.inclusive):null;return EE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qp(n,e){const t=n.filters.concat([e]);return new wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xp(n,e,t){return new wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wf(n,e){return Dm(Ei(n),Ei(e))&&n.limitType===e.limitType}function dS(n){return`${bm(Ei(n))}|lt:${n.limitType}`}function na(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>uS(o)).join(", ")}]`),Xf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>pa(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>pa(o)).join(",")),`Target(${r})`}(Ei(n))}; limitType=${n.limitType})`}function Jf(n,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ee.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,o){for(const l of Gl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(c,h,p){const g=vE(c,h,p);return c.inclusive?g<=0:g<0}(r.startAt,Gl(r),o)||r.endAt&&!function(c,h,p){const g=vE(c,h,p);return c.inclusive?g>=0:g>0}(r.endAt,Gl(r),o))}(n,e)}function PV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pS(n){return(e,t)=>{let r=!1;for(const o of Gl(n)){const l=VV(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function VV(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,c,h){const p=c.data.field(l),g=h.data.field(l);return p!==null&&g!==null?da(p,g):Re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new pt(Ee.comparator);function ur(){return OV}const mS=new pt(Ee.comparator);function ql(...n){let e=mS;for(const t of n)e=e.insert(t.key,t);return e}function gS(n){let e=mS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ys(){return Kl()}function yS(){return Kl()}function Kl(){return new io(n=>n.toString(),(n,e)=>n.isEqual(e))}const kV=new pt(Ee.comparator),UV=new Ot(Ee.comparator);function Le(...n){let e=UV;for(const t of n)e=e.add(t);return e}const LV=new Ot(Pe);function qV(){return LV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function _S(n){return{integerValue:""+n}}function BV(n,e){return dV(e)?_S(e):Mm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function FV(n,e,t){return n instanceof bf?function(o,l){const c={fields:{[ZA]:{stringValue:JA},[tS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rm(l)&&(l=jf(l)),l&&(c.fields[eS]=l),{mapValue:c}}(t,e):n instanceof nu?TS(n,e):n instanceof iu?ES(n,e):function(o,l){const c=vS(o,l),h=SE(c)+SE(o.Ie);return Kp(c)&&Kp(o.Ie)?_S(h):Mm(o.serializer,h)}(n,e)}function zV(n,e,t){return n instanceof nu?TS(n,e):n instanceof iu?ES(n,e):t}function vS(n,e){return n instanceof Df?function(r){return Kp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class bf extends Zf{}class nu extends Zf{constructor(e){super(),this.elements=e}}function TS(n,e){const t=AS(e);for(const r of n.elements)t.some(o=>bi(o,r))||t.push(r);return{arrayValue:{values:t}}}class iu extends Zf{constructor(e){super(),this.elements=e}}function ES(n,e){let t=AS(e);for(const r of n.elements)t=t.filter(o=>!bi(o,r));return{arrayValue:{values:t}}}class Df extends Zf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function SE(n){return At(n.integerValue||n.doubleValue)}function AS(n){return Im(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function HV(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof nu&&o instanceof nu||r instanceof iu&&o instanceof iu?ha(r.elements,o.elements,bi):r instanceof Df&&o instanceof Df?bi(r.Ie,o.Ie):r instanceof bf&&o instanceof bf}(n.transform,e.transform)}class GV{constructor(e,t){this.version=e,this.transformResults=t}}class Ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class eh{}function SS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nm(n.key,Ai.none()):new fu(n.key,n.data,Ai.none());{const t=n.data,r=zn.empty();let o=new Ot(Xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new ro(n.key,r,new Jn(o.toArray()),Ai.none())}}function KV(n,e,t){n instanceof fu?function(o,l,c){const h=o.value.clone(),p=wE(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ro?function(o,l,c){if(!uf(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=wE(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(CS(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Yl(n,e,t,r){return n instanceof fu?function(l,c,h,p){if(!uf(l.precondition,c))return h;const g=l.value.clone(),T=RE(l.fieldTransforms,p,c);return g.setAll(T),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof ro?function(l,c,h,p){if(!uf(l.precondition,c))return h;const g=RE(l.fieldTransforms,p,c),T=c.data;return T.setAll(CS(l)),T.setAll(g),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(S=>S.field))}(n,e,t,r):function(l,c,h){return uf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function YV(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=vS(r.transform,o||null);l!=null&&(t===null&&(t=zn.empty()),t.set(r.field,l))}return t||null}function CE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ha(r,o,(l,c)=>HV(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends eh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ro extends eh{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wE(n,e,t){const r=new Map;Ze(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);r.set(l.field,zV(c,h,t[o]))}return r}function RE(n,e,t){const r=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);r.set(o.field,FV(l,c,e))}return r}class Nm extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $V extends eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&KV(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yS();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=SS(c,h);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(t,r)=>CE(t,r))&&ha(this.baseMutations,e.baseMutations,(t,r)=>CE(t,r))}}class xm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ze(e.mutations.length===r.length);let o=function(){return kV}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new xm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ge;function WV(n){switch(n){case ie.OK:return Re();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Re()}}function wS(n){if(n===void 0)return lr("GRPC error has no .code"),ie.UNKNOWN;switch(n){case It.OK:return ie.OK;case It.CANCELLED:return ie.CANCELLED;case It.UNKNOWN:return ie.UNKNOWN;case It.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case It.INTERNAL:return ie.INTERNAL;case It.UNAVAILABLE:return ie.UNAVAILABLE;case It.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case It.NOT_FOUND:return ie.NOT_FOUND;case It.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case It.ABORTED:return ie.ABORTED;case It.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case It.DATA_LOSS:return ie.DATA_LOSS;default:return Re()}}(Ge=It||(It={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new jr([4294967295,4294967295],0);function IE(n){const e=$A().encode(n),t=new BA;return t.update(e),new Uint8Array(t.digest())}function bE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new jr([t,r],0),new jr([o,l],0)]}class Pm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bl(`Invalid padding: ${t}`);if(r<0)throw new Bl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=jr.fromNumber(this.Ee)}Ae(e,t,r){let o=e.add(t.multiply(jr.fromNumber(r)));return o.compare(JV)===1&&(o=new jr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=IE(e),[r,o]=bE(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,o,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Pm(l,o,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.Ee===0)return;const t=IE(e),[r,o]=bE(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,o,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new th(be.min(),o,new pt(Pe),ur(),Le())}}class hu{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hu(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,r,o){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=o}}class RS{constructor(e,t){this.targetId=e,this.ge=t}}class IS{constructor(e,t,r=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class DE{constructor(){this.pe=0,this.ye=ME(),this.we=jt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Le(),t=Le(),r=Le();return this.ye.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Re()}}),new hu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=ME()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ze(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class ZV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ur(),this.$e=Qc(),this.Ue=Qc(),this.Ke=new pt(Pe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,r=e.ge.count,o=this.Xe(t);if(o){const l=o.target;if($p(l))if(r===0){const c=new Ee(l.path);this.ze(t,c,rn.newNoDocument(c,be.min()))}else Ze(r===1);else{const c=this.et(t);if(c!==r){const h=this.tt(e),p=h?this.nt(h,e,c):1;if(p!==0){this.Ye(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=ns(r).toUint8Array()}catch(p){if(p instanceof WA)return fa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Pm(c,o,l)}catch(p){return fa(p instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let o=0;return r.forEach(l=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,l,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const h=this.Xe(c);if(h){if(l.current&&$p(h.target)){const p=new Ee(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,rn.newNoDocument(p,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=Le();this.Ue.forEach((l,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const o=new th(e,t,this.Ke,this.Qe,r);return this.Qe=ur(),this.$e=Qc(),this.Ue=Qc(),this.Ke=new pt(Pe),o}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new DE,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Ot(Pe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ot(Pe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new DE),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Qc(){return new pt(Ee.comparator)}function ME(){return new pt(Ee.comparator)}const eO={asc:"ASCENDING",desc:"DESCENDING"},tO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nO={and:"AND",or:"OR"};class iO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jp(n,e){return n.useProto3Json||Xf(e)?e:{value:e}}function Mf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rO(n,e){return Mf(n,e.toTimestamp())}function Si(n){return Ze(!!n),be.fromTimestamp(function(t){const r=ts(t);return new Vt(r.seconds,r.nanos)}(n))}function Vm(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=function(o){return new ut(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function DS(n){const e=ut.fromString(n);return Ze(VS(e)),e}function Jp(n,e){return Vm(n.databaseId,e.path)}function wp(n,e){const t=DS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(NS(t))}function MS(n,e){return Vm(n.databaseId,e)}function sO(n){const e=DS(n);return e.length===4?ut.emptyPath():NS(e)}function Zp(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NS(n){return Ze(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function NE(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function oO(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(g,T){return g.useProto3Json?(Ze(T===void 0||typeof T=="string"),jt.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array),jt.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const T=g.code===void 0?ie.UNKNOWN:wS(g.code);return new pe(T,g.message||"")}(c);t=new IS(r,o,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=wp(n,r.document.name),l=Si(r.document.updateTime),c=r.document.createTime?Si(r.document.createTime):be.min(),h=new zn({mapValue:{fields:r.document.fields}}),p=rn.newFoundDocument(o,l,c,h),g=r.targetIds||[],T=r.removedTargetIds||[];t=new cf(g,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=wp(n,r.document),l=r.readTime?Si(r.readTime):be.min(),c=rn.newNoDocument(o,l),h=r.removedTargetIds||[];t=new cf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=wp(n,r.document),l=r.removedTargetIds||[];t=new cf([],l,o,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new jV(o,l),h=r.targetId;t=new RS(h,c)}}return t}function aO(n,e){let t;if(e instanceof fu)t={update:NE(n,e.key,e.value)};else if(e instanceof Nm)t={delete:Jp(n,e.key)};else if(e instanceof ro)t={update:NE(n,e.key,e.data),updateMask:gO(e.fieldMask)};else{if(!(e instanceof $V))return Re();t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const h=c.transform;if(h instanceof bf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof nu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Df)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw Re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:rO(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re()}(n,e.precondition)),t}function lO(n,e){return n&&n.length>0?(Ze(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?Si(o.updateTime):Si(l);return c.isEqual(be.min())&&(c=Si(l)),new GV(c,o.transformResults||[])}(t,e))):[]}function uO(n,e){return{documents:[MS(n,e.path)]}}function cO(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MS(n,o);const l=function(g){if(g.length!==0)return PS(ti.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(T=>function(R){return{field:ia(R.field),direction:dO(R.dir)}}(T))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=jp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:o}}function fO(n){let e=sO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ze(r===1);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=function(S){const R=xS(S);return R instanceof ti&&aS(R)?R.getFilters():[R]}(t.where));let c=[];t.orderBy&&(c=function(S){return S.map(R=>function(M){return new tu(ra(M.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(R))}(t.orderBy));let h=null;t.limit&&(h=function(S){let R;return R=typeof S=="object"?S.value:S,Xf(R)?null:R}(t.limit));let p=null;t.startAt&&(p=function(S){const R=!!S.before,b=S.values||[];return new If(b,R)}(t.startAt));let g=null;return t.endAt&&(g=function(S){const R=!S.before,b=S.values||[];return new If(b,R)}(t.endAt)),NV(e,o,c,l,h,"F",p,g)}function hO(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ra(t.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ra(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ra(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ra(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):n.fieldFilter!==void 0?function(t){return bt.create(ra(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ti.create(t.compositeFilter.filters.map(r=>xS(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re()}function dO(n){return eO[n]}function pO(n){return tO[n]}function mO(n){return nO[n]}function ia(n){return{fieldPath:n.canonicalString()}}function ra(n){return Xt.fromServerFormat(n.fieldPath)}function PS(n){return n instanceof bt?function(t){if(t.op==="=="){if(_E(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NAN"}};if(yE(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_E(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NAN"}};if(yE(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(t.field),op:pO(t.op),value:t.value}}}(n):n instanceof ti?function(t){const r=t.getFilters().map(o=>PS(o));return r.length===1?r[0]:{compositeFilter:{op:mO(t.op),filters:r}}}(n):Re()}function gO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,r,o,l=be.min(),c=be.min(),h=jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.Tt=e}}function _O(n){const e=fO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.Tn=new TO}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(es.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class TO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Ot(ut.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ot(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(OS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new ma(0)}static Kn(){return new ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="LruGarbageCollector",EO=1048576;function VE([n,e],[t,r]){const o=Pe(n,t);return o===0?Pe(e,r):o}class AO{constructor(e){this.Hn=e,this.buffer=new Ot(VE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(PE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ca(t)?de(PE,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.er(3e5)})}}class CO{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Qf.ae);const r=new AO(t);return this.tr.forEachTarget(e,o=>r.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>r.Zn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(xE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,o,l,c,h,p,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,c=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(l=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(g=Date.now(),ta()<=Ue.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S})))}}function wO(n,e){return new CO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.changes=new io(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Yl(r.mutation,o,Jn.empty(),Vt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const o=Ys();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let c=ql();return l.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ys();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,o){let l=ur();const c=Kl(),h=function(){return Kl()}();return t.forEach((p,g)=>{const T=r.get(g.key);o.has(g.key)&&(T===void 0||T.mutation instanceof ro)?l=l.insert(g.key,g):T!==void 0?(c.set(g.key,T.mutation.getFieldMask()),Yl(T.mutation,g,T.mutation.getFieldMask(),Vt.now())):c.set(g.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,T)=>c.set(g,T)),t.forEach((g,T)=>{var S;return h.set(g,new IO(T,(S=c.get(g))!==null&&S!==void 0?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Kl();let o=new pt((c,h)=>c-h),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let T=r.get(p)||Jn.empty();T=h.applyToLocalView(g,T),r.set(p,T);const S=(o.get(h.batchId)||Le()).add(p);o=o.insert(h.batchId,S)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,T=p.value,S=yS();T.forEach(R=>{if(!l.has(R)){const b=SS(t.get(R),r.get(R));b!==null&&S.set(R,b),l=l.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,S))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):ne.resolve(Ys());let h=Wl,p=l;return c.next(g=>ne.forEach(g,(T,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),l.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next(R=>{p=p.insert(T,R)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,Le())).next(T=>({batchId:h,changes:gS(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let o=ql();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=ql();return this.indexManager.getCollectionParents(e,l).next(h=>ne.forEach(h,p=>{const g=function(S,R){return new wa(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next(T=>{T.forEach((S,R)=>{c=c.insert(S,R)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o))).next(c=>{l.forEach((p,g)=>{const T=g.getKey();c.get(T)===null&&(c=c.insert(T,rn.newInvalidDocument(T)))});let h=ql();return c.forEach((p,g)=>{const T=l.get(p);T!==void 0&&Yl(T.mutation,g,Jn.empty(),Vt.now()),Jf(t,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Si(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:_O(o.bundledQuery),readTime:Si(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.overlays=new pt(Ee.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ys();return ne.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Et(e,t,l)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Rr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Ys(),l=t.length+1,c=new Ee(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new pt((g,T)=>g-T);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let T=l.get(g.largestBatchId);T===null&&(T=Ys(),l=l.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const h=Ys(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,T)=>h.set(g,T)),!(h.size()>=o)););return ne.resolve(h)}Et(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Rr.get(o.largestBatchId).delete(r.key);this.Rr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new XV(t,r));let l=this.Rr.get(t);l===void 0&&(l=Le(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.Vr=new Ot(zt.mr),this.gr=new Ot(zt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new zt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new zt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ee(new ut([])),r=new zt(t,e),o=new zt(t,e+1),l=[];return this.gr.forEachInRange([r,o],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ee(new ut([])),r=new zt(t,e),o=new zt(t,e+1);let l=Le();return this.gr.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new zt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ee.comparator(e.key,t.key)||Pe(e.Cr,t.Cr)}static pr(e,t){return Pe(e.Cr,t.Cr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(zt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new QV(l,t,r,o);this.mutationQueue.push(c);for(const h of o)this.Mr=this.Mr.add(new zt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Nr(r),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?wm:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,o],c=>{const h=this.Or(c.Cr);l.push(h)}),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(Pe);return t.forEach(o=>{const l=new zt(o,0),c=new zt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],h=>{r=r.add(h.Cr)})}),ne.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ee.isDocumentKey(l)||(l=l.child(""));const c=new zt(new Ee(l),0);let h=new Ot(Pe);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(h=h.add(p.Cr)),!0)},c),ne.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const o=this.Or(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ze(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ne.forEach(t.mutations,o=>{const l=new zt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new zt(t,0),o=this.Mr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.kr=e,this.docs=function(){return new pt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let r=ur();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():rn.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=ur();const c=t.path,h=new Ee(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:T}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||uV(lV(T),r)<=0||(o.has(T.key)||Jf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,r,o){Re()}qr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VO(this)}getSize(e){return ne.resolve(this.size)}}class VO extends RO{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.persistence=e,this.Qr=new io(t=>bm(t),Dm),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Om,this.targetCount=0,this.Kr=ma.Un()}forEachTarget(e,t){return this.Qr.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new ma(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ne.waitFor(l).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Qf(0),this.zr=!1,this.zr=!0,this.jr=new NO,this.referenceDelegate=e(this),this.Hr=new OO(this),this.indexManager=new vO,this.remoteDocumentCache=function(o){return new PO(o)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new yO(t),this.Yr=new DO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new xO(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const o=new kO(this.Gr.next());return this.referenceDelegate.Zr(),r(o).next(l=>this.referenceDelegate.Xr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}ei(e,t){return ne.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class kO extends fV{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.ti=new Om,this.ni=null}static ri(e){return new km(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,r=>{const o=Ee.fromPath(r);return this.si(e,o).next(l=>{l||t.removeEntry(o,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Nf{constructor(e,t){this.persistence=e,this.oi=new io(r=>pV(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=wO(this,t)}static ri(e,t){return new Nf(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(r,o)=>this.ar(e,r,o).next(l=>l?ne.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.qr(e,c=>this.ar(e,c,t).next(h=>{h||(r++,l.removeEntry(c,be.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=af(e.data.value)),t}ar(e,t,r){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return ne.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=o}static Yi(e,t){let r=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Um(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return fN()?8:hV(on())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,o,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new UO;return this._s(e,t,c).next(h=>{if(l.result=h,this.Xi)return this.us(e,t,c,h.size)})}).next(()=>l.result)}us(e,t,r,o){return r.documentReadCount<this.es?(ta()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(ta()<=Ue.DEBUG&&de("QueryEngine","Query:",na(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ts*o?(ta()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(t))):ne.resolve())}rs(e,t){if(AE(t))return ne.resolve(null);let r=Ei(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Xp(t,null,"F"),r=Ei(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Le(...l);return this.ns.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.cs(t,h);return this.ls(t,g,c,p.readTime)?this.rs(e,Xp(t,null,"F")):this.hs(e,g,t,p)}))})))}ss(e,t,r,o){return AE(t)||o.isEqual(be.min())?ne.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,o)?ne.resolve(null):(ta()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),na(t)),this.hs(e,c,t,aV(o,Wl)).next(h=>h))})}cs(e,t){let r=new Ot(pS(e));return t.forEach((o,l)=>{Jf(e,l)&&(r=r.add(l))}),r}ls(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}_s(e,t,r){return ta()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",na(t)),this.ns.getDocumentsMatchingQuery(e,t,es.min(),r)}hs(e,t,r,o){return this.ns.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LocalStore",qO=3e8;class BO{constructor(e,t,r,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new pt(Pe),this.Is=new io(l=>bm(l),Dm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function FO(n,e,t,r){return new BO(n,e,t,r)}async function US(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],h=[];let p=Le();for(const g of o){c.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}for(const g of l){h.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(r,p).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:h}))})})}function zO(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,g,T){const S=g.batch,R=S.keys();let b=ne.resolve();return R.forEach(M=>{b=b.next(()=>T.getEntry(p,M)).next(z=>{const q=g.docVersions.get(M);Ze(q!==null),z.version.compareTo(q)<0&&(S.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),T.addEntry(z)))})}),b.next(()=>h.mutationQueue.removeMutationBatch(p,S))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=Le();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function LS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function HO(n,e){const t=De(n),r=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const h=[];e.targetChanges.forEach((T,S)=>{const R=o.get(S);if(!R)return;h.push(t.Hr.removeMatchingKeys(l,T.removedDocuments,S).next(()=>t.Hr.addMatchingKeys(l,T.addedDocuments,S)));let b=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?b=b.withResumeToken(jt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):T.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(T.resumeToken,r)),o=o.insert(S,b),function(z,q,$){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=qO?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(R,b,T)&&h.push(t.Hr.updateTargetData(l,b))});let p=ur(),g=Le();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))}),h.push(GO(l,c,e.documentUpdates).next(T=>{p=T.Vs,g=T.fs})),!r.isEqual(be.min())){const T=t.Hr.getLastRemoteSnapshotVersion(l).next(S=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(T)}return ne.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Ts=o,l))}function GO(n,e,t){let r=Le(),o=Le();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=ur();return t.forEach((h,p)=>{const g=l.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):de(Lm,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Vs:c,fs:o}})}function KO(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YO(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Hr.getTargetData(r,e).next(l=>l?(o=l,ne.resolve(o)):t.Hr.allocateTargetId(r).next(c=>(o=new $r(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ts.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function em(n,e,t){const r=De(n),o=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Ca(c))throw c;de(Lm,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(o.target)}function OE(n,e,t){const r=De(n);let o=be.min(),l=Le();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,T){const S=De(p),R=S.Is.get(T);return R!==void 0?ne.resolve(S.Ts.get(R)):S.Hr.getTargetData(g,T)}(r,c,Ei(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{l=p})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?o:be.min(),t?l:Le())).next(h=>($O(r,PV(e),h),{documents:h,gs:l})))}function $O(n,e,t){let r=n.Es.get(e)||be.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Es.set(e,r)}class kE{constructor(){this.activeTargetIds=qV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QO{constructor(){this.ho=new kE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new kE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="ConnectivityMonitor";class LE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(UE,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(UE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function tm(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="RestConnection",jO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WO{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${o}`,this.wo=this.databaseId.database===wf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}So(e,t,r,o,l){const c=tm(),h=this.bo(e,t.toUriEncodedString());de(Rp,`Sending RPC '${e}' ${c}:`,h,r);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,l),this.vo(e,h,p,r).then(g=>(de(Rp,`Received RPC '${e}' ${c}: `,g),g),g=>{throw fa(Rp,`RPC '${e}' ${c} failed with error: `,g,"url: ",h,"request:",r),g})}Co(e,t,r,o,l,c){return this.So(e,t,r,o,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}bo(e,t){const r=jO[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class ZO extends WO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,o){const l=tm();return new Promise((c,h)=>{const p=new FA;p.setWithCredentials(!0),p.listenOnce(zA.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case of.NO_ERROR:const T=p.getResponseJson();de(tn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(T)),c(T);break;case of.TIMEOUT:de(tn,`RPC '${e}' ${l} timed out`),h(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const S=p.getStatus();if(de(tn,`RPC '${e}' ${l} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const b=R==null?void 0:R.error;if(b&&b.status&&b.message){const M=function(q){const $=q.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf($)>=0?$:ie.UNKNOWN}(b.status);h(new pe(M,b.message))}else h(new pe(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{de(tn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(o);de(tn,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",g,r,15)})}Wo(e,t,r){const o=tm(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=KA(),h=GA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const T=l.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=c.createWebChannel(T,p);let R=!1,b=!1;const M=new JO({Fo:q=>{b?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(R||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),R=!0),de(tn,`RPC '${e}' stream ${o} sending:`,q),S.send(q))},Mo:()=>S.close()}),z=(q,$,J)=>{q.listen($,W=>{try{J(W)}catch(le){setTimeout(()=>{throw le},0)}})};return z(S,Ll.EventType.OPEN,()=>{b||(de(tn,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),z(S,Ll.EventType.CLOSE,()=>{b||(b=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),z(S,Ll.EventType.ERROR,q=>{b||(b=!0,fa(tn,`RPC '${e}' stream ${o} transport errored:`,q),M.Uo(new pe(ie.UNAVAILABLE,"The operation could not be completed")))}),z(S,Ll.EventType.MESSAGE,q=>{var $;if(!b){const J=q.data[0];Ze(!!J);const W=J,le=(W==null?void 0:W.error)||(($=W[0])===null||$===void 0?void 0:$.error);if(le){de(tn,`RPC '${e}' stream ${o} received error:`,le);const ce=le.status;let ge=function(D){const V=It[D];if(V!==void 0)return wS(V)}(ce),P=le.message;ge===void 0&&(ge=ie.INTERNAL,P="Unknown error status: "+ce+" with message "+le.message),b=!0,M.Uo(new pe(ge,P)),S.close()}else de(tn,`RPC '${e}' stream ${o} received:`,J),M.Ko(J)}}),z(h,HA.STAT_EVENT,q=>{q.stat===zp.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===zp.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(n){return new iO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=o,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-r);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="PersistentStream";class BS{constructor(e,t,r,o,l,c,h,p){this.Ti=e,this.n_=r,this.r_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new qS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.i_===t&&this.V_(r,o)},r=>{e(()=>{const o=new pe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(o)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{r(()=>this.m_(o))}),this.stream.onMessage(o=>{r(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(qE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(qE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e2 extends BS{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=oO(this.serializer,e),r=function(l){if(!("targetChange"in l))return be.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?be.min():c.readTime?Si(c.readTime):be.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=function(l,c){let h;const p=c.target;if(h=$p(p)?{documents:uO(l,p)}:{query:cO(l,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=bS(l,c.resumeToken);const g=jp(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(be.min())>0){h.readTime=Mf(l,c.snapshotVersion.toTimestamp());const g=jp(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=hO(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.I_(t)}}class t2 extends BS{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=lO(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Zp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aO(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class i2 extends n2{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,Wp(t,r),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ie.UNKNOWN,l.toString())})}Co(e,t,r,o,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(e,Wp(t,r),o,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ie.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class r2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(lr(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class s2{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{so(this)&&(de(Ws,"Restarting streams for network reachability change."),await async function(p){const g=De(p);g.W_.add(4),await du(g),g.j_.set("Unknown"),g.W_.delete(4),await ih(g)}(this))})}),this.j_=new r2(r,o)}}async function ih(n){if(so(n))for(const e of n.G_)await e(!0)}async function du(n){for(const e of n.G_)await e(!1)}function FS(n,e){const t=De(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),zm(t)?Fm(t):Ra(t).c_()&&Bm(t,e))}function qm(n,e){const t=De(n),r=Ra(t);t.K_.delete(e),r.c_()&&zS(t,e),t.K_.size===0&&(r.c_()?r.P_():so(t)&&t.j_.set("Unknown"))}function Bm(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ra(n).y_(e)}function zS(n,e){n.H_.Ne(e),Ra(n).w_(e)}function Fm(n){n.H_=new ZV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Ra(n).start(),n.j_.B_()}function zm(n){return so(n)&&!Ra(n).u_()&&n.K_.size>0}function so(n){return De(n).W_.size===0}function HS(n){n.H_=void 0}async function o2(n){n.j_.set("Online")}async function a2(n){n.K_.forEach((e,t)=>{Bm(n,e)})}async function l2(n,e){HS(n),zm(n)?(n.j_.q_(e),Fm(n)):n.j_.set("Unknown")}async function u2(n,e,t){if(n.j_.set("Online"),e instanceof IS&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const h of l.targetIds)o.K_.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.K_.delete(h),o.H_.removeTarget(h))}(n,e)}catch(r){de(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xf(n,r)}else if(e instanceof cf?n.H_.We(e):e instanceof RS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(be.min()))try{const r=await LS(n.localStore);t.compareTo(r)>=0&&await function(l,c){const h=l.H_.ot(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const T=l.K_.get(g);T&&l.K_.set(g,T.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const T=l.K_.get(p);if(!T)return;l.K_.set(p,T.withResumeToken(jt.EMPTY_BYTE_STRING,T.snapshotVersion)),zS(l,p);const S=new $r(T.target,p,g,T.sequenceNumber);Bm(l,S)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){de(Ws,"Failed to raise snapshot:",r),await xf(n,r)}}async function xf(n,e,t){if(!Ca(e))throw e;n.W_.add(1),await du(n),n.j_.set("Offline"),t||(t=()=>LS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(Ws,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await ih(n)})}function GS(n,e){return e().catch(t=>xf(n,t,e))}async function rh(n){const e=De(n),t=rs(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:wm;for(;c2(e);)try{const o=await KO(e.localStore,r);if(o===null){e.U_.length===0&&t.P_();break}r=o.batchId,f2(e,o)}catch(o){await xf(e,o)}KS(e)&&YS(e)}function c2(n){return so(n)&&n.U_.length<10}function f2(n,e){n.U_.push(e);const t=rs(n);t.c_()&&t.S_&&t.b_(e.mutations)}function KS(n){return so(n)&&!rs(n).u_()&&n.U_.length>0}function YS(n){rs(n).start()}async function h2(n){rs(n).C_()}async function d2(n){const e=rs(n);for(const t of n.U_)e.b_(t.mutations)}async function p2(n,e,t){const r=n.U_.shift(),o=xm.from(r,e,t);await GS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await rh(n)}async function m2(n,e){e&&rs(n).S_&&await async function(r,o){if(function(c){return WV(c)&&c!==ie.ABORTED}(o.code)){const l=r.U_.shift();rs(r).h_(),await GS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await rh(r)}}(n,e),KS(n)&&YS(n)}async function BE(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),de(Ws,"RemoteStore received new credentials");const r=so(t);t.W_.add(3),await du(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await ih(t)}async function g2(n,e){const t=De(n);e?(t.W_.delete(2),await ih(t)):e||(t.W_.add(2),await du(t),t.j_.set("Unknown"))}function Ra(n){return n.J_||(n.J_=function(t,r,o){const l=De(t);return l.M_(),new e2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{xo:o2.bind(null,n),No:a2.bind(null,n),Lo:l2.bind(null,n),p_:u2.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),zm(n)?Fm(n):n.j_.set("Unknown")):(await n.J_.stop(),HS(n))})),n.J_}function rs(n){return n.Y_||(n.Y_=function(t,r,o){const l=De(t);return l.M_(),new t2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:h2.bind(null,n),Lo:m2.bind(null,n),D_:d2.bind(null,n),v_:p2.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await rh(n)):(await n.Y_.stop(),n.U_.length>0&&(de(Ws,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,h=new Hm(e,t,c,o,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Ca(n))return new pe(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=ql(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.Z_=new pt(Ee.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ga{constructor(e,t,r,o,l,c,h,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new ga(e,t,aa.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class _2{constructor(){this.queries=zE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const o=De(t),l=o.queries;o.queries=zE(),l.forEach((c,h)=>{for(const p of h.ta)p.onError(r)})})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function zE(){return new io(n=>dS(n),Wf)}async function v2(n,e){const t=De(n);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.na()&&e.ra()&&(r=2):(l=new y2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(o,!0);break;case 1:l.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Gm(c,`Initialization of query '${na(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Km(t)}async function T2(n,e){const t=De(n),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?o=e.ra()?0:1:!l.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function E2(n,e){const t=De(n);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.ta)h.oa(o)&&(r=!0);c.ea=o}}r&&Km(t)}function A2(n,e,t){const r=De(n),o=r.queries.get(e);if(o)for(const l of o.ta)l.onError(t);r.queries.delete(e)}function Km(n){n.ia.forEach(e=>{e.next()})}var nm,HE;(HE=nm||(nm={}))._a="default",HE.Cache="cache";class S2{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class QS{constructor(e){this.key=e}}class C2{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=pS(e),this.wa=new aa(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new FE,o=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,S)=>{const R=o.get(T),b=Jf(this.query,S)?S:null,M=!!R&&this.mutatedKeys.has(R.key),z=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let q=!1;R&&b?R.data.isEqual(b.data)?M!==z&&(r.track({type:3,doc:b}),q=!0):this.va(R,b)||(r.track({type:2,doc:b}),q=!0,(p&&this.ya(b,p)>0||g&&this.ya(b,g)<0)&&(h=!0)):!R&&b?(r.track({type:0,doc:b}),q=!0):R&&!b&&(r.track({type:1,doc:R}),q=!0,(p||g)&&(h=!0)),q&&(b?(c=c.add(b),l=z?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),r.track({type:1,doc:T})}return{wa:c,Da:r,ls:h,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((T,S)=>function(b,M){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return z(b)-z(M)}(T.type,S.type)||this.ya(T.doc,S.doc)),this.Ca(r),o=o!=null&&o;const h=t&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,c.length!==0||g?{snapshot:new ga(this.query,e.wa,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new FE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Le(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new QS(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new $S(r))}),t}Oa(e){this.fa=e.gs,this.pa=Le();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ga.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ym="SyncEngine";class w2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R2{constructor(e){this.key=e,this.Ba=!1}}class I2{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new io(h=>dS(h),Wf),this.qa=new Map,this.Qa=new Set,this.$a=new pt(Ee.comparator),this.Ua=new Map,this.Ka=new Om,this.Wa={},this.Ga=new Map,this.za=ma.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function b2(n,e,t=!0){const r=eC(n);let o;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Na()):o=await XS(r,e,t,!0),o}async function D2(n,e){const t=eC(n);await XS(t,e,!0,!1)}async function XS(n,e,t,r){const o=await YO(n.localStore,Ei(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await M2(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&FS(n.remoteStore,o),h}async function M2(n,e,t,r,o){n.Ha=(S,R,b)=>async function(z,q,$,J){let W=q.view.ba($);W.ls&&(W=await OE(z.localStore,q.query,!1).then(({documents:P})=>q.view.ba(P,W)));const le=J&&J.targetChanges.get(q.targetId),ce=J&&J.targetMismatches.get(q.targetId)!=null,ge=q.view.applyChanges(W,z.isPrimaryClient,le,ce);return KE(z,q.targetId,ge.Ma),ge.snapshot}(n,S,R,b);const l=await OE(n.localStore,e,!0),c=new C2(e,l.gs),h=c.ba(l.documents),p=hu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),g=c.applyChanges(h,n.isPrimaryClient,p);KE(n,t,g.Ma);const T=new w2(e,t,c);return n.ka.set(e,T),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),g.snapshot}async function N2(n,e,t){const r=De(n),o=r.ka.get(e),l=r.qa.get(o.targetId);if(l.length>1)return r.qa.set(o.targetId,l.filter(c=>!Wf(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await em(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&qm(r.remoteStore,o.targetId),im(r,o.targetId)}).catch(Sa)):(im(r,o.targetId),await em(r.localStore,o.targetId,!0))}async function x2(n,e){const t=De(n),r=t.ka.get(e),o=t.qa.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qm(t.remoteStore,r.targetId))}async function P2(n,e,t){const r=B2(n);try{const o=await function(c,h){const p=De(c),g=Vt.now(),T=h.reduce((b,M)=>b.add(M.key),Le());let S,R;return p.persistence.runTransaction("Locally write mutations","readwrite",b=>{let M=ur(),z=Le();return p.ds.getEntries(b,T).next(q=>{M=q,M.forEach(($,J)=>{J.isValidDocument()||(z=z.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(b,M)).next(q=>{S=q;const $=[];for(const J of h){const W=YV(J,S.get(J.key).overlayedDocument);W!=null&&$.push(new ro(J.key,W,rS(W.value.mapValue),Ai.exists(!0)))}return p.mutationQueue.addMutationBatch(b,g,$,h)}).next(q=>{R=q;const $=q.applyToLocalDocumentSet(S,z);return p.documentOverlayCache.saveOverlays(b,q.batchId,$)})}).then(()=>({batchId:R.batchId,changes:gS(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let g=c.Wa[c.currentUser.toKey()];g||(g=new pt(Pe)),g=g.insert(h,p),c.Wa[c.currentUser.toKey()]=g}(r,o.batchId,t),await pu(r,o.changes),await rh(r.remoteStore)}catch(o){const l=Gm(o,"Failed to persist write");t.reject(l)}}async function jS(n,e){const t=De(n);try{const r=await HO(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ua.get(l);c&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Ba=!0:o.modifiedDocuments.size>0?Ze(c.Ba):o.removedDocuments.size>0&&(Ze(c.Ba),c.Ba=!1))}),await pu(t,r,e)}catch(r){await Sa(r)}}function GE(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.ka.forEach((l,c)=>{const h=c.view.sa(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const p=De(c);p.onlineState=h;let g=!1;p.queries.forEach((T,S)=>{for(const R of S.ta)R.sa(h)&&(g=!0)}),g&&Km(p)}(r.eventManager,e),o.length&&r.La.p_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V2(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Ua.get(e),l=o&&o.key;if(l){let c=new pt(Ee.comparator);c=c.insert(l,rn.newNoDocument(l,be.min()));const h=Le().add(l),p=new th(be.min(),new Map,new pt(Pe),c,h);await jS(r,p),r.$a=r.$a.remove(l),r.Ua.delete(e),$m(r)}else await em(r.localStore,e,!1).then(()=>im(r,e,t)).catch(Sa)}async function O2(n,e){const t=De(n),r=e.batch.batchId;try{const o=await zO(t.localStore,e);JS(t,r,null),WS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pu(t,o)}catch(o){await Sa(o)}}async function k2(n,e,t){const r=De(n);try{const o=await function(c,h){const p=De(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let T;return p.mutationQueue.lookupMutationBatch(g,h).next(S=>(Ze(S!==null),T=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,T,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T)).next(()=>p.localDocuments.getDocuments(g,T))})}(r.localStore,e);JS(r,e,t),WS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pu(r,o)}catch(o){await Sa(o)}}function WS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function JS(n,e,t){const r=De(n);let o=r.Wa[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Wa[r.currentUser.toKey()]=o}}function im(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||ZS(n,r)})}function ZS(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(qm(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),$m(n))}function KE(n,e,t){for(const r of t)r instanceof $S?(n.Ka.addReference(r.key,e),U2(n,r)):r instanceof QS?(de(Ym,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||ZS(n,r.key)):Re()}function U2(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(de(Ym,"New document in limbo: "+t),n.Qa.add(r),$m(n))}function $m(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Ee(ut.fromString(e)),r=n.za.next();n.Ua.set(r,new R2(t)),n.$a=n.$a.insert(t,r),FS(n.remoteStore,new $r(Ei(fS(t.path)),r,"TargetPurposeLimboResolution",Qf.ae))}}async function pu(n,e,t){const r=De(n),o=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((h,p)=>{c.push(r.Ha(p,e,t).then(g=>{var T;if((g||t)&&r.isPrimaryClient){const S=g?!g.fromCache:(T=t==null?void 0:t.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=Um.Yi(p.targetId,g);l.push(S)}}))}),await Promise.all(c),r.La.p_(o),await async function(p,g){const T=De(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ne.forEach(g,R=>ne.forEach(R.Hi,b=>T.persistence.referenceDelegate.addReference(S,R.targetId,b)).next(()=>ne.forEach(R.Ji,b=>T.persistence.referenceDelegate.removeReference(S,R.targetId,b)))))}catch(S){if(!Ca(S))throw S;de(Lm,"Failed to update sequence numbers: "+S)}for(const S of g){const R=S.targetId;if(!S.fromCache){const b=T.Ts.get(R),M=b.snapshotVersion,z=b.withLastLimboFreeSnapshotVersion(M);T.Ts=T.Ts.insert(R,z)}}}(r.localStore,l))}async function L2(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){de(Ym,"User change. New user:",e.toKey());const r=await US(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(h=>{h.forEach(p=>{p.reject(new pe(ie.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(t,r.Rs)}}function q2(n,e){const t=De(n),r=t.Ua.get(e);if(r&&r.Ba)return Le().add(r.key);{let o=Le();const l=t.qa.get(e);if(!l)return o;for(const c of l){const h=t.ka.get(c);o=o.unionWith(h.view.Sa)}return o}}function eC(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V2.bind(null,e),e.La.p_=E2.bind(null,e.eventManager),e.La.Ja=A2.bind(null,e.eventManager),e}function B2(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k2.bind(null,e),e}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return FO(this.persistence,new LO,e.initialUser,this.serializer)}Xa(e){return new kS(km.ri,this.serializer)}Za(e){return new QO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class F2 extends Pf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ze(this.persistence.referenceDelegate instanceof Nf);const r=this.persistence.referenceDelegate.garbageCollector;return new SO(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new kS(r=>Nf.ri(r,t),this.serializer)}}class rm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=L2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _2}()}createDatastore(e){const t=nh(e.databaseInfo.databaseId),r=function(l){return new ZO(l)}(e.databaseInfo);return function(l,c,h,p){return new i2(l,c,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,l,c,h){return new s2(r,o,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>GE(this.syncEngine,t,0),function(){return LE.D()?new LE:new XO}())}createSyncEngine(e,t){return function(o,l,c,h,p,g,T){const S=new I2(o,l,c,h,p,g);return T&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=De(o);de(Ws,"RemoteStore shutting down."),l.W_.add(5),await du(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}rm.provider={build:()=>new rm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class H2{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=QA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{de(ss,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(de(ss,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bp(n,e){n.asyncQueue.verifyOperationInProgress(),de(ss,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await US(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function YE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await G2(n);de(ss,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>BE(e.remoteStore,o)),n._onlineComponents=e}async function G2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ss,"Using user provided OfflineComponentProvider");try{await bp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;fa("Error using user provided cache. Falling back to memory cache: "+t),await bp(n,new Pf)}}else de(ss,"Using default OfflineComponentProvider"),await bp(n,new F2(void 0));return n._offlineComponents}async function tC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ss,"Using user provided OnlineComponentProvider"),await YE(n,n._uninitializedComponentsProvider._online)):(de(ss,"Using default OnlineComponentProvider"),await YE(n,new rm))),n._onlineComponents}function K2(n){return tC(n).then(e=>e.syncEngine)}async function Y2(n){const e=await tC(n),t=e.eventManager;return t.onListen=b2.bind(null,e.syncEngine),t.onUnlisten=N2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=x2.bind(null,e.syncEngine),t}function $2(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,p,g){const T=new z2({next:R=>{T.su(),c.enqueueAndForget(()=>T2(l,S)),R.fromCache&&p.source==="server"?g.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),S=new S2(h,T,{includeMetadataChanges:!0,Ta:!0});return v2(l,S)}(await Y2(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n,e,t){if(!t)throw new pe(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Q2(n,e,t,r){if(e===!0&&r===!0)throw new pe(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QE(n){if(!Ee.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XE(n){if(Ee.isDocumentKey(n))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function ru(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sh(n);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firestore.googleapis.com",jE=!0;class WE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rC,this.ssl=jE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EO)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JP;switch(r.type){case"firstParty":return new nV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=$E.get(t);r&&(de("ComponentProvider","Removing Datastore"),$E.delete(t),r.terminate())}(this),Promise.resolve()}}function X2(n,e,t,r={}){var o;const l=(n=ru(n,oh))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;l.host!==rC&&l.host!==h&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:h,ssl:!1,emulatorOptions:r});if(!Zr(p,c)&&(n._setSettings(p),r.mockUserToken)){let g,T;if(typeof r.mockUserToken=="string")g=r.mockUserToken,T=nn.MOCK_USER;else{g=sN(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new ZP(new YA(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oo(this.firestore,e,this._query)}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class Jr extends oo{constructor(e,t,r){super(e,t,fS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Ee(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function JE(n,e,...t){if(n=vn(n),iC("collection","path",e),n instanceof oh){const r=ut.fromString(e,...t);return XE(r),new Jr(n,null,r)}{if(!(n instanceof Kn||n instanceof Jr))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return XE(r),new Jr(n.firestore,null,r)}}function ff(n,e,...t){if(n=vn(n),arguments.length===1&&(e=QA.newId()),iC("doc","path",e),n instanceof oh){const r=ut.fromString(e,...t);return QE(r),new Kn(n,null,new Ee(r))}{if(!(n instanceof Kn||n instanceof Jr))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return QE(r),new Kn(n.firestore,n instanceof Jr?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="AsyncQueue";class e0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new qS(this,"async_queue_retry"),this.Su=()=>{const r=Ip();r&&de(ZE,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Wr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ca(e))throw e;de(ZE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const o=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(r);throw lr("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=Hm.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(o),o}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ah extends oh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new e0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function j2(n,e){const t=typeof n=="object"?n:_m(),r=typeof n=="string"?n:wf,o=to(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=iN("firestore");l&&X2(o,...l)}return o}function sC(n){if(n._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||W2(n),n._firestoreClient}function W2(n){var e,t,r;const o=n._freezeSettings(),l=function(h,p,g,T){return new yV(h,p,g,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,nC(T.experimentalLongPollingOptions),T.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new H2(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(jt.fromBase64String(e))}catch(t){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ya(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=/^__.*__$/;class Z2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}function aC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Wm{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:r,Qu:!1});return o.$u(e),o}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:r,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Vf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(aC(this.Lu)&&J2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ek{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nh(e)}ju(e,t,r,o=!1){return new Wm({Lu:e,methodName:t,zu:r,path:Xt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lC(n){const e=n._freezeSettings(),t=nh(n._databaseId);return new ek(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tk(n,e,t,r,o,l={}){const c=n.ju(l.merge||l.mergeFields?2:0,e,t,o);fC("Data must be an object, but it was:",c,r);const h=uC(r,c);let p,g;if(l.merge)p=new Jn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const S of l.mergeFields){const R=ik(e,S,t);if(!c.contains(R))throw new pe(ie.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);sk(T,R)||T.push(R)}p=new Jn(T),g=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=c.fieldTransforms;return new Z2(new zn(h),p,g)}function nk(n,e,t,r=!1){return Jm(t,n.ju(r?4:3,e))}function Jm(n,e){if(cC(n=vn(n)))return fC("Unsupported field value:",e,n),uC(n,e);if(n instanceof oC)return function(r,o){if(!aC(o.Lu))throw o.Wu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,o){const l=[];let c=0;for(const h of r){let p=Jm(h,o.Ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(r,o){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BV(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Vt.fromDate(r);return{timestampValue:Mf(o.serializer,l)}}if(r instanceof Vt){const l=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mf(o.serializer,l)}}if(r instanceof Xm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:bS(o.serializer,r._byteString)};if(r instanceof Kn){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof jm)return function(c,h){return{mapValue:{fields:{[nS]:{stringValue:iS},[Rf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Wu("VectorValues must only contain numeric values.");return Mm(h.serializer,g)})}}}}}}(r,o);throw o.Wu(`Unsupported field value: ${sh(r)}`)}(n,e)}function uC(n,e){const t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(n,(r,o)=>{const l=Jm(o,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function cC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof Xm||n instanceof ya||n instanceof Kn||n instanceof oC||n instanceof jm)}function fC(n,e,t){if(!cC(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=sh(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function ik(n,e,t){if((e=vn(e))instanceof Qm)return e._internalPath;if(typeof e=="string")return hC(n,e);throw Vf("Field path arguments must be of type string or ",n,!1,void 0,t)}const rk=new RegExp("[~\\*/\\[\\]]");function hC(n,e,t){if(e.search(rk)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qm(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vf(n,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new pe(ie.INVALID_ARGUMENT,h+n+p)}function sk(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ok extends dC{data(){return super.data()}}function Zm(n,e){return typeof e=="string"?hC(n,e):e instanceof Qm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class pC extends eg{}function lk(n,e,...t){let r=[];e instanceof eg&&r.push(e),r=r.concat(t),function(l){const c=l.filter(p=>p instanceof ng).length,h=l.filter(p=>p instanceof tg).length;if(c>1||c>0&&h>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class tg extends pC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tg(e,t,r)}_apply(e){const t=this._parse(e);return mC(e._query,t),new oo(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=lC(e.firestore);return function(l,c,h,p,g,T,S){let R;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){n0(S,T);const M=[];for(const z of S)M.push(t0(p,l,z));R={arrayValue:{values:M}}}else R=t0(p,l,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||n0(S,T),R=nk(h,c,S,T==="in"||T==="not-in");return bt.create(g,T,R)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ng extends eg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ng(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const h=l.getFlattenedFilters();for(const p of h)mC(c,p),c=Qp(c,p)}(e._query,t),new oo(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ig extends pC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ig(e,t)}_apply(e){const t=function(o,l,c){if(o.startAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tu(l,c)}(e._query,this._field,this._direction);return new oo(e.firestore,e.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new wa(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function uk(n,e="asc"){const t=e,r=Zm("orderBy",n);return ig._create(r,t)}function t0(n,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hS(e)&&t.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Ee.isDocumentKey(r))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gE(n,new Ee(r))}if(t instanceof Kn)return gE(n,t._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(t)}.`)}function n0(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mC(n,e){const t=function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ck{convertValue(e,t="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return no(e,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Rf].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>At(c.doubleValue));return new jm(l)}convertGeoPoint(e){return new Xm(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=ts(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ze(VS(r));const o=new Zl(r.get(1),r.get(3)),l=new Ee(r.popFirst(5));return o.isEqual(t)||lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hk extends dC{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hf extends hk{data(e={}){return super.data(e)}}class dk{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new jc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hf(this._firestore,this._userDataWriter,r.key,r,new jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const p=new hf(o._firestore,o._userDataWriter,h.doc.key,h.doc,new jc(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new hf(o._firestore,o._userDataWriter,h.doc.key,h.doc,new jc(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,T=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),T=c.indexOf(h.doc.key)),{type:pk(h.type),doc:p,oldIndex:g,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}class mk extends ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function gk(n){n=ru(n,oo);const e=ru(n.firestore,ah),t=sC(e),r=new mk(e);return ak(n._query),$2(t,n._query).then(o=>new dk(e,r,n,o))}function yk(n){return gC(ru(n.firestore,ah),[new Nm(n._key,Ai.none())])}function _k(n,e){const t=ru(n.firestore,ah),r=ff(n),o=fk(n.converter,e);return gC(t,[tk(lC(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Ai.exists(!1))]).then(()=>r)}function gC(n,e){return function(r,o){const l=new Wr;return r.asyncQueue.enqueueAndForget(async()=>P2(await K2(r),o,l)),l.promise}(sC(n),e)}(function(e,t=!0){(function(o){Aa=o})(Ea),Ii(new ei("firestore",(r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new ah(new eV(r.getProvider("auth-internal")),new iV(c,r.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(g.options.projectId,T)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Gn(rE,sE,e),Gn(rE,sE,"esm2017")})();function rg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function yC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vk=yC,_C=new eo("auth","Firebase",yC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new Kf("@firebase/auth");function Tk(n,...e){Of.logLevel<=Ue.WARN&&Of.warn(`Auth (${Ea}): ${n}`,...e)}function df(n,...e){Of.logLevel<=Ue.ERROR&&Of.error(`Auth (${Ea}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,...e){throw sg(n,...e)}function Ci(n,...e){return sg(n,...e)}function vC(n,e,t){const r=Object.assign(Object.assign({},vk()),{[e]:t});return new eo("auth","Firebase",r).create(e,{appName:n.name})}function $s(n){return vC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _C.create(n,...e)}function Ie(n,e,...t){if(!n)throw sg(e,...t)}function ir(n){const e="INTERNAL ASSERTION FAILED: "+n;throw df(e),new Error(e)}function fr(n,e){n||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Ek(){return i0()==="http:"||i0()==="https:"}function i0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ek()||uA()||"connection"in navigator)?navigator.onLine:!0}function Sk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,fr(t>e,"Short delay should be less than long delay!"),this.isMobile=oN()||uN()}get(){return Ak()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(n,e){fr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rk=new mu(3e4,6e4);function ag(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ia(n,e,t,r,o={}){return EC(n,o,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=cu(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},l);return lN()||(g.referrerPolicy="no-referrer"),TC.fetch()(await AC(n,n.config.apiHost,t,h),g)})}async function EC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ck),e);try{const o=new bk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Wc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Wc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Wc(n,"user-disabled",c);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw vC(n,T,g);cr(n,T)}}catch(o){if(o instanceof ni)throw o;cr(n,"network-request-failed",{message:String(o)})}}async function Ik(n,e,t,r,o={}){const l=await Ia(n,e,t,r,o);return"mfaPendingCredential"in l&&cr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function AC(n,e,t,r){const o=`${e}${t}?${r}`,l=n,c=l.config.emulator?og(n.config,o):`${n.config.apiScheme}://${o}`;return wk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class bk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ci(this.auth,"network-request-failed")),Rk.get())})}}function Wc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ci(n,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e){return Ia(n,"POST","/v1/accounts:delete",e)}async function kf(n,e){return Ia(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mk(n,e=!1){const t=vn(n),r=await t.getIdToken(e),o=lg(r);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:$l(Dp(o.auth_time)),issuedAtTime:$l(Dp(o.iat)),expirationTime:$l(Dp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Dp(n){return Number(n)*1e3}function lg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const o=sA(t);return o?JSON.parse(o):(df("Failed to decode base64 JWT payload"),null)}catch(o){return df("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function r0(n){const e=lg(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ni&&Nk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Nk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(n){var e;const t=n.auth,r=await n.getIdToken(),o=await su(n,kf(t,{idToken:r}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?SC(l.providerUserInfo):[],h=Vk(n.providerData,c),p=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),T=p?g:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new om(l.createdAt,l.lastLoginAt),isAnonymous:T};Object.assign(n,S)}async function Pk(n){const e=vn(n);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Vk(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function SC(n){return n.map(e=>{var{providerId:t}=e,r=rg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(n,e){const t=await EC(n,{},async()=>{const r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await AC(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",TC.fetch()(c,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kk(n,e){return Ia(n,"POST","/v2/accounts:revokeToken",ag(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=r0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await Ok(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,c=new la;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new om(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Mk(this,e)}reload(){return Pk(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ti(this.auth.app))return Promise.reject($s(this.auth));const e=await this.getIdToken();return await su(this,Dk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,c,h,p,g,T;const S=(r=t.displayName)!==null&&r!==void 0?r:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,M=(c=t.photoURL)!==null&&c!==void 0?c:void 0,z=(h=t.tenantId)!==null&&h!==void 0?h:void 0,q=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(g=t.createdAt)!==null&&g!==void 0?g:void 0,J=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:W,emailVerified:le,isAnonymous:ce,providerData:ge,stsTokenManager:P}=t;Ie(W&&P,e,"internal-error");const I=la.fromJSON(this.name,P);Ie(typeof W=="string",e,"internal-error"),zr(S,e.name),zr(R,e.name),Ie(typeof le=="boolean",e,"internal-error"),Ie(typeof ce=="boolean",e,"internal-error"),zr(b,e.name),zr(M,e.name),zr(z,e.name),zr(q,e.name),zr($,e.name),zr(J,e.name);const D=new Zn({uid:W,auth:e,email:R,emailVerified:le,displayName:S,isAnonymous:ce,photoURL:M,phoneNumber:b,tenantId:z,stsTokenManager:I,createdAt:$,lastLoginAt:J});return ge&&Array.isArray(ge)&&(D.providerData=ge.map(V=>Object.assign({},V))),q&&(D._redirectEventId=q),D}static async _fromIdTokenResponse(e,t,r=!1){const o=new la;o.updateFromServerResponse(t);const l=new Zn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Uf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?SC(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),h=new la;h.updateFromIdToken(r);const p=new Zn({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new om(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new Map;function rr(n){fr(n instanceof Function,"Expected a class definition");let e=s0.get(n);return e?(fr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,s0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CC.type="NONE";const o0=CC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class ua{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=pf(this.userKey,o.apiKey,l),this.fullPersistenceKey=pf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kf(this.auth,{idToken:e}).catch(()=>{});return t?Zn._fromGetAccountInfoResponse(this.auth,t,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ua(rr(o0),e,r);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||rr(o0);const c=pf(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const T=await g._get(c);if(T){let S;if(typeof T=="string"){const R=await kf(e,{idToken:T}).catch(()=>{});if(!R)break;S=await Zn._fromGetAccountInfoResponse(e,R,T)}else S=Zn._fromJSON(e,T);g!==l&&(h=S),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ua(l,e,r):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new ua(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MC(e))return"Blackberry";if(NC(e))return"Webos";if(RC(e))return"Safari";if((e.includes("chrome/")||IC(e))&&!e.includes("edge/"))return"Chrome";if(DC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wC(n=on()){return/firefox\//i.test(n)}function RC(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IC(n=on()){return/crios\//i.test(n)}function bC(n=on()){return/iemobile/i.test(n)}function DC(n=on()){return/android/i.test(n)}function MC(n=on()){return/blackberry/i.test(n)}function NC(n=on()){return/webos/i.test(n)}function ug(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Uk(n=on()){var e;return ug(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lk(){return cN()&&document.documentMode===10}function xC(n=on()){return ug(n)||DC(n)||NC(n)||MC(n)||/windows phone/i.test(n)||bC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n,e=[]){let t;switch(n){case"Browser":t=a0(on());break;case"Worker":t=`${a0(on())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(n,e={}){return Ia(n,"GET","/v2/passwordPolicy",ag(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=6;class zk{constructor(e){var t,r,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:Fk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l0(this),this.idTokenSubscription=new l0(this),this.beforeStateQueue=new qk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kf(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ti(this.app))return Promise.reject($s(this));const t=e?vn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ti(this.app)?Promise.reject($s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ti(this.app)?Promise.reject($s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bk(this),t=new zk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Tk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function cg(n){return vn(n)}class l0{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gk(n){fg=n}function Kk(n){return fg.loadJS(n)}function Yk(){return fg.gapiScript}function $k(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n,e){const t=to(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Zr(l,e??{}))return o;cr(o,"already-initialized")}return t.initialize({options:e})}function Xk(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(rr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jk(n,e,t){const r=cg(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=VC(e),{host:c,port:h}=Wk(e),p=h===null?"":`:${h}`,g={url:`${l}//${c}${p}/`},T=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Zr(g,r.config.emulator)&&Zr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Jk()}function VC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Wk(n){const e=VC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:u0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:u0(c)}}}function u0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Jk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,t){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(n,e){return Ik(n,"POST","/v1/accounts:signInWithIdp",ag(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="http://localhost";class Js extends OC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,l=rg(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Js(r,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ca(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ca(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ca(e,t)}buildRequest(){const e={requestUri:Zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends kC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends gu{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Js._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gr.credential(t,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends gu{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends gu{constructor(){super("twitter.com")}static credential(e,t){return Js._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Yr.credential(t,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await Zn._fromIdTokenResponse(e,r,o),c=c0(r);return new _a({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=c0(r);return new _a({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function c0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends ni{constructor(e,t,r,o){var l;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Lf(e,t,r,o)}}function UC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(n,l,e,r):l})}async function eU(n,e,t=!1){const r=await su(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _a._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(n,e,t=!1){const{auth:r}=n;if(Ti(r.app))return Promise.reject($s(r));const o="reauthenticate";try{const l=await su(n,UC(r,o,e,n),t);Ie(l.idToken,r,"internal-error");const c=lg(l.idToken);Ie(c,r,"internal-error");const{sub:h}=c;return Ie(n.uid===h,r,"user-mismatch"),_a._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&cr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(n,e,t=!1){if(Ti(n.app))return Promise.reject($s(n));const r="signIn",o=await UC(n,r,e),l=await _a._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(l.user),l}function iU(n,e,t,r){return vn(n).onIdTokenChanged(e,t,r)}function rU(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=1e3,oU=10;class qC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Lk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oU):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qC.type="LOCAL";const aU=qC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BC.type="SESSION";const FC=BC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new lh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(c).map(async g=>g(t.origin,l)),p=await lU(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const g=hg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(S){const R=S;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(R.data.response);break;default:clearTimeout(T),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function cU(n){wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function fU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dU(){return zC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="firebaseLocalStorageDb",pU=1,Bf="firebaseLocalStorage",GC="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uh(n,e){return n.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function mU(){const n=indexedDB.deleteDatabase(HC);return new yu(n).toPromise()}function am(){const n=indexedDB.open(HC,pU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Bf,{keyPath:GC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Bf)?e(r):(r.close(),await mU(),e(await am()))})})}async function f0(n,e,t){const r=uh(n,!0).put({[GC]:e,value:t});return new yu(r).toPromise()}async function gU(n,e){const t=uh(n,!1).get(e),r=await new yu(t).toPromise();return r===void 0?null:r.value}function h0(n,e){const t=uh(n,!0).delete(e);return new yu(t).toPromise()}const yU=800,_U=3;class KC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_U)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(dU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await fU(),!this.activeServiceWorker)return;this.sender=new uU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await f0(e,qf,"1"),await h0(e,qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>gU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>h0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=uh(o,!1).getAll();return new yu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KC.type="LOCAL";const vU=KC;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(n,e){return e?rr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends OC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ca(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EU(n){return nU(n.auth,new dg(n),n.bypassAuthState)}function AU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),tU(t,new dg(n),n.bypassAuthState)}async function SU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),eU(t,new dg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EU;case"linkViaPopup":case"linkViaRedirect":return SU;case"reauthViaPopup":case"reauthViaRedirect":return AU;default:cr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=new mu(2e3,1e4);class sa extends YC{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CU.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU="pendingRedirect",mf=new Map;class RU extends YC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const r=await IU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IU(n,e){const t=MU(e),r=DU(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function bU(n,e){mf.set(n._key(),e)}function DU(n){return rr(n._redirectPersistence)}function MU(n){return pf(wU,n.config.apiKey,n.name)}async function NU(n,e,t=!1){if(Ti(n.app))return Promise.reject($s(n));const r=cg(n),o=TU(r,e),c=await new RU(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=10*60*1e3;class PU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$C(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ci(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xU&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(e))}saveEventToCache(e){this.cachedEventUids.add(d0(e)),this.lastProcessedEventTime=Date.now()}}function d0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $C({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $C(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e={}){return Ia(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UU=/^https?/;async function LU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OU(n);for(const t of e)try{if(qU(t))return}catch{}cr(n,"unauthorized-domain")}function qU(n){const e=sm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!UU.test(t))return!1;if(kU.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=new mu(3e4,6e4);function p0(){const n=wi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FU(n){return new Promise((e,t)=>{var r,o,l;function c(){p0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p0(),t(Ci(n,"network-request-failed"))},timeout:BU.get()})}if(!((o=(r=wi().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=wi().gapi)===null||l===void 0)&&l.load)c();else{const h=$k("iframefcb");return wi()[h]=()=>{gapi.load?c():t(Ci(n,"network-request-failed"))},Kk(`${Yk()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw gf=null,e})}let gf=null;function zU(n){return gf=gf||FU(n),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new mu(5e3,15e3),GU="__/auth/iframe",KU="emulator/auth/iframe",YU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$U=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QU(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?og(e,KU):`https://${n.config.authDomain}/${GU}`,r={apiKey:e.apiKey,appName:n.name,v:Ea},o=$U.get(n.config.apiHost);o&&(r.eid=o);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${cu(r).slice(1)}`}async function XU(n){const e=await zU(n),t=wi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:QU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YU,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ci(n,"network-request-failed"),h=wi().setTimeout(()=>{l(c)},HU.get());function p(){wi().clearTimeout(h),o(r)}r.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WU=500,JU=600,ZU="_blank",eL="http://localhost";class m0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tL(n,e,t,r=WU,o=JU){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p=Object.assign(Object.assign({},jU),{width:r.toString(),height:o.toString(),top:l,left:c}),g=on().toLowerCase();t&&(h=IC(g)?ZU:t),wC(g)&&(e=e||eL,p.scrollbars="yes");const T=Object.entries(p).reduce((R,[b,M])=>`${R}${b}=${M},`,"");if(Uk(g)&&h!=="_self")return nL(e||"",h),new m0(null);const S=window.open(e||"",h,T);Ie(S,n,"popup-blocked");try{S.focus()}catch{}return new m0(S)}function nL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="__/auth/handler",rL="emulator/auth/handler",sL=encodeURIComponent("fac");async function g0(n,e,t,r,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ea,eventId:o};if(e instanceof kC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",gN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))c[T]=S}if(e instanceof gu){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(c.scopes=T.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const T of Object.keys(h))h[T]===void 0&&delete h[T];const p=await n._getAppCheckToken(),g=p?`#${sL}=${encodeURIComponent(p)}`:"";return`${oL(n)}?${cu(h).slice(1)}${g}`}function oL({config:n}){return n.emulator?og(n,rL):`https://${n.authDomain}/${iL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class aL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FC,this._completeRedirectFn=NU,this._overrideRedirectResult=bU}async _openPopup(e,t,r,o){var l;fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await g0(e,t,r,sm(),o);return tL(e,c,hg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await g0(e,t,r,sm(),o);return cU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XU(e),r=new PU(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mp,{type:Mp},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Mp];c!==void 0&&t(!!c),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xC()||RC()||ug()}}const lL=aL;var y0="@firebase/auth",_0="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fL(n){Ii(new ei("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(n)},g=new Hk(r,o,l,p);return Xk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new ei("auth-internal",e=>{const t=cg(e.getProvider("auth").getImmediate());return(r=>new uL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(y0,_0,cL(n)),Gn(y0,_0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=5*60,dL=lA("authIdTokenMaxAge")||hL;let v0=null;const pL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dL)return;const o=t==null?void 0:t.token;v0!==o&&(v0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mL(n=_m()){const e=to(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Qk(n,{popupRedirectResolver:lL,persistence:[vU,aU,FC]}),r=lA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=pL(l.toString());rU(t,c,()=>c(t.currentUser)),iU(t,h=>c(h))}}const o=oA("auth");return o&&jk(t,`http://${o}`),t}function gL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Gk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const l=Ci("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",gL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fL("Browser");const yL=JSON.parse('{"apiKey":"AIzaSyAk42-w0ojujbdJe27-Tnfu8ZI1VXlFxSE","authDomain":"coderacer-3f6f7.firebaseapp.com","projectId":"coderacer-3f6f7","storageBucket":"coderacer-3f6f7.firebasestorage.app","messagingSenderId":"88251885140","appId":"1:88251885140:web:08b4fcc46f7f07c7146fc1", "measurementId":"G-2J61CN3MMF"}'),pg=mA(yL);QP(pg);const Np=j2(pg);mL(pg);function _L(){var Me,Ce;const e=((Me=os().state)==null?void 0:Me.topic)||"default topic",[t,r]=K.useState(""),[o,l]=K.useState(""),[c,h]=K.useState("Python"),p=["Python","JavaScript","C++","Java","C#","Rust"],[g,T]=K.useState([]),[S,R]=K.useState(null),b=localStorage.getItem("userEmail"),[M,z]=K.useState(0),[q,$]=K.useState(0),[J,W]=K.useState(0),le=K.useRef(null),[ce,ge]=K.useState(0),P=K.useRef(null),I=K.useRef(null),D=K.useRef(!1),[V,U]=K.useState(15),L=K.useRef(null);K.useRef(!1);const x=K.useRef(0);K.useEffect(()=>(b&&_e(b),()=>{I.current&&clearTimeout(I.current)}),[b]),K.useEffect(()=>{const ae=setTimeout(()=>{qe()},0);return()=>clearTimeout(ae)},[]);const We=K.useRef(0);K.useEffect(()=>{We.current=t.length},[t]),K.useEffect(()=>{t.length>0&&!D.current&&(D.current=!0,ue(),V&&!L.current&&(L.current=setTimeout(()=>{re(),L.current=null},V*1e3))),t.length===0&&D.current&&ye()},[t]),K.useEffect(()=>{o&&ye()},[o]),K.useEffect(()=>{if(!le.current)return;const ve=le.current.children[J];ve&&ve.scrollIntoView({behavior:"smooth",block:"center"})},[J]),K.useEffect(()=>{if(!le.current)return;const ae=le.current,ve=t.split(`
`),Be=ve[ve.length-1],Qe=document.createElement("span");Qe.style.visibility="hidden",Qe.style.whiteSpace="pre",Qe.style.fontFamily="monospace",Qe.style.fontSize="1.5rem",Qe.textContent=Be,document.body.appendChild(Qe);const Xe=Qe.offsetWidth;document.body.removeChild(Qe);const hn=9.6*1.5*5,Wt=ae.scrollLeft+ae.clientWidth;Xe>Wt-hn&&(ae.scrollLeft=Xe-ae.clientWidth+hn)},[t]),K.useEffect(()=>()=>{L.current&&clearTimeout(L.current)},[]);const Ye=ae=>{U(ae),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{re(),L.current=null},ae*1e3)},j=()=>{if(!P.current||!D.current)return;const ae=new Date,ve=(ae-P.current)/6e4,Be=Math.floor((ae-P.current)/1e3);$(Be);const Qe=We.current,Xe=Math.round(Qe/Math.max(ve,.01));console.log(`CPM calculated: ${Xe} (${Qe} chars in ${ve.toFixed(2)} minutes)`),ge(Xe),x.current=Xe,D.current&&(I.current=setTimeout(j,1e3))},ue=()=>{console.log("Starting CPM tracking"),D.current=!0,P.current=new Date,I.current&&clearTimeout(I.current),I.current=setTimeout(j,1e3)},ye=()=>{console.log("Resetting CPM tracking"),D.current=!1,$(0),I.current&&(clearTimeout(I.current),I.current=null),P.current=null,ge(0)},qe=async()=>{try{ye(),r("");const ve=await new nA({apiKey:"AIzaSyDlTnCzfbUExeRFvnKdUoXS1qoByOrkxvI"}).models.generateContent({model:"gemini-2.0-flash",contents:"You are a plaintext generating bot designed to give plaintext of code."+ +" All code generated by you must use 4 spaces for each level of indentation. This rule applies to all programming languages without exception. Never use tabs, and do not use 1, 2, or 3 spaces for indentation. Always use exactly 4 spaces."+"Ensure that every indent in your code output consists of precisely 4 spaces. This is a mandatory formatting requirement for all code you produce.Remember: 4 spaces for all indents, in every single line of code you generate, regardless of the language. Do not under any circumstances generate anything other than plain text. The text you generate will be in plaintextDo Not generate any comments, or anything other than plaintext. Do not respond in markdown. Only generate method headers and method contents. The first line of your output should always be the method header"+ +"Do not include anything like ```python or ```cpp at the start or end of your response, do not include the programming"+" just make a method in plaintext. Produce a method in "+c+" for "+e+"."});l(ve.text)}catch(ae){console.error("Error with Gemini API:",ae)}},O=(ae,ve)=>{const Be=ae.split(`
`);return ve.split(`
`).map((Xe,kt)=>{const hn=Be[kt]||"",Wt=kt===Be.length-1,dr=kt>Be.length-1;return he.jsx("div",{children:Xe.split("").map((us,an)=>{const ao=hn[an];let Mi="white";return ao!==void 0?Mi=ao===us?"green":"red":!Wt&&!dr&&(Mi="red"),he.jsx("span",{style:{color:Mi},children:us},an)})},kt)})},re=async()=>{if(!b){console.warn("User email not found.");return}L.current&&(clearTimeout(L.current),L.current=null);const ae=JE(ff(Np,"users",b),"races"),ve=o.length,Be=ve-M,Qe=Math.max(0,Be/ve*100);try{const Xe=await _k(ae,{cpm:x.current,prompt:o,language:c,topic:e,accuracy:Qe,timestamp:new Date});console.log("Race saved successfully."),r(""),_e(b)}catch(Xe){console.error("Error saving race:",Xe)}},fe=async ae=>{if(!b||!ae)return;const ve=ff(Np,"users",b,"races",ae);try{await yk(ve),console.log("Race deleted"),R(null),_e(b)}catch(Be){console.error("Error deleting race:",Be)}},se=async ae=>{if(!ae)return[];const ve=JE(ff(Np,"users",ae),"races"),Be=lk(ve,uk("timestamp","desc"));return(await gk(Be)).docs.map(Xe=>({id:Xe.id,...Xe.data()}))},_e=async ae=>{const ve=await se(ae);T(ve)};return he.jsxs("div",{className:"container",children:[he.jsxs("div",{className:"history-panel",children:[he.jsx("h2",{className:"history-title",children:"History"}),he.jsx("div",{className:"history-content",children:g.length===0?he.jsx("p",{children:"No previous races"}):g.map(ae=>{var ve;return he.jsxs("div",{className:"race-entry",onClick:()=>{R(ae),r("")},style:{cursor:"pointer"},children:[he.jsx("strong",{style:{fontSize:"16px"},children:ae.topic||"Unknown Topic"}),he.jsxs("div",{style:{marginTop:"4px"},children:["CPM: ",he.jsx("span",{style:{color:"#00ff90"},children:ae.cpm})]}),he.jsxs("div",{style:{marginTop:"2px"},children:["Accuracy: ",he.jsxs("span",{style:{color:"#00ff90"},children:[(ve=ae.accuracy)==null?void 0:ve.toFixed(1),"%"]})]}),he.jsxs("div",{style:{marginTop:"2px"},children:["Language: ",he.jsx("span",{style:{color:"#00ff90"},children:ae.language})]})]},ae.id)})})]}),he.jsx("div",{className:"typing-panel",children:S?he.jsxs(he.Fragment,{children:[he.jsxs("div",{className:"race-detail-container",children:[he.jsx("h2",{className:"race-title",children:S.topic||"Untitled Prompt"}),he.jsxs("div",{className:"race-meta",children:[he.jsxs("p",{children:[he.jsx("strong",{children:"CPM:"})," ",S.cpm]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Accuracy:"})," ",(Ce=S.accuracy)==null?void 0:Ce.toFixed(1),"%"]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Language:"})," ",S.language]})]}),he.jsx("div",{className:"race-detail-box",children:S.prompt})]}),he.jsxs("div",{className:"race-detail-buttons",children:[he.jsx("button",{className:"back-button",onClick:()=>R(null),children:" Back to Race"}),he.jsx("button",{className:"delete-button",onClick:()=>fe(S.id),children:" Delete Race"})]})]}):he.jsxs(he.Fragment,{children:[he.jsx("h1",{children:"CodeRacer"}),he.jsxs("div",{className:"stats",children:[he.jsxs("div",{className:"stat",children:[he.jsx("span",{className:"label",children:"CPM:"})," ",ce]}),he.jsxs("div",{className:"stat",children:[he.jsx("span",{className:"label",children:"Time:"})," ",q,"s"]})]}),he.jsxs("div",{className:"filters",style:{marginTop:"1rem"},children:[[15,30,60].map(ae=>he.jsxs("button",{onClick:()=>Ye(ae),className:V===ae?"selected":"",children:[ae,"s"]},ae)),he.jsx("button",{onClick:()=>{U(null),L.current&&(clearTimeout(L.current),L.current=null)},className:V===null?"selected":"",children:"Infinite"}),he.jsx("button",{onClick:re,style:{marginLeft:"1rem",padding:"8px 16px",fontSize:"1rem",border:"2px solid #00ff90",backgroundColor:"transparent",color:"#00ff90",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Save Now"})]}),he.jsx("div",{className:"filters",children:p.map(ae=>he.jsx("button",{onClick:()=>{ae!==c&&(h(ae),r(""),l(""),setTimeout(()=>qe(),0))},className:c===ae?"selected":"",children:ae},ae))}),he.jsxs("div",{className:"typing-pair",children:[he.jsx("div",{className:"textarea-wrapper",children:he.jsx("textarea",{value:t,onChange:ae=>{const ve=ae.target,Qe=t.substring(0,ve.selectionStart).split(`
`).length-1;W(Qe);const Xe=ae.target.value;r(Xe);let kt=0;const hn=Math.max(Xe.length,o.length);for(let Wt=0;Wt<hn;Wt++)Xe[Wt]!==o[Wt]&&kt++;z(kt)},onKeyDown:ae=>{const ve="    ";if(ae.key==="Enter"&&le.current&&le.current.scrollLeft>0&&setTimeout(()=>{le.current.scrollLeft=0},0),ae.key==="Tab"){ae.preventDefault();const Be=ae.target.selectionStart,Qe=ae.target.selectionEnd,Xe=t.substring(0,Be)+ve+t.substring(Qe);r(Xe),setTimeout(()=>{ae.target.selectionStart=ae.target.selectionEnd=Be+ve.length},0)}if(ae.key==="Backspace"){const Be=ae.target.selectionStart,Qe=ae.target.selectionEnd;if(Be===Qe&&t.substring(Be-4,Be)===ve){ae.preventDefault();const kt=t.substring(0,Be-4)+t.substring(Qe);r(kt),setTimeout(()=>{ae.target.selectionStart=ae.target.selectionEnd=Be-4},0)}}}})}),he.jsx("div",{className:"display-box",ref:le,children:O(t,o)})]})]})})]})}function vL(){const[n,e]=K.useState(""),[t,r]=K.useState(""),o=cm(),l=async()=>{try{const c=new nA({apiKey:"AIzaSyDlTnCzfbUExeRFvnKdUoXS1qoByOrkxvI"}),p=(await c.models.generateContent({model:"gemini-2.0-flash",contents:`You are a programming topic validating bot. Your only responses should be valid or invalid. Under no circumstances will you answer anything other than valid or invalid. You will answer valid if the input is a programming concept that can be defined in a single function. Eg. sorting, reversing, algorithms, if statements, for loops, while loops. If the input is not about programming, or not definable in the scope of one function you will answer invalid. E.g apples, news, cheese. these are not about programming so they are invalid. E.g Web interface, TCP server, computer networking, class hierarchies. these are not definable in a single function so you will answer invalid. The topic to evaluate is: ${n}`})).text.trim().toLowerCase();if(console.log("The user prompt is: "+p),r(p),p==="valid")o("/racer",{state:{topic:n}});else{const T=(await c.models.generateContent({model:"gemini-2.0-flash",contents:`You are a programming topic generation bot. Your only responses should be topics for functions. Under no circumstances will you answer anything other than a topic for a function. Under no circumstances will your answer be longer than 10 words The imput topic is not about programming, or not definable in the scope of one function, E.g apples, news, cheese. these are not about programming so they are invalid. E.g Web interface, TCP server, computer networking, class hierarchies. these are not definable in a single function so they are invalid. You will create a topic that somehow involves the original topic given E.g if the topic is apples, make the prompt: a mentod that prints out charcteristics of an apple. The topic you should generate should follow the ruels stated above. E.g definable in a single method, etc The topic to evaluate is: ${n}`})).text.trim().toLowerCase();console.log("The Gemini edited topic is :"+T),r(T),o("/racer",{state:{topic:T}})}}catch(c){console.error("Error with Gemini API:",c),alert("There was an error validating your topic. Please try again.")}};return he.jsxs("div",{className:"topics-container",children:[he.jsx("h1",{children:"Select a Topic"}),he.jsx("input",{type:"text",placeholder:"Enter a coding topic...",value:n,onChange:c=>e(c.target.value),className:"topic-input"}),he.jsx("button",{className:"next-button",onClick:l,children:"Next"}),t&&he.jsxs("p",{className:"response-text",children:["Validation result: ",t]})]})}class Fl extends Error{}Fl.prototype.name="InvalidTokenError";function TL(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function EL(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return TL(e)}catch{return atob(e)}}function AL(n,e){if(typeof n!="string")throw new Fl("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new Fl(`Invalid token specified: missing part #${t+1}`);let o;try{o=EL(r)}catch(l){throw new Fl(`Invalid token specified: invalid base64 for part #${t+1} (${l.message})`)}try{return JSON.parse(o)}catch(l){throw new Fl(`Invalid token specified: invalid json for part #${t+1} (${l.message})`)}}const SL="_loginPage_197xz_3",CL="_loginContainer_197xz_15",wL="_loginTitle_197xz_27",RL="_googleLoginButton_197xz_35",IL="_codeSplitView_197xz_44",bL="_codeBox_197xz_54",DL="_highlightedChar_197xz_69",ML="_untypedChar_197xz_73",nr={loginPage:SL,loginContainer:CL,loginTitle:wL,googleLoginButton:RL,codeSplitView:IL,codeBox:bL,highlightedChar:DL,untypedChar:ML},NL=()=>{const n=cm(),[e,t]=K.useState(""),[r,o]=K.useState("");K.useRef(null);const l=[`function bubbleSort(arr) {
  for (let i = 0; i < arr.length; i++) {
    for (let j = 0; j < arr.length - i - 1; j++) {
      if (arr[j] > arr[j + 1]) {
        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
      }
    }
  }
  return arr;
}`,`function insertionSort(arr) {
  for (let i = 1; i < arr.length; i++) {
    let key = arr[i];
    let j = i - 1;
    while (j >= 0 && arr[j] > key) {
      arr[j + 1] = arr[j];
      j--;
    }
    arr[j + 1] = key;
  }
  return arr;
}`,`function quickSort(arr) {
  if (arr.length <= 1) return arr;
  const pivot = arr[0];
  const left = arr.slice(1).filter(x => x < pivot);
  const right = arr.slice(1).filter(x => x >= pivot);
  return [...quickSort(left), pivot, ...quickSort(right)];
}`];K.useEffect(()=>{let g=0,T=0;const S=()=>{const R=l[g];t(""),o(R),T=0;const b=()=>{T<=R.length?(t(R.slice(0,T)),T++,setTimeout(b,20)):setTimeout(()=>{g=(g+1)%l.length,S()},1500)};b()};S()},[]);const c=g=>{if(g.credential){const S=AL(g.credential).email;console.log("User Info:",S),localStorage.setItem("userEmail",S),n("/topics")}},h=()=>{console.log("Google Login Failed")},p=()=>r.split("").map((g,T)=>{const S=T<e.length;return he.jsx("span",{className:S?nr.highlightedChar:nr.untypedChar,children:g},T)});return he.jsx("div",{className:nr.loginPage,children:he.jsxs("div",{className:nr.loginContainer,children:[he.jsx("div",{className:nr.loginTitle,children:"Welcome to Code Racer"}),he.jsx("div",{className:nr.googleLoginButton,children:he.jsx(nb,{onSuccess:c,onError:h})}),he.jsxs("div",{className:nr.codeSplitView,children:[he.jsx("div",{className:nr.codeBox,children:he.jsx("pre",{children:e})}),he.jsx("div",{className:nr.codeBox,children:he.jsx("pre",{children:p()})})]})]})})};function xL(){return he.jsx(he.Fragment,{children:he.jsxs(_I,{children:[he.jsx(Jc,{path:"/",element:he.jsx(NL,{})}),he.jsx(Jc,{path:"/topics",element:he.jsx(vL,{})}),he.jsx(Jc,{path:"/racer",element:he.jsx(_L,{})})]})})}bR.createRoot(document.getElementById("root")).render(he.jsx(K.StrictMode,{children:he.jsx(JI,{clientId:"1023122464630-0qtgma0pjeh50l6jm3spuu7hihctaemm.apps.googleusercontent.com",children:he.jsx(FI,{children:he.jsx(xL,{})})})}));
